(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3394:function(e,t,n){Promise.resolve().then(n.bind(n,4781))},4781:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(9075),i=n(511),s=n(2445),r=n(6150),d=n(9347),l=n(4462),o=n(1430),c=n(9427),m=n(5152),h=n(86);function p(e,t){let n=h.Mp(e,t),a=[],i=null,s=1,r=1;for(let e of n){let t=e.value.split("\n").filter((e,t,n)=>t<n.length-1||""!==e);if(e.added||e.removed)for(let n of(i||(i={oldStart:s,oldLines:0,newStart:r,newLines:0,lines:[]}),t)){let t={lineNumber:e.added?r:s,type:e.added?"added":"removed",content:n,oldLineNumber:e.removed?s:void 0,newLineNumber:e.added?r:void 0};i.lines.push(t),e.added?(i.newLines++,r++):(i.oldLines++,s++)}else{if(i&&i.lines.length>0){let e=Math.min(3,t.length);for(let n=0;n<e;n++)i.lines.push({lineNumber:s+n,type:"unchanged",content:t[n],oldLineNumber:s+n,newLineNumber:r+n});t.length>3&&(a.push(i),i=null)}s+=t.length,r+=t.length}}i&&i.lines.length>0&&a.push(i);let d=0,l=0;for(let e of a)for(let t of e.lines)"added"===t.type&&d++,"removed"===t.type&&l++;return{oldContent:e,newContent:t,hunks:a,additions:d,deletions:l}}function x(e){let t={domain:{name:"",version:""},types:new Map,entities:new Map,behaviors:new Map},n=e.split("\n"),a="root",i=null,s=null,r=0;for(let e=0;e<n.length;e++){let d=n[e].trim(),l=e+1;r+=(d.match(/{/g)||[]).length,r-=(d.match(/}/g)||[]).length;let o=d.match(/^domain\s+(\w+)\s*\{/);if(o){t.domain.name=o[1];continue}let c=d.match(/version:\s*"([^"]+)"/);if(c){t.domain.version=c[1];continue}let m=d.match(/^type\s+(\w+)\s*=/);if(m){t.types.set(m[1],{name:m[1],definition:d,constraints:[],line:l});continue}let h=d.match(/^entity\s+(\w+)\s*\{/);if(h){a="entity",i={name:h[1],fields:new Map,invariants:[],line:l};continue}let p=d.match(/^behavior\s+(\w+)\s*\{/);if(p){a="behavior",s={name:p[1],inputFields:new Map,outputType:"",errors:[],preconditions:[],postconditions:[],temporal:[],security:[],line:l};continue}if("entity"===a&&i){let e=d.match(/^(\w+)(\?)?:\s*(\S+)/);if(e){let t=[];for(let e of d.matchAll(/\[([^\]]+)\]/g))t.push(...e[1].split(",").map(e=>e.trim()));i.fields.set(e[1],{name:e[1],type:e[3],optional:"?"===e[2],annotations:t,line:l})}"}"===d&&r<=1&&(t.entities.set(i.name,i),i=null,a="root")}"behavior"===a&&s&&"}"===d&&r<=1&&(t.behaviors.set(s.name,s),s=null,a="root")}return t}function g(e,t){let n=x(e),a=x(t),i=[],s=0,r=()=>"change-".concat(++s);for(let[e,t]of(n.domain.version!==a.domain.version&&i.push({id:r(),type:"domain_version_changed",path:["domain","version"],oldValue:n.domain.version,newValue:a.domain.version,description:"Version changed from ".concat(n.domain.version," to ").concat(a.domain.version),breakingLevel:"safe"}),a.types)){let a=n.types.get(e);a?a.definition!==t.definition&&i.push({id:r(),type:"type_constraint_modified",path:["types",e],oldValue:a.definition,newValue:t.definition,description:"Type '".concat(e,"' definition changed"),breakingLevel:"warning",location:{oldLine:a.line,newLine:t.line}}):i.push({id:r(),type:"type_added",path:["types",e],newValue:t.definition,description:"Type '".concat(e,"' was added"),breakingLevel:"safe",location:{newLine:t.line}})}for(let[e,t]of n.types)a.types.has(e)||i.push({id:r(),type:"type_removed",path:["types",e],oldValue:t.definition,description:"Type '".concat(e,"' was removed"),breakingLevel:"breaking",location:{oldLine:t.line}});for(let[e,t]of a.entities){let a=n.entities.get(e);a?i.push(...function(e,t,n){let a=[],i=t.name;for(let[s,r]of t.fields){let t=e.fields.get(s);if(t){t.type!==r.type&&a.push({id:n(),type:"field_type_changed",path:["entities",i,"fields",s,"type"],oldValue:t.type,newValue:r.type,description:"Field '".concat(s,"' type changed from '").concat(t.type,"' to '").concat(r.type,"'"),breakingLevel:"breaking",location:{oldLine:t.line,newLine:r.line}}),t.optional&&!r.optional?a.push({id:n(),type:"field_made_required",path:["entities",i,"fields",s,"optional"],oldValue:!0,newValue:!1,description:"Field '".concat(s,"' in '").concat(i,"' is now required"),breakingLevel:"breaking",location:{oldLine:t.line,newLine:r.line}}):!t.optional&&r.optional&&a.push({id:n(),type:"field_made_optional",path:["entities",i,"fields",s,"optional"],oldValue:!1,newValue:!0,description:"Field '".concat(s,"' in '").concat(i,"' is now optional"),breakingLevel:"safe",location:{oldLine:t.line,newLine:r.line}});let e=r.annotations.filter(e=>!t.annotations.includes(e)),d=t.annotations.filter(e=>!r.annotations.includes(e));for(let t of e)a.push({id:n(),type:"field_annotation_added",path:["entities",i,"fields",s,"annotations",t],newValue:t,description:"Annotation '".concat(t,"' added to '").concat(i,".").concat(s,"'"),breakingLevel:"safe",location:{newLine:r.line}});for(let e of d)a.push({id:n(),type:"field_annotation_removed",path:["entities",i,"fields",s,"annotations",e],oldValue:e,description:"Annotation '".concat(e,"' removed from '").concat(i,".").concat(s,"'"),breakingLevel:"warning",location:{oldLine:t.line}})}else{let e=r.optional?"safe":"breaking";a.push({id:n(),type:"field_added",path:["entities",i,"fields",s],newValue:"".concat(r.type).concat(r.optional?"?":""),description:"Field '".concat(s,"' was added to '").concat(i,"'").concat(r.optional?"":" (required, breaking)"),breakingLevel:e,location:{newLine:r.line}})}}for(let[s,r]of e.fields)t.fields.has(s)||a.push({id:n(),type:"field_removed",path:["entities",i,"fields",s],oldValue:"".concat(r.type).concat(r.optional?"?":""),description:"Field '".concat(s,"' was removed from '").concat(i,"'"),breakingLevel:"breaking",location:{oldLine:r.line}});return a}(a,t,r)):i.push({id:r(),type:"entity_added",path:["entities",e],description:"Entity '".concat(e,"' was added"),breakingLevel:"safe",location:{newLine:t.line}})}for(let[e,t]of n.entities)a.entities.has(e)||i.push({id:r(),type:"entity_removed",path:["entities",e],description:"Entity '".concat(e,"' was removed"),breakingLevel:"breaking",location:{oldLine:t.line}});for(let[e,t]of a.behaviors)n.behaviors.get(e)||i.push({id:r(),type:"behavior_added",path:["behaviors",e],description:"Behavior '".concat(e,"' was added"),breakingLevel:"safe",location:{newLine:t.line}});for(let[e,t]of n.behaviors)a.behaviors.has(e)||i.push({id:r(),type:"behavior_removed",path:["behaviors",e],description:"Behavior '".concat(e,"' was removed"),breakingLevel:"breaking",location:{oldLine:t.line}});return i}function u(e,t){let n=p(e,t),a=g(e,t),i=function(e){let t=[],n=0,a=e.filter(e=>"breaking"===e.breakingLevel),i=a.filter(e=>"field_removed"===e.type),s=a.filter(e=>"field_type_changed"===e.type),r=a.filter(e=>"entity_removed"===e.type);a.filter(e=>"behavior_removed"===e.type);let d=a.filter(e=>"field_made_required"===e.type),l=a.filter(e=>"field_added"===e.type&&"breaking"===e.breakingLevel);if(i.length>0&&t.push({id:"hint-".concat(++n),title:"Handle Removed Fields",description:"".concat(i.length," field(s) have been removed. Update code that references these fields."),severity:"critical",changeIds:i.map(e=>e.id),steps:[{order:1,title:"Update data models",description:"Remove references to deleted fields in your data models and DTOs.",required:!0},{order:2,title:"Update database schema",description:"Create a migration to remove the columns (after data migration if needed).",required:!0},{order:3,title:"Update API consumers",description:"Notify API consumers that these fields are no longer available.",required:!1}]}),s.length>0){var o,c;t.push({id:"hint-".concat(++n),title:"Migrate Field Type Changes",description:"".concat(s.length," field(s) have changed types. Data migration required."),severity:"critical",changeIds:s.map(e=>e.id),steps:[{order:1,title:"Create migration script",description:"Write a migration to convert existing data to the new type.",required:!0},{order:2,title:"Update validation",description:"Ensure validation rules match the new type constraints.",required:!0},{order:3,title:"Update serialization",description:"Update JSON/API serialization to handle the new type.",required:!0}],codeExample:{before:(null===(o=s[0])||void 0===o?void 0:o.oldValue)||"",after:(null===(c=s[0])||void 0===c?void 0:c.newValue)||"",language:"typescript"}})}if(r.length>0&&t.push({id:"hint-".concat(++n),title:"Handle Removed Entities",description:"".concat(r.length," entity/entities have been removed. Major refactoring required."),severity:"critical",changeIds:r.map(e=>e.id),steps:[{order:1,title:"Archive data",description:"Backup or archive any data from removed entities before deletion.",required:!0},{order:2,title:"Remove references",description:"Remove all code references to the deleted entities.",required:!0},{order:3,title:"Drop database tables",description:"Create migration to drop the associated tables.",required:!0}]}),d.length>0||l.length>0){let e=[...d,...l];t.push({id:"hint-".concat(++n),title:"Populate Required Fields",description:"".concat(e.length," field(s) are now required. Existing records need default values."),severity:"high",changeIds:e.map(e=>e.id),steps:[{order:1,title:"Set default values",description:"Determine appropriate default values for existing records.",required:!0},{order:2,title:"Run backfill migration",description:"Create and run a migration to populate the new required fields.",required:!0},{order:3,title:"Add NOT NULL constraint",description:"After backfill, add NOT NULL constraint to the database column.",required:!0}]})}return t}(a),s=a.filter(e=>"breaking"===e.breakingLevel).length,r=a.filter(e=>"warning"===e.breakingLevel).length;return{totalChanges:a.length,additions:n.additions,deletions:n.deletions,modifications:a.filter(e=>e.type.includes("modified")||e.type.includes("changed")).length,breakingChanges:s,warnings:r,semanticChanges:a,migrationHints:i}}function f(e){let{oldContent:t,newContent:n,oldVersion:s="Old",newVersion:r="New",showLineNumbers:d=!0,onLineClick:l}=e,o=(0,i.useMemo)(()=>p(t,n),[t,n]),c=(0,i.useMemo)(()=>{let e=[];for(let t of o.hunks){let n=[],a=[],i=[];for(let e of t.lines)"removed"===e.type?n.push(e):"added"===e.type?a.push(e):i.push(e);let s=Math.max(n.length,a.length);for(let t=0;t<s;t++)e.push({oldLine:n[t]||null,newLine:a[t]||null});for(let t of i)e.push({oldLine:t,newLine:t})}return e},[o]),m=e=>{switch(e){case"added":return"bg-added-bg";case"removed":return"bg-removed-bg";default:return""}},h=e=>{switch(e){case"added":return"bg-added-line text-added-text";case"removed":return"bg-removed-line text-removed-text";default:return"bg-gray-50 text-gray-500"}};return(0,a.jsxs)("div",{className:"font-mono text-sm border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex-1 px-4 py-2 border-r border-gray-200",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:s}),(0,a.jsxs)("span",{className:"ml-2 text-red-600",children:["−",o.deletions]})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 py-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:r}),(0,a.jsxs)("span",{className:"ml-2 text-green-600",children:["+",o.additions]})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-1 border-r border-gray-200 overflow-x-auto",children:c.map((e,t)=>{var n,i,s,r,o,c,p;return(0,a.jsxs)("div",{className:"flex min-h-[24px] ".concat(m(null===(n=e.oldLine)||void 0===n?void 0:n.type)),onClick:()=>{var t;return(null===(t=e.oldLine)||void 0===t?void 0:t.oldLineNumber)&&(null==l?void 0:l(e.oldLine.oldLineNumber,"old"))},children:[d&&(0,a.jsx)("div",{className:"w-12 px-2 text-right select-none flex-shrink-0 ".concat(h(null===(i=e.oldLine)||void 0===i?void 0:i.type)),children:(null===(s=e.oldLine)||void 0===s?void 0:s.oldLineNumber)||""}),(0,a.jsxs)("div",{className:"flex-1 px-2 whitespace-pre ".concat((null===(r=e.oldLine)||void 0===r?void 0:r.type)==="removed"?"text-removed-text":""),children:[(null===(o=e.oldLine)||void 0===o?void 0:o.type)==="removed"&&(0,a.jsx)("span",{className:"select-none mr-1",children:"−"}),null!==(p=null===(c=e.oldLine)||void 0===c?void 0:c.content)&&void 0!==p?p:""]})]},"old-".concat(t))})}),(0,a.jsx)("div",{className:"flex-1 overflow-x-auto",children:c.map((e,t)=>{var n,i,s,r,o,c,p;return(0,a.jsxs)("div",{className:"flex min-h-[24px] ".concat(m(null===(n=e.newLine)||void 0===n?void 0:n.type)),onClick:()=>{var t;return(null===(t=e.newLine)||void 0===t?void 0:t.newLineNumber)&&(null==l?void 0:l(e.newLine.newLineNumber,"new"))},children:[d&&(0,a.jsx)("div",{className:"w-12 px-2 text-right select-none flex-shrink-0 ".concat(h(null===(i=e.newLine)||void 0===i?void 0:i.type)),children:(null===(s=e.newLine)||void 0===s?void 0:s.newLineNumber)||""}),(0,a.jsxs)("div",{className:"flex-1 px-2 whitespace-pre ".concat((null===(r=e.newLine)||void 0===r?void 0:r.type)==="added"?"text-added-text":""),children:[(null===(o=e.newLine)||void 0===o?void 0:o.type)==="added"&&(0,a.jsx)("span",{className:"select-none mr-1",children:"+"}),null!==(p=null===(c=e.newLine)||void 0===c?void 0:c.content)&&void 0!==p?p:""]})]},"new-".concat(t))})})]})]})}function v(e){let{oldContent:t,newContent:n,oldVersion:s="Old",newVersion:r="New",showLineNumbers:d=!0,contextLines:l=3,onLineClick:o}=e,c=(0,i.useMemo)(()=>p(t,n),[t,n]),m=e=>{switch(e){case"added":return"bg-added-bg";case"removed":return"bg-removed-bg";default:return""}},h=e=>{switch(e){case"added":return"bg-added-line text-added-text";case"removed":return"bg-removed-line text-removed-text";default:return"bg-gray-50 text-gray-500"}},x=e=>{switch(e){case"added":return"+";case"removed":return"−";default:return" "}};return(0,a.jsxs)("div",{className:"font-mono text-sm border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-2 border-b border-gray-200 bg-gray-50",children:[(0,a.jsxs)("span",{className:"font-semibold text-gray-700",children:[s," → ",r]}),(0,a.jsxs)("span",{className:"ml-4 text-red-600",children:["−",c.deletions]}),(0,a.jsxs)("span",{className:"ml-2 text-green-600",children:["+",c.additions]})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[c.hunks.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-blue-50 text-blue-700 px-4 py-1 text-xs border-b border-gray-200",children:["@@ -",e.oldStart,",",e.oldLines," +",e.newStart,",",e.newLines," @@"]}),e.lines.map((e,n)=>(0,a.jsxs)("div",{className:"flex min-h-[24px] ".concat(m(e.type)," cursor-pointer hover:brightness-95"),onClick:()=>{let t="removed"===e.type?e.oldLineNumber:e.newLineNumber,n="removed"===e.type?"old":"new";t&&(null==o||o(t,n))},children:[d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-12 px-2 text-right select-none flex-shrink-0 border-r border-gray-200 ".concat(h(e.type)),children:"added"!==e.type?e.oldLineNumber:""}),(0,a.jsx)("div",{className:"w-12 px-2 text-right select-none flex-shrink-0 border-r border-gray-200 ".concat(h(e.type)),children:"removed"!==e.type?e.newLineNumber:""})]}),(0,a.jsx)("div",{className:"w-6 text-center select-none flex-shrink-0 ".concat("added"===e.type?"text-added-text":"removed"===e.type?"text-removed-text":"text-gray-400"),children:x(e.type)}),(0,a.jsx)("div",{className:"flex-1 px-2 whitespace-pre ".concat("added"===e.type?"text-added-text":"removed"===e.type?"text-removed-text":""),children:e.content})]},"".concat(t,"-").concat(n)))]},t)),0===c.hunks.length&&(0,a.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:"No differences found"})]})]})}var b=n(2998),y=n(8192),N=n(8238),w=n(6274),j=n(679),_=n(6835),k=n(7061),L=n(7076),C=n(9644),S=n(6714),E=n(6376);let q={domain_version_changed:"documentation",domain_renamed:"schema",type_added:"schema",type_removed:"schema",type_renamed:"schema",type_constraint_added:"contract",type_constraint_removed:"contract",type_constraint_modified:"contract",entity_added:"schema",entity_removed:"schema",entity_renamed:"schema",field_added:"schema",field_removed:"schema",field_renamed:"schema",field_type_changed:"schema",field_made_optional:"schema",field_made_required:"schema",field_annotation_added:"schema",field_annotation_removed:"schema",invariant_added:"contract",invariant_removed:"contract",invariant_modified:"contract",behavior_added:"behavior",behavior_removed:"behavior",behavior_renamed:"behavior",input_field_added:"behavior",input_field_removed:"behavior",input_field_type_changed:"behavior",output_type_changed:"behavior",error_added:"behavior",error_removed:"behavior",precondition_added:"contract",precondition_removed:"contract",precondition_modified:"contract",postcondition_added:"contract",postcondition_removed:"contract",postcondition_modified:"contract",temporal_spec_added:"contract",temporal_spec_removed:"contract",temporal_spec_modified:"contract",security_spec_added:"policy",security_spec_removed:"policy",scenario_added:"documentation",scenario_removed:"documentation",scenario_modified:"documentation",policy_added:"policy",policy_removed:"policy",policy_modified:"policy"},V={domain_version_changed:"Documentation update only",domain_renamed:"Major namespace change, affects all imports",type_added:"New type available for use",type_removed:"Type no longer available, update all usages",type_renamed:"Type name changed, update all references",type_constraint_added:"New validation rules apply to existing data",type_constraint_removed:"Validation relaxed, previously invalid data may now be valid",type_constraint_modified:"Validation rules changed, verify existing data compliance",entity_added:"New entity available",entity_removed:"Entity no longer exists, remove all references",entity_renamed:"Entity name changed, update all references",field_added:"New field available on entity",field_removed:"Field no longer exists, remove all usages",field_renamed:"Field name changed, update all references",field_type_changed:"Field type changed, data migration required",field_made_optional:"Field now nullable, update null checks",field_made_required:"Field now required, backfill existing records",field_annotation_added:"New metadata on field",field_annotation_removed:"Metadata removed from field",invariant_added:"New constraint must be satisfied",invariant_removed:"Constraint relaxed",invariant_modified:"Constraint rules changed",behavior_added:"New API endpoint available",behavior_removed:"API endpoint removed",behavior_renamed:"API endpoint renamed, update clients",input_field_added:"New input field on API",input_field_removed:"Input field removed from API",input_field_type_changed:"Input field type changed",output_type_changed:"API response type changed",error_added:"New error type may be returned",error_removed:"Error type no longer returned",precondition_added:"New validation on requests",precondition_removed:"Validation relaxed on requests",precondition_modified:"Request validation changed",postcondition_added:"New guarantee on responses",postcondition_removed:"Guarantee removed from responses",postcondition_modified:"Response guarantee changed",temporal_spec_added:"New timing requirement",temporal_spec_removed:"Timing requirement removed",temporal_spec_modified:"Timing requirement changed",security_spec_added:"New security requirement",security_spec_removed:"Security requirement removed",scenario_added:"New test scenario",scenario_removed:"Test scenario removed",scenario_modified:"Test scenario updated",policy_added:"New policy in effect",policy_removed:"Policy removed",policy_modified:"Policy rules changed"};function Z(e){let t=q[e.type]||"documentation",n=V[e.type]||"Unknown impact",a=function(e){let t=[],n=e.type;return(n.startsWith("entity_")||n.startsWith("field_")||n.startsWith("type_"))&&t.push("database","data-layer","models"),(n.startsWith("behavior_")||n.startsWith("input_")||n.startsWith("output_")||n.startsWith("error_"))&&t.push("api","clients","controllers"),(n.includes("condition")||n.includes("invariant")||n.includes("constraint"))&&t.push("validation","business-logic"),n.startsWith("security_")&&t.push("security","middleware","authentication"),n.startsWith("temporal_")&&t.push("monitoring","slo","alerts"),[...new Set(t)]}(e);return{...e,category:t,impact:n,affectedComponents:a}}function A(e){let t=e.map(Z),n=new Map;for(let e of t){let t=n.get(e.category)||[];t.push(e),n.set(e.category,t)}let a=t.filter(e=>"breaking"===e.breakingLevel),i=t.filter(e=>"warning"===e.breakingLevel),s=t.filter(e=>"safe"===e.breakingLevel),r={schema:0,behavior:0,contract:0,policy:0,documentation:0};for(let[e,t]of n)r[e]=t.length;let d={breaking:a.length,warning:i.length,safe:s.length},l=function(e){if(0===e.length)return 0;let t=0;for(let n of e){switch(n.breakingLevel){case"breaking":t+=30;break;case"warning":t+=10;break;case"safe":t+=2}switch(n.category){case"schema":t+=5;break;case"behavior":t+=3;break;case"policy":t+=4}"entity_removed"===n.type&&(t+=20),"behavior_removed"===n.type&&(t+=15),"field_type_changed"===n.type&&(t+=10)}return Math.min(100,t)}(t);return{categories:n,breakingChanges:a,warnings:i,safeChanges:s,summary:{totalChanges:e.length,byCategory:r,byLevel:d,riskScore:l}}}function I(e){var t;let{oldContent:n,newContent:s,onChangeSelect:r,selectedChangeId:d,showOnlyBreaking:o=!1}=e,[c,m]=(0,i.useState)(new Set(["schema","behavior","contract","policy"])),h=(0,i.useMemo)(()=>A(g(n,s)),[n,s]),p=e=>{m(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},x=e=>{switch(e){case"schema":return(0,a.jsx)(b.Z,{className:"w-4 h-4"});case"behavior":return(0,a.jsx)(y.Z,{className:"w-4 h-4"});case"contract":default:return(0,a.jsx)(N.Z,{className:"w-4 h-4"});case"policy":return(0,a.jsx)(w.Z,{className:"w-4 h-4"})}},u=e=>e.type.includes("added")?(0,a.jsx)(j.Z,{className:"w-4 h-4 text-green-600"}):e.type.includes("removed")?(0,a.jsx)(_.Z,{className:"w-4 h-4 text-red-600"}):(0,a.jsx)(k.Z,{className:"w-4 h-4 text-yellow-600"}),f=e=>{switch(e){case"breaking":return(0,a.jsx)(L.Z,{className:"w-4 h-4 text-red-600"});case"warning":return(0,a.jsx)(l.Z,{className:"w-4 h-4 text-yellow-600"});case"safe":return(0,a.jsx)(C.Z,{className:"w-4 h-4 text-green-600"})}},v=o?new Map(Array.from(h.categories.entries()).map(e=>{let[t,n]=e;return[t,n.filter(e=>"breaking"===e.breakingLevel)]})):h.categories;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900",children:[h.summary.totalChanges," Changes"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-red-600",children:[(0,a.jsx)(L.Z,{className:"w-3 h-3"}),h.summary.byLevel.breaking," Breaking"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-yellow-600",children:[(0,a.jsx)(l.Z,{className:"w-3 h-3"}),h.summary.byLevel.warning," Warnings"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,a.jsx)(C.Z,{className:"w-3 h-3"}),h.summary.byLevel.safe," Safe"]})]})]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((t=h.summary.riskScore)>=70?"text-red-600 bg-red-100":t>=40?"text-yellow-600 bg-yellow-100":"text-green-600 bg-green-100"),children:["Risk Score: ",h.summary.riskScore]})]})}),(0,a.jsxs)("div",{className:"divide-y divide-gray-200",children:[Array.from(v.entries()).map(e=>{let[t,n]=e;if(0===n.length)return null;let i=c.has(t),s=n.filter(e=>"breaking"===e.breakingLevel).length;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>p(t),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i?(0,a.jsx)(S.Z,{className:"w-4 h-4 text-gray-400"}):(0,a.jsx)(E.Z,{className:"w-4 h-4 text-gray-400"}),x(t),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:{schema:"Schema Changes",behavior:"API Changes",contract:"Contract Changes",policy:"Policy Changes",documentation:"Documentation"}[t]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",n.length," changes)"]})]}),s>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:[s," breaking"]})]}),i&&(0,a.jsx)("div",{className:"bg-gray-50 border-t border-gray-200",children:n.map(e=>(0,a.jsxs)("button",{onClick:()=>null==r?void 0:r(e),className:"w-full px-4 py-3 flex items-start gap-3 text-left hover:bg-white transition-colors border-b border-gray-100 last:border-b-0 ".concat(d===e.id?"bg-blue-50 border-l-2 border-l-blue-500":""),children:[(0,a.jsx)("div",{className:"mt-0.5",children:u(e)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 truncate",children:e.path.join(" > ")}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full ".concat({breaking:"text-red-600 bg-red-50 border-red-200",warning:"text-yellow-700 bg-yellow-50 border-yellow-200",safe:"text-green-600 bg-green-50 border-green-200"}[e.breakingLevel]),children:e.breakingLevel})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),e.impact&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Impact: ",e.impact]}),e.affectedComponents.length>0&&(0,a.jsx)("div",{className:"mt-2 flex gap-1 flex-wrap",children:e.affectedComponents.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-200 text-gray-700 rounded",children:e},e))})]}),(0,a.jsx)("div",{className:"mt-0.5",children:f(e.breakingLevel)})]},e.id))})]},t)}),0===h.summary.totalChanges&&(0,a.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:"No semantic changes detected"})]})]})}var U=n(701);function T(e){let{oldContent:t,newContent:n,onChangeClick:s}=e,{breakingChanges:r,warnings:d}=(0,i.useMemo)(()=>A(g(t,n)),[t,n]),o=e=>{let t=new Map;for(let n of e){let e=n.path.slice(0,2).join("."),a=t.get(e)||[];a.push(n),t.set(e,a)}return t},c=o(r),m=o(d);return 0===r.length&&0===d.length?(0,a.jsxs)("div",{className:"border border-green-200 rounded-lg bg-green-50 p-6 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{className:"font-semibold",children:"No breaking changes detected"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-green-600",children:"This update is backward compatible and can be safely deployed."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[r.length>0&&(0,a.jsxs)("div",{className:"border border-red-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("h3",{className:"font-semibold text-red-900",children:[r.length," Breaking Change",1!==r.length?"s":""]})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-red-700",children:"These changes may break existing integrations or require data migrations."})]}),(0,a.jsx)("div",{className:"divide-y divide-red-100",children:Array.from(c.entries()).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsx)("div",{className:"px-4 py-2 bg-red-25 border-b border-red-100",children:(0,a.jsx)("span",{className:"text-sm font-medium text-red-800",children:t})}),n.map(e=>{var t;return(0,a.jsxs)("button",{onClick:()=>null==s?void 0:s(e),className:"w-full px-4 py-3 text-left hover:bg-red-50 transition-colors flex items-start gap-3",children:[(0,a.jsx)(E.Z,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:M(e.type)}),(null===(t=e.location)||void 0===t?void 0:t.oldLine)&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Line ",e.location.oldLine]})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),(void 0!==e.oldValue||void 0!==e.newValue)&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs font-mono",children:[void 0!==e.oldValue&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded",children:String(e.oldValue)}),void 0!==e.oldValue&&void 0!==e.newValue&&(0,a.jsx)(U.Z,{className:"w-3 h-3 text-gray-400"}),void 0!==e.newValue&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded",children:String(e.newValue)})]}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-red-600",children:["⚠️ ",e.impact]})]})]},e.id)})]},t)})})]}),d.length>0&&(0,a.jsxs)("div",{className:"border border-yellow-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 border-b border-yellow-200 px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 text-yellow-600"}),(0,a.jsxs)("h3",{className:"font-semibold text-yellow-900",children:[d.length," Warning",1!==d.length?"s":""]})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-yellow-700",children:"These changes should be reviewed but are unlikely to cause immediate issues."})]}),(0,a.jsx)("div",{className:"divide-y divide-yellow-100",children:Array.from(m.entries()).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsx)("div",{className:"px-4 py-2 bg-yellow-25 border-b border-yellow-100",children:(0,a.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:t})}),n.map(e=>(0,a.jsxs)("button",{onClick:()=>null==s?void 0:s(e),className:"w-full px-4 py-3 text-left hover:bg-yellow-50 transition-colors flex items-start gap-3",children:[(0,a.jsx)(E.Z,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:M(e.type)})}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-yellow-600",children:["⚡ ",e.impact]})]})]},e.id))]},t)})})]}),r.length>0&&(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 text-white",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Action Required"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-300",children:["This specification change includes ",r.length," ","breaking change",1!==r.length?"s":"",". Before deploying:"]}),(0,a.jsxs)("ul",{className:"mt-2 text-sm text-gray-300 space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Review migration hints for each breaking change"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Update client applications and dependent services"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Plan data migrations if schema changes are involved"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Update API documentation and notify consumers"]})]})]})]})})]})}function M(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}var D=n(1775),R=n(670),P=n(1905);function F(e){let{oldContent:t,newContent:n,onHintClick:s}=e,[r,d]=(0,i.useState)(new Set),[l,c]=(0,i.useState)(new Set),[m,h]=(0,i.useState)(null),p=(0,i.useMemo)(()=>u(t,n),[t,n]),x=e=>{d(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},g=(e,t)=>{let n="".concat(e,"-").concat(t);c(e=>{let t=new Set(e);return t.has(n)?t.delete(n):t.add(n),t})},f=async(e,t)=>{await navigator.clipboard.writeText(e),h(t),setTimeout(()=>h(null),2e3)},v=e=>{switch(e){case"critical":return"border-red-200 bg-red-50";case"high":return"border-orange-200 bg-orange-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50"}},b=e=>{switch(e){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800"}},N=e=>{let t=e.steps.length;return 0===t?100:Math.round(e.steps.filter(t=>l.has("".concat(e.id,"-").concat(t.order))).length/t*100)};return 0===p.migrationHints.length?(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 text-center bg-gray-50",children:[(0,a.jsx)(o.Z,{className:"w-8 h-8 text-gray-400 mx-auto"}),(0,a.jsx)("h3",{className:"mt-2 font-medium text-gray-900",children:"No migration required"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All changes are backward compatible. No special migration steps needed."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Migration Guide"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",p.migrationHints.length," hint",1!==p.migrationHints.length?"s":"",")"]})]})}),(0,a.jsx)("div",{className:"space-y-3",children:p.migrationHints.map(e=>{let t=r.has(e.id),n=N(e);return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden ".concat(v(e.severity)),children:[(0,a.jsxs)("button",{onClick:()=>{x(e.id),null==s||s(e)},className:"w-full px-4 py-3 flex items-start gap-3 text-left hover:brightness-95 transition-all",children:[t?(0,a.jsx)(S.Z,{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}):(0,a.jsx)(E.Z,{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full ".concat(b(e.severity)),children:e.severity})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),e.steps.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all ".concat(100===n?"bg-green-500":"bg-blue-500"),style:{width:"".concat(n,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:[n,"%"]})]})]})]}),t&&(0,a.jsxs)("div",{className:"px-4 pb-4 pt-0",children:[e.steps.length>0&&(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg bg-white divide-y divide-gray-100",children:e.steps.map(t=>{let n="".concat(e.id,"-").concat(t.order),i=l.has(n);return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3",children:[(0,a.jsx)("button",{onClick:()=>g(e.id,t.order),className:"mt-0.5 flex-shrink-0",children:i?(0,a.jsx)(C.Z,{className:"w-5 h-5 text-green-500"}):(0,a.jsx)(D.Z,{className:"w-5 h-5 text-gray-300"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-medium ".concat(i?"text-gray-400 line-through":"text-gray-900"),children:[t.order,". ",t.title]}),t.required&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-red-100 text-red-700 rounded",children:"Required"})]}),(0,a.jsx)("p",{className:"mt-1 text-sm ".concat(i?"text-gray-400":"text-gray-600"),children:t.description})]})]},t.order)})}),e.codeExample&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Code Example"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"border border-red-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-red-50 px-3 py-1.5 border-b border-red-200 flex items-center justify-between",children:(0,a.jsx)("span",{className:"text-xs font-medium text-red-700",children:"Before"})}),(0,a.jsx)("pre",{className:"p-3 text-xs font-mono bg-white overflow-x-auto",children:e.codeExample.before})]}),(0,a.jsxs)("div",{className:"border border-green-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-green-50 px-3 py-1.5 border-b border-green-200 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-green-700",children:"After"}),(0,a.jsx)("button",{onClick:()=>f(e.codeExample.after,"".concat(e.id,"-code")),className:"text-green-600 hover:text-green-800",children:m==="".concat(e.id,"-code")?(0,a.jsx)(R.Z,{className:"w-3.5 h-3.5"}):(0,a.jsx)(P.Z,{className:"w-3.5 h-3.5"})})]}),(0,a.jsx)("pre",{className:"p-3 text-xs font-mono bg-white overflow-x-auto",children:e.codeExample.after})]})]})]}),e.changeIds.length>0&&(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(L.Z,{className:"w-3.5 h-3.5"}),(0,a.jsxs)("span",{children:["Affects ",e.changeIds.length," change",1!==e.changeIds.length?"s":""]})]})]})]},e.id)})})]})}function O(){let[e,t]=(0,i.useState)('domain Auth {\n  version: "1.0.0"\n  \n  type Email = String {\n    format: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    max_length: 254\n  }\n  \n  entity User {\n    id: UUID [immutable, unique]\n    email: Email [unique, indexed]\n    name: String\n    status: UserStatus\n    created_at: Timestamp [immutable]\n  }\n  \n  enum UserStatus {\n    PENDING\n    ACTIVE\n    SUSPENDED\n  }\n  \n  behavior Login {\n    input {\n      email: Email\n      password: String [sensitive]\n    }\n    \n    output {\n      success: Session\n      errors {\n        INVALID_CREDENTIALS { }\n        ACCOUNT_LOCKED { }\n      }\n    }\n    \n    preconditions {\n      input.email.is_valid\n    }\n  }\n}'),[n,h]=(0,i.useState)('domain Auth {\n  version: "2.0.0"\n  \n  type Email = String {\n    format: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    max_length: 320\n  }\n  \n  entity User {\n    id: UUID [immutable, unique]\n    email: Email [unique, indexed]\n    display_name: String\n    status: UserStatus\n    created_at: Timestamp [immutable]\n    last_login: Timestamp?\n    mfa_enabled: Boolean\n  }\n  \n  enum UserStatus {\n    PENDING\n    ACTIVE\n    SUSPENDED\n    DELETED\n  }\n  \n  behavior Login {\n    input {\n      email: Email\n      password: String [sensitive]\n      mfa_code: String?\n    }\n    \n    output {\n      success: Session\n      errors {\n        INVALID_CREDENTIALS { }\n        ACCOUNT_LOCKED { }\n        MFA_REQUIRED { }\n      }\n    }\n    \n    preconditions {\n      input.email.is_valid\n      input.password.length >= 8\n    }\n    \n    security {\n      rate_limit 10/minute per input.email\n    }\n  }\n}'),[p,x]=(0,i.useState)("side-by-side"),[g,b]=(0,i.useState)("diff"),[y,N]=(0,i.useState)(null),[w,j]=(0,i.useState)(!1),_=(0,i.useMemo)(()=>u(e,n),[e,n]),k=(e,n)=>{var a;let i=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!i)return;let s=new FileReader;s.onload=e=>{var a;let i=null===(a=e.target)||void 0===a?void 0:a.result;"old"===n?t(i):h(i)},s.readAsText(i)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ISL Diff Viewer"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:"v1.0.0"}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-blue-700",children:"v2.0.0"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["+",_.additions]}),(0,a.jsxs)("span",{className:"text-red-600",children:["−",_.deletions]}),_.breakingChanges>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full font-medium",children:[_.breakingChanges," breaking"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border-l border-gray-200 pl-4",children:[(0,a.jsxs)("label",{className:"cursor-pointer px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded transition-colors flex items-center gap-1",children:[(0,a.jsx)(s.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Upload"}),(0,a.jsx)("input",{type:"file",accept:".isl,.txt",className:"hidden",onChange:e=>k(e,"old")})]}),(0,a.jsxs)("button",{onClick:()=>{let e={timestamp:new Date().toISOString(),summary:{totalChanges:_.totalChanges,breakingChanges:_.breakingChanges,warnings:_.warnings},changes:_.semanticChanges,migrationHints:_.migrationHints},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="isl-diff-report.json",a.click(),URL.revokeObjectURL(n)},className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded transition-colors flex items-center gap-1",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Export"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mt-4 border-b border-gray-200 -mb-px",children:[(0,a.jsx)("button",{onClick:()=>b("diff"),className:"pb-3 px-1 text-sm font-medium transition-colors ".concat("diff"===g?"tab-active":"tab-inactive"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Diff View"]})}),(0,a.jsx)("button",{onClick:()=>b("breaking"),className:"pb-3 px-1 text-sm font-medium transition-colors ".concat("breaking"===g?"tab-active":"tab-inactive"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),"Breaking Changes",_.breakingChanges>0&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:_.breakingChanges})]})}),(0,a.jsx)("button",{onClick:()=>b("migration"),className:"pb-3 px-1 text-sm font-medium transition-colors ".concat("migration"===g?"tab-active":"tab-inactive"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Migration Guide",_.migrationHints.length>0&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:_.migrationHints.length})]})})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:["diff"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-lg p-1",children:[(0,a.jsxs)("button",{onClick:()=>x("side-by-side"),className:"px-3 py-1.5 text-sm font-medium rounded transition-colors flex items-center gap-2 ".concat("side-by-side"===p?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Side by Side"]}),(0,a.jsxs)("button",{onClick:()=>x("unified"),className:"px-3 py-1.5 text-sm font-medium rounded transition-colors flex items-center gap-2 ".concat("unified"===p?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Unified"]}),(0,a.jsxs)("button",{onClick:()=>x("semantic"),className:"px-3 py-1.5 text-sm font-medium rounded transition-colors flex items-center gap-2 ".concat("semantic"===p?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Semantic"]})]}),"semantic"===p&&(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:w,onChange:e=>j(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Show breaking only"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:["side-by-side"===p&&(0,a.jsx)(f,{oldContent:e,newContent:n,oldVersion:"v1.0.0",newVersion:"v2.0.0"}),"unified"===p&&(0,a.jsx)(v,{oldContent:e,newContent:n,oldVersion:"v1.0.0",newVersion:"v2.0.0"}),"semantic"===p&&(0,a.jsx)(I,{oldContent:e,newContent:n,onChangeSelect:N,selectedChangeId:null==y?void 0:y.id,showOnlyBreaking:w})]})]}),"breaking"===g&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsx)(T,{oldContent:e,newContent:n,onChangeClick:e=>{N(e),b("diff"),x("semantic")}})}),"migration"===g&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsx)(F,{oldContent:e,newContent:n})})]}),(0,a.jsx)("footer",{className:"border-t border-gray-200 bg-white mt-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsx)("span",{children:"ISL Diff Viewer v0.1.0"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{children:[_.totalChanges," total changes"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-green-600",children:["+",_.additions," additions"]}),(0,a.jsxs)("span",{className:"text-red-600",children:["−",_.deletions," deletions"]})]})]})})})]})}}},function(e){e.O(0,[338,852,999,744],function(){return e(e.s=3394)}),_N_E=e.O()}]);