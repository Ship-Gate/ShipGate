"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1683:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>_,patchFetch:()=>R,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>k,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>w});var a={};t.r(a),t.d(a,{DELETE:()=>m,GET:()=>d,PUT:()=>l});var n=t(2453),o=t(4421),s=t(7337),i=t(2626),u=t(3819),c=t(9664),p=t(6481);async function d(e,{params:r}){try{let{id:e}=await r,t=await (0,u.gk)(e);if(!t)return i.Z.json({error:"Not found"},{status:404});return i.Z.json(t)}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}async function l(e,{params:r}){try{(0,p.R)(e);let{id:t}=await r,a=await e.json(),n=c.n_.safeParse(a);if(!n.success)return i.Z.json({error:n.error.flatten()},{status:400});let o=await (0,u.nM)(t,n.data);return i.Z.json(o)}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}async function m(e,{params:r}){try{(0,p.R)(e);let{id:t}=await r;return await (0,u.Ir)(t),i.Z.json({success:!0})}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\mevla\\OneDrive\\Desktop\\projects\\IntentOS\\packages\\crud-template-examples\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:k,headerHooks:v,staticGenerationBailout:w}=f,_="/api/products/[id]/route";function R(){return(0,s.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:y})}},6481:(e,r,t)=>{t.d(r,{R:()=>a});function a(e){return"user-id-placeholder"}},3762:(e,r,t)=>{t.d(r,{_:()=>n});let a=require("@prisma/client"),n=globalThis.prisma??new a.PrismaClient},3819:(e,r,t)=>{t.d(r,{Ir:()=>c,gk:()=>s,nM:()=>u,ry:()=>i,tr:()=>o});var a=t(3762);let n={};async function o(e){let{page:r,limit:t,sortBy:o,sortOrder:s}=e,i={...n};e.search&&e.search.trim()&&(i.OR=[{name:{contains:e.search,mode:"insensitive"}},{sku:{contains:e.search,mode:"insensitive"}}]),e.price&&(i.price=e.price);let[u,c]=await Promise.all([a._.product.findMany({where:i,skip:(r-1)*t,take:t,orderBy:{[e.sortBy]:e.sortOrder}}),a._.product.count({where:i})]);return{items:u,total:c,page:r,limit:t,totalPages:Math.ceil(c/t)}}async function s(e){return await a._.product.findFirst({where:{...n,id:e}})||null}async function i(e){return a._.product.create({data:e})}async function u(e,r){return a._.product.update({where:{id:e},data:r})}async function c(e){return await a._.product.delete({where:{id:e}})}},9664:(e,r,t)=>{t.d(r,{Wh:()=>s,n_:()=>o,td:()=>n});var a=t(3950);let n=a.Ry({name:a.Z_(),sku:a.Z_(),price:a.Rx(),stock:a.Rx().int()}),o=a.Ry({name:a.Z_().optional(),sku:a.Z_().optional(),price:a.Rx().optional(),stock:a.Rx().int().optional()}).partial(),s=a.Ry({page:a.oQ.number().int().min(1).default(1),limit:a.oQ.number().int().min(1).max(100).default(20),sortBy:a.Km(["name","sku","price","stock"]).default("name"),sortOrder:a.Km(["asc","desc"]).default("asc"),search:a.Z_().optional(),price:a.Z_().optional()})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[230,273],()=>t(1683));module.exports=a})();