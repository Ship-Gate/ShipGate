"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1333:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>_,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>k});var a={};r.r(a),r.d(a,{GET:()=>d,POST:()=>l});var n=r(2534),o=r(9409),s=r(6717),i=r(7445),u=r(1275),c=r(219),p=r(6559);async function d(e){try{let{searchParams:t}=new URL(e.url),r=c.Wh.parse({page:t.get("page")??1,limit:t.get("limit")??20,sortBy:t.get("sortBy")??"id",sortOrder:t.get("sortOrder")??"asc",...Object.fromEntries(t.entries())}),a=await (0,u.tr)(r);return i.Z.json(a)}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}async function l(e){try{(0,p.R)(e);let t=await e.json(),r=c.td.safeParse(t);if(!r.success)return i.Z.json({error:r.error.flatten()},{status:400});let a=await (0,u.ry)(r.data);return i.Z.json(a,{status:201})}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/Users/liquidgroove/Desktop/ShipGate-main/packages/crud-template-examples/src/app/api/products/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:y,headerHooks:g,staticGenerationBailout:k}=m,v="/api/products/route";function _(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}},6559:(e,t,r)=>{r.d(t,{R:()=>a});function a(e){return"user-id-placeholder"}},4625:(e,t,r)=>{r.d(t,{_:()=>n});let a=require("@prisma/client"),n=globalThis.prisma??new a.PrismaClient},1275:(e,t,r)=>{r.d(t,{Ir:()=>c,gk:()=>s,nM:()=>u,ry:()=>i,tr:()=>o});var a=r(4625);let n={};async function o(e){let{page:t,limit:r,sortBy:o,sortOrder:s}=e,i={...n};e.search&&e.search.trim()&&(i.OR=[{name:{contains:e.search,mode:"insensitive"}},{sku:{contains:e.search,mode:"insensitive"}}]),e.price&&(i.price=e.price);let[u,c]=await Promise.all([a._.product.findMany({where:i,skip:(t-1)*r,take:r,orderBy:{[e.sortBy]:e.sortOrder}}),a._.product.count({where:i})]);return{items:u,total:c,page:t,limit:r,totalPages:Math.ceil(c/r)}}async function s(e){return await a._.product.findFirst({where:{...n,id:e}})||null}async function i(e){return a._.product.create({data:e})}async function u(e,t){return a._.product.update({where:{id:e},data:t})}async function c(e){return await a._.product.delete({where:{id:e}})}},219:(e,t,r)=>{r.d(t,{Wh:()=>s,n_:()=>o,td:()=>n});var a=r(1573);let n=a.Ry({name:a.Z_(),sku:a.Z_(),price:a.Rx(),stock:a.Rx().int()}),o=a.Ry({name:a.Z_().optional(),sku:a.Z_().optional(),price:a.Rx().optional(),stock:a.Rx().int().optional()}).partial(),s=a.Ry({page:a.oQ.number().int().min(1).default(1),limit:a.oQ.number().int().min(1).max(100).default(20),sortBy:a.Km(["name","sku","price","stock"]).default("name"),sortOrder:a.Km(["asc","desc"]).default("asc"),search:a.Z_().optional(),price:a.Z_().optional()})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[150,431],()=>r(1333));module.exports=a})();