"use strict";(()=>{var e={};e.id=316,e.ids=[316],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7764:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>w,originalPathname:()=>_,patchFetch:()=>g,requestAsyncStorage:()=>f,routeModule:()=>v,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>Z});var a={};r.r(a),r.d(a,{DELETE:()=>p,GET:()=>d,PUT:()=>m});var n=r(2534),i=r(9409),o=r(6717),s=r(7445),u=r(3883),c=r(5847),l=r(6559);async function d(e,{params:t}){try{let{id:e}=await t,r=await (0,u.m5)(e);if(!r)return s.Z.json({error:"Not found"},{status:404});return s.Z.json(r)}catch(e){return s.Z.json({error:"Internal Server Error"},{status:500})}}async function m(e,{params:t}){try{(0,l.R)(e);let{id:r}=await t,a=await e.json(),n=c.aS.safeParse(a);if(!n.success)return s.Z.json({error:n.error.flatten()},{status:400});let i=await (0,u.aL)(r,n.data);return s.Z.json(i)}catch(e){return s.Z.json({error:"Internal Server Error"},{status:500})}}async function p(e,{params:t}){try{(0,l.R)(e);let{id:r}=await t;return await (0,u.Wu)(r),s.Z.json({success:!0})}catch(e){return s.Z.json({error:"Internal Server Error"},{status:500})}}let v=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/invoices/[id]/route",pathname:"/api/invoices/[id]",filename:"route",bundlePath:"app/api/invoices/[id]/route"},resolvedPagePath:"/Users/liquidgroove/Desktop/ShipGate-main/packages/crud-template-examples/src/app/api/invoices/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:y,headerHooks:w,staticGenerationBailout:Z}=v,_="/api/invoices/[id]/route";function g(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}},6559:(e,t,r)=>{r.d(t,{R:()=>a});function a(e){return"user-id-placeholder"}},4625:(e,t,r)=>{r.d(t,{_:()=>n});let a=require("@prisma/client"),n=globalThis.prisma??new a.PrismaClient},3883:(e,t,r)=>{r.d(t,{Wu:()=>c,Z$:()=>s,aL:()=>u,gc:()=>i,m5:()=>o});var a=r(4625);let n={deletedAt:null};async function i(e){let{page:t,limit:r,sortBy:i,sortOrder:o}=e,s={...n};e.search&&e.search.trim()&&(s.OR=[{invoiceNumber:{contains:e.search,mode:"insensitive"}},{customerName:{contains:e.search,mode:"insensitive"}}]),e.status&&(s.status=e.status);let[u,c]=await Promise.all([a._.invoice.findMany({where:s,skip:(t-1)*r,take:r,orderBy:{[e.sortBy]:e.sortOrder}}),a._.invoice.count({where:s})]);return{items:u,total:c,page:t,limit:r,totalPages:Math.ceil(c/r)}}async function o(e){return await a._.invoice.findFirst({where:{...n,id:e}})||null}async function s(e){return a._.invoice.create({data:e})}async function u(e,t){return a._.invoice.update({where:{id:e},data:t})}async function c(e){return await a._.invoice.update({where:{id:e},data:{deletedAt:new Date}})}},5847:(e,t,r)=>{r.d(t,{XY:()=>n,aS:()=>i,gV:()=>o});var a=r(1573);let n=a.Ry({invoiceNumber:a.Z_(),customerName:a.Z_(),amount:a.Rx(),status:a.Z_()}),i=a.Ry({invoiceNumber:a.Z_().optional(),customerName:a.Z_().optional(),amount:a.Rx().optional(),status:a.Z_().optional()}).partial(),o=a.Ry({page:a.oQ.number().int().min(1).default(1),limit:a.oQ.number().int().min(1).max(100).default(20),sortBy:a.Km(["invoiceNumber","amount","status"]).default("invoiceNumber"),sortOrder:a.Km(["asc","desc"]).default("asc"),search:a.Z_().optional(),status:a.Z_().optional()})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[150,431],()=>r(7764));module.exports=a})();