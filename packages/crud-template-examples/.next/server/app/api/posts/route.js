"use strict";(()=>{var e={};e.id=990,e.ids=[990],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9578:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>v,patchFetch:()=>b,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>g});var a={};r.r(a),r.d(a,{GET:()=>p,POST:()=>c});var s=r(2453),n=r(4421),o=r(7337),i=r(2626),u=r(948),l=r(8298);async function p(e){try{let{searchParams:t}=new URL(e.url),r=l.EV.parse({page:t.get("page")??1,limit:t.get("limit")??20,sortBy:t.get("sortBy")??"id",sortOrder:t.get("sortOrder")??"asc",...Object.fromEntries(t.entries())}),a=await (0,u.aA)(r);return i.Z.json(a)}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}async function c(e){try{let t=await e.json(),r=l.zk.safeParse(t);if(!r.success)return i.Z.json({error:r.error.flatten()},{status:400});let a=await (0,u.qb)(r.data);return i.Z.json(a,{status:201})}catch(e){return i.Z.json({error:"Internal Server Error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/posts/route",pathname:"/api/posts",filename:"route",bundlePath:"app/api/posts/route"},resolvedPagePath:"C:\\Users\\mevla\\OneDrive\\Desktop\\projects\\IntentOS\\packages\\crud-template-examples\\src\\app\\api\\posts\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f,headerHooks:y,staticGenerationBailout:g}=d,v="/api/posts/route";function b(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},3762:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient},948:(e,t,r)=>{r.d(t,{CP:()=>u,aA:()=>n,fR:()=>l,qb:()=>i,u_:()=>o});var a=r(3762);let s={};async function n(e){let{page:t,limit:r,sortBy:n,sortOrder:o}=e,i={...s};e.search&&e.search.trim()&&(i.OR=[{title:{contains:e.search,mode:"insensitive"}},{content:{contains:e.search,mode:"insensitive"}}]),e.published&&(i.published=e.published);let[u,l]=await Promise.all([a._.post.findMany({where:i,skip:(t-1)*r,take:r,orderBy:{[e.sortBy]:e.sortOrder}}),a._.post.count({where:i})]);return{items:u,total:l,page:t,limit:r,totalPages:Math.ceil(l/r)}}async function o(e){return await a._.post.findFirst({where:{...s,id:e}})||null}async function i(e){return a._.post.create({data:e})}async function u(e,t){return a._.post.update({where:{id:e},data:t})}async function l(e){return await a._.post.delete({where:{id:e}})}},8298:(e,t,r)=>{r.d(t,{EV:()=>o,rw:()=>n,zk:()=>s});var a=r(3950);let s=a.Ry({title:a.Z_(),content:a.Z_().optional(),published:a.O7()}),n=a.Ry({title:a.Z_().optional(),content:a.Z_().optional(),published:a.O7().optional()}).partial(),o=a.Ry({page:a.oQ.number().int().min(1).default(1),limit:a.oQ.number().int().min(1).max(100).default(20),sortBy:a.Km(["title","published"]).default("title"),sortOrder:a.Km(["asc","desc"]).default("asc"),search:a.Z_().optional(),published:a.Z_().optional()})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[230,273],()=>r(9578));module.exports=a})();