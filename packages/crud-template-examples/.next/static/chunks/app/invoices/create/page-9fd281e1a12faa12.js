(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101,55],{2934:function(e,n,t){Promise.resolve().then(t.bind(t,9169))},9169:function(e,n,t){"use strict";t.r(n),t.d(n,{InvoiceForm:function(){return v}});var r=t(782),o=t(8223),i=t(233),a=t(888),u=t(8541),l=t(8219),s=t(2831),c=t(5033);let d=c.Ry({invoiceNumber:c.Z_(),customerName:c.Z_(),amount:c.Rx(),status:c.Z_()}),f=c.Ry({invoiceNumber:c.Z_().optional(),customerName:c.Z_().optional(),amount:c.Rx().optional(),status:c.Z_().optional()}).partial();c.Ry({page:c.oQ.number().int().min(1).default(1),limit:c.oQ.number().int().min(1).max(100).default(20),sortBy:c.Km(["invoiceNumber","amount","status"]).default("invoiceNumber"),sortOrder:c.Km(["asc","desc"]).default("asc"),search:c.Z_().optional(),status:c.Z_().optional()});var m=t(413);function v(e){var n,t,c,v;let{invoice:h,mode:b}=e,x=(0,a.useRouter)(),g=(0,m.lQ)(),y=(0,m.dZ)(),p=(0,o.cI)({resolver:(0,i.F)("create"===b?d:f),defaultValues:h?{invoiceNumber:null!==(n=null==h?void 0:h.invoiceNumber)&&void 0!==n?n:"",customerName:null!==(t=null==h?void 0:h.customerName)&&void 0!==t?t:"",amount:null!==(c=null==h?void 0:h.amount)&&void 0!==c?c:0,status:null!==(v=null==h?void 0:h.status)&&void 0!==v?v:""}:{invoiceNumber:"",customerName:"",amount:0,status:""}}),j=async e=>{try{"create"===b?(await g.mutateAsync(e),x.push("/invoices")):h&&(await y.mutateAsync({id:h.id,data:e}),x.push("/invoices/".concat(h.id)))}catch(e){}},N=g.isPending||y.isPending;return(0,r.jsxs)(u.l0,{form:p,onSubmit:j,className:"space-y-6 max-w-md",children:[(0,r.jsx)(u.Wi,{control:p.control,name:"invoiceNumber",render:e=>{var n,t;let{field:o,fieldState:i}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.lX,{children:"Invoice Number"}),(0,r.jsx)(u.NI,{children:(0,r.jsx)(s.I,{value:String(null!==(t=o.value)&&void 0!==t?t:""),onChange:o.onChange,onBlur:o.onBlur})}),(0,r.jsx)(u.zG,{children:null===(n=i.error)||void 0===n?void 0:n.message})]})}}),(0,r.jsx)(u.Wi,{control:p.control,name:"customerName",render:e=>{var n,t;let{field:o,fieldState:i}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.lX,{children:"Customer Name"}),(0,r.jsx)(u.NI,{children:(0,r.jsx)(s.I,{value:String(null!==(t=o.value)&&void 0!==t?t:""),onChange:o.onChange,onBlur:o.onBlur})}),(0,r.jsx)(u.zG,{children:null===(n=i.error)||void 0===n?void 0:n.message})]})}}),(0,r.jsx)(u.Wi,{control:p.control,name:"amount",render:e=>{var n;let{field:t,fieldState:o}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.lX,{children:"Amount"}),(0,r.jsx)(u.NI,{children:(0,r.jsx)(s.I,{type:"number",value:"number"==typeof t.value?t.value:void 0===t.value||null===t.value?"":Number(t.value),onChange:t.onChange,onBlur:t.onBlur})}),(0,r.jsx)(u.zG,{children:null===(n=o.error)||void 0===n?void 0:n.message})]})}}),(0,r.jsx)(u.Wi,{control:p.control,name:"status",render:e=>{var n,t;let{field:o,fieldState:i}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.lX,{children:"Status"}),(0,r.jsx)(u.NI,{children:(0,r.jsx)(s.I,{value:String(null!==(t=o.value)&&void 0!==t?t:""),onChange:o.onChange,onBlur:o.onBlur})}),(0,r.jsx)(u.zG,{children:null===(n=i.error)||void 0===n?void 0:n.message})]})}}),(0,r.jsx)(l.z,{type:"submit",disabled:N,children:N?"Saving...":"create"===b?"Create":"Update"})]})}},8219:function(e,n,t){"use strict";t.d(n,{z:function(){return s}});var r=t(782),o=t(618),i=t(4299),a=t(4161),u=t(9971);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),s=o.forwardRef((e,n)=>{let{className:t,variant:o,size:a,asChild:s=!1,...c}=e,d=s?i.g7:"button";return(0,r.jsx)(d,{className:(0,u.cn)(l({variant:o,size:a,className:t})),ref:n,...c})});s.displayName="Button"},8541:function(e,n,t){"use strict";t.d(n,{NI:function(){return d},Wi:function(){return l},l0:function(){return u},lX:function(){return c},xJ:function(){return s},zG:function(){return f}});var r=t(782),o=t(618),i=t(8223),a=t(9971);let u=Object.assign(function(e){let{form:n,className:t,children:o,onSubmit:u,...l}=e;return(0,r.jsx)(i.RV,{...n,children:(0,r.jsx)("form",{onSubmit:u?n.handleSubmit(u):void 0,className:(0,a.cn)(t),...l,children:o})})},{displayName:"Form"});function l(e){let{control:n,name:t,render:o}=e;return(0,r.jsx)(i.Qr,{control:n,name:t,render:e=>{let{field:n,fieldState:t}=e;return o({field:n,fieldState:t})}})}let s=o.forwardRef((e,n)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:n,className:(0,a.cn)("space-y-2",t),...o})});s.displayName="FormItem";let c=o.forwardRef((e,n)=>{let{className:t,...o}=e;return(0,r.jsx)("label",{ref:n,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...o})});c.displayName="FormLabel";let d=o.forwardRef((e,n)=>{let{className:t,...o}=e;return(0,r.jsx)("div",{ref:n,className:(0,a.cn)(t),...o})});d.displayName="FormControl";let f=o.forwardRef((e,n)=>{let{className:t,children:o,...i}=e;return(0,r.jsx)("p",{ref:n,className:(0,a.cn)("text-sm font-medium text-destructive",t),...i,children:o})});f.displayName="FormMessage"},2831:function(e,n,t){"use strict";t.d(n,{I:function(){return a}});var r=t(782),o=t(618),i=t(9971);let a=o.forwardRef((e,n)=>{let{className:t,type:o,...a}=e;return(0,r.jsx)("input",{type:o,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...a})});a.displayName="Input"},413:function(e,n,t){"use strict";t.d(n,{lQ:function(){return h},sJ:function(){return x},h8:function(){return v},rR:function(){return m},dZ:function(){return b}});var r=t(735),o=t(5667),i=t(8731);let a="/api/invoices";async function u(e){let n=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[t,r]=e;void 0!==r&&""!==r&&n.set(t,String(r))});let t=n.toString()?"".concat(a,"?").concat(n):a,r=await fetch(t);if(!r.ok)throw Error("Failed to fetch");return r.json()}async function l(e){let n=await fetch("".concat(a,"/").concat(e));if(404===n.status)return null;if(!n.ok)throw Error("Failed to fetch");return n.json()}async function s(e){let n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw Error("Failed to create");return n.json()}async function c(e,n){let t=await fetch("".concat(a,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw Error("Failed to update");return t.json()}async function d(e){if(!(await fetch("".concat(a,"/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete")}let f={all:["invoices"],lists:()=>[...f.all,"list"],list:e=>[...f.lists(),e],details:()=>[...f.all,"detail"],detail:e=>[...f.details(),e]};function m(e,n){return(0,r.a)({queryKey:f.list(e),queryFn:()=>u(e),...n})}function v(e,n){return(0,r.a)({queryKey:f.detail(null!=e?e:""),queryFn:()=>e?l(e):Promise.resolve(null),enabled:!!e,...n})}function h(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:s,onSuccess:()=>{n.invalidateQueries({queryKey:f.lists()})},...e})}function b(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:e=>{let{id:n,data:t}=e;return c(n,t)},onSuccess:(e,t)=>{let{id:r}=t;n.invalidateQueries({queryKey:f.detail(r)}),n.invalidateQueries({queryKey:f.lists()})},...e})}function x(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:d,onSuccess:()=>{n.invalidateQueries({queryKey:f.lists()})},...e})}},9971:function(e,n,t){"use strict";t.d(n,{cn:function(){return i}});var r=t(7204),o=t(626);function i(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,o.m6)((0,r.W)(n))}}},function(e){e.O(0,[430,683,302,789,166,744],function(){return e(e.s=2934)}),_N_E=e.O()}]);