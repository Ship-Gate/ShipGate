(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762,282],{8817:function(e,n,r){Promise.resolve().then(r.bind(r,2794))},2794:function(e,n,r){"use strict";r.r(n),r.d(n,{ProductForm:function(){return v}});var t=r(782),o=r(8223),i=r(233),l=r(888),a=r(8541),u=r(8219),s=r(2831),c=r(5033);let d=c.Ry({name:c.Z_(),sku:c.Z_(),price:c.Rx(),stock:c.Rx().int()}),f=c.Ry({name:c.Z_().optional(),sku:c.Z_().optional(),price:c.Rx().optional(),stock:c.Rx().int().optional()}).partial();c.Ry({page:c.oQ.number().int().min(1).default(1),limit:c.oQ.number().int().min(1).max(100).default(20),sortBy:c.Km(["name","sku","price","stock"]).default("name"),sortOrder:c.Km(["asc","desc"]).default("asc"),search:c.Z_().optional(),price:c.Z_().optional()});var m=r(3590);function v(e){var n,r,c,v;let{product:h,mode:p}=e,x=(0,l.useRouter)(),y=(0,m.gl)(),g=(0,m.vO)(),b=(0,o.cI)({resolver:(0,i.F)("create"===p?d:f),defaultValues:h?{name:null!==(n=null==h?void 0:h.name)&&void 0!==n?n:"",sku:null!==(r=null==h?void 0:h.sku)&&void 0!==r?r:"",price:null!==(c=null==h?void 0:h.price)&&void 0!==c?c:0,stock:null!==(v=null==h?void 0:h.stock)&&void 0!==v?v:0}:{name:"",sku:"",price:0,stock:0}}),j=async e=>{try{"create"===p?(await y.mutateAsync(e),x.push("/products")):h&&(await g.mutateAsync({id:h.id,data:e}),x.push("/products/".concat(h.id)))}catch(e){}},N=y.isPending||g.isPending;return(0,t.jsxs)(a.l0,{form:b,onSubmit:j,className:"space-y-6 max-w-md",children:[(0,t.jsx)(a.Wi,{control:b.control,name:"name",render:e=>{var n,r;let{field:o,fieldState:i}=e;return(0,t.jsxs)(a.xJ,{children:[(0,t.jsx)(a.lX,{children:"Name"}),(0,t.jsx)(a.NI,{children:(0,t.jsx)(s.I,{value:String(null!==(r=o.value)&&void 0!==r?r:""),onChange:o.onChange,onBlur:o.onBlur})}),(0,t.jsx)(a.zG,{children:null===(n=i.error)||void 0===n?void 0:n.message})]})}}),(0,t.jsx)(a.Wi,{control:b.control,name:"sku",render:e=>{var n,r;let{field:o,fieldState:i}=e;return(0,t.jsxs)(a.xJ,{children:[(0,t.jsx)(a.lX,{children:"Sku"}),(0,t.jsx)(a.NI,{children:(0,t.jsx)(s.I,{value:String(null!==(r=o.value)&&void 0!==r?r:""),onChange:o.onChange,onBlur:o.onBlur})}),(0,t.jsx)(a.zG,{children:null===(n=i.error)||void 0===n?void 0:n.message})]})}}),(0,t.jsx)(a.Wi,{control:b.control,name:"price",render:e=>{var n;let{field:r,fieldState:o}=e;return(0,t.jsxs)(a.xJ,{children:[(0,t.jsx)(a.lX,{children:"Price"}),(0,t.jsx)(a.NI,{children:(0,t.jsx)(s.I,{type:"number",value:"number"==typeof r.value?r.value:void 0===r.value||null===r.value?"":Number(r.value),onChange:r.onChange,onBlur:r.onBlur})}),(0,t.jsx)(a.zG,{children:null===(n=o.error)||void 0===n?void 0:n.message})]})}}),(0,t.jsx)(a.Wi,{control:b.control,name:"stock",render:e=>{var n;let{field:r,fieldState:o}=e;return(0,t.jsxs)(a.xJ,{children:[(0,t.jsx)(a.lX,{children:"Stock"}),(0,t.jsx)(a.NI,{children:(0,t.jsx)(s.I,{type:"number",value:"number"==typeof r.value?r.value:void 0===r.value||null===r.value?"":Number(r.value),onChange:r.onChange,onBlur:r.onBlur})}),(0,t.jsx)(a.zG,{children:null===(n=o.error)||void 0===n?void 0:n.message})]})}}),(0,t.jsx)(u.z,{type:"submit",disabled:N,children:N?"Saving...":"create"===p?"Create":"Update"})]})}},8219:function(e,n,r){"use strict";r.d(n,{z:function(){return s}});var t=r(782),o=r(618),i=r(4299),l=r(4161),a=r(9971);let u=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),s=o.forwardRef((e,n)=>{let{className:r,variant:o,size:l,asChild:s=!1,...c}=e,d=s?i.g7:"button";return(0,t.jsx)(d,{className:(0,a.cn)(u({variant:o,size:l,className:r})),ref:n,...c})});s.displayName="Button"},8541:function(e,n,r){"use strict";r.d(n,{NI:function(){return d},Wi:function(){return u},l0:function(){return a},lX:function(){return c},xJ:function(){return s},zG:function(){return f}});var t=r(782),o=r(618),i=r(8223),l=r(9971);let a=Object.assign(function(e){let{form:n,className:r,children:o,onSubmit:a,...u}=e;return(0,t.jsx)(i.RV,{...n,children:(0,t.jsx)("form",{onSubmit:a?n.handleSubmit(a):void 0,className:(0,l.cn)(r),...u,children:o})})},{displayName:"Form"});function u(e){let{control:n,name:r,render:o}=e;return(0,t.jsx)(i.Qr,{control:n,name:r,render:e=>{let{field:n,fieldState:r}=e;return o({field:n,fieldState:r})}})}let s=o.forwardRef((e,n)=>{let{className:r,...o}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)("space-y-2",r),...o})});s.displayName="FormItem";let c=o.forwardRef((e,n)=>{let{className:r,...o}=e;return(0,t.jsx)("label",{ref:n,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...o})});c.displayName="FormLabel";let d=o.forwardRef((e,n)=>{let{className:r,...o}=e;return(0,t.jsx)("div",{ref:n,className:(0,l.cn)(r),...o})});d.displayName="FormControl";let f=o.forwardRef((e,n)=>{let{className:r,children:o,...i}=e;return(0,t.jsx)("p",{ref:n,className:(0,l.cn)("text-sm font-medium text-destructive",r),...i,children:o})});f.displayName="FormMessage"},2831:function(e,n,r){"use strict";r.d(n,{I:function(){return l}});var t=r(782),o=r(618),i=r(9971);let l=o.forwardRef((e,n)=>{let{className:r,type:o,...l}=e;return(0,t.jsx)("input",{type:o,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:n,...l})});l.displayName="Input"},3590:function(e,n,r){"use strict";r.d(n,{gl:function(){return h},HF:function(){return x},iB:function(){return v},uU:function(){return m},vO:function(){return p}});var t=r(735),o=r(5667),i=r(8731);let l="/api/products";async function a(e){let n=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,t]=e;void 0!==t&&""!==t&&n.set(r,String(t))});let r=n.toString()?"".concat(l,"?").concat(n):l,t=await fetch(r);if(!t.ok)throw Error("Failed to fetch");return t.json()}async function u(e){let n=await fetch("".concat(l,"/").concat(e));if(404===n.status)return null;if(!n.ok)throw Error("Failed to fetch");return n.json()}async function s(e){let n=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw Error("Failed to create");return n.json()}async function c(e,n){let r=await fetch("".concat(l,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw Error("Failed to update");return r.json()}async function d(e){if(!(await fetch("".concat(l,"/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete")}let f={all:["products"],lists:()=>[...f.all,"list"],list:e=>[...f.lists(),e],details:()=>[...f.all,"detail"],detail:e=>[...f.details(),e]};function m(e,n){return(0,t.a)({queryKey:f.list(e),queryFn:()=>a(e),...n})}function v(e,n){return(0,t.a)({queryKey:f.detail(null!=e?e:""),queryFn:()=>e?u(e):Promise.resolve(null),enabled:!!e,...n})}function h(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:s,onSuccess:()=>{n.invalidateQueries({queryKey:f.lists()})},...e})}function p(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:e=>{let{id:n,data:r}=e;return c(n,r)},onSuccess:(e,r)=>{let{id:t}=r;n.invalidateQueries({queryKey:f.detail(t)}),n.invalidateQueries({queryKey:f.lists()})},...e})}function x(e){let n=(0,o.NL)();return(0,i.D)({mutationFn:d,onSuccess:()=>{n.invalidateQueries({queryKey:f.lists()})},...e})}},9971:function(e,n,r){"use strict";r.d(n,{cn:function(){return i}});var t=r(7204),o=r(626);function i(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,o.m6)((0,t.W)(n))}}},function(e){e.O(0,[430,683,302,789,166,744],function(){return e(e.s=8817)}),_N_E=e.O()}]);