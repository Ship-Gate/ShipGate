(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{52641:function(e,t,r){Promise.resolve().then(r.bind(r,51520))},64831:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(40618),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{color:l="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...f}=r;return(0,n.createElement)("svg",{ref:s,...a,width:i,height:i,stroke:l,strokeWidth:u?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(o(e)),d].join(" "),...f},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},30888:function(e,t,r){"use strict";var n=r(90861);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},37269:function(e){"use strict";var t,r,n,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var i=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?i=n.concat(i):u=-1,i.length&&m())}function m(){if(!c){var e=l(d);c=!0;for(var t=i.length;t;){for(n=i,i=[];++u<t;)n&&n[u].run();u=-1,t=i.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new f(e,t)),1!==i.length||c||l(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},51520:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(80782),a=r(40618),o=r(30888),s=r(47492),l=r(73458),i=r(72831);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r(64831).Z)("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);function u(){var e;let t=(0,o.useRouter)(),{ingest:r,loading:u,error:d}=(0,s.cy)(),[m,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[b,x]=(0,a.useState)(""),[v,g]=(0,a.useState)("main"),[j,y]=(0,a.useState)(""),w=(0,a.useCallback)(async e=>{if(p(null),!e||"object"!=typeof e||!("schemaVersion"in e)||"1.0.0"!==e.schemaVersion){p('Invalid proof bundle: must have schemaVersion "1.0.0"');return}try{let n=await r({proofBundle:e,repo:b||"unknown",branch:v||"main",commit:j||"unknown",triggeredBy:"manual"});t.push("/runs/".concat(n.id))}catch(e){}},[r,b,v,j,t]),N=(0,a.useCallback)(e=>{let t=new FileReader;t.onload=()=>{try{let e=JSON.parse(t.result);w(e)}catch(e){p("Invalid JSON file")}},t.onerror=()=>p("Failed to read file"),t.readAsText(e)},[w]),k=(0,a.useCallback)(e=>{e.preventDefault(),f(!1);let t=e.dataTransfer.files[0];t&&N(t)},[N]),T=(0,a.useCallback)(e=>{e.preventDefault(),f(!0)},[]),C=(0,a.useCallback)(e=>{e.preventDefault(),f(!1)},[]),O=(0,a.useCallback)(e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&N(r),e.target.value=""},[N]);return(0,n.jsxs)("div",{className:"container py-6 space-y-6 max-w-2xl",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Ingest Proof Bundle"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload a proof bundle JSON file to add a run to the dashboard"})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{className:"text-base",children:"Run metadata (optional)"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Override repo, branch, and commit if not present in the bundle"})]}),(0,n.jsxs)(l.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"repo",className:"text-sm font-medium block mb-1",children:"Repo"}),(0,n.jsx)(i.I,{id:"repo",placeholder:"owner/repo",value:b,onChange:e=>x(e.target.value),"aria-label":"Repository name"})]}),(0,n.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"branch",className:"text-sm font-medium block mb-1",children:"Branch"}),(0,n.jsx)(i.I,{id:"branch",placeholder:"main",value:v,onChange:e=>g(e.target.value),"aria-label":"Branch name"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"commit",className:"text-sm font-medium block mb-1",children:"Commit"}),(0,n.jsx)(i.I,{id:"commit",placeholder:"abc123...",value:j,onChange:e=>y(e.target.value),"aria-label":"Commit SHA"})]})]})]})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{className:"text-base",children:"Proof bundle file"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Drag and drop a .json file or click to browse. Must comply with ProofBundleV1 schema."})]}),(0,n.jsxs)(l.aY,{children:[(0,n.jsxs)("div",{onDrop:k,onDragOver:T,onDragLeave:C,className:"relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-12 transition-colors ".concat(m?"border-primary bg-primary/5":"border-muted-foreground/25"),children:[(0,n.jsx)("input",{type:"file",accept:".json,application/json",onChange:O,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Select proof bundle JSON file"}),(0,n.jsx)(c,{className:"h-12 w-12 text-muted-foreground mb-4","aria-hidden":!0}),(0,n.jsx)("p",{className:"text-sm font-medium mb-1",children:"Drop proof bundle here or click to browse"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"JSON file with schemaVersion 1.0.0"})]}),(d||h)&&(0,n.jsx)("p",{className:"mt-4 text-sm text-destructive",role:"alert",children:null!==(e=null==d?void 0:d.message)&&void 0!==e?e:h}),u&&(0,n.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Uploading and validatingâ€¦"})]})]})]})}},72831:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(80782),a=r(40618),o=r(59971);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"}},function(e){e.O(0,[763,540,789,166,744],function(){return e(e.s=52641)}),_N_E=e.O()}]);