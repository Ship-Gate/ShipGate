(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{56548:function(e,s,t){Promise.resolve().then(t.bind(t,51410))},51410:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(80782),n=t(30888),r=t(47492),i=t(98219),l=t(73458),c=t(26671),d=t(68150),o=t(46853),u=t(70195),m=t(45656),x=t(75327),f=t(82895),h=t(20687),p=t(40618);function v(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),t="string"==typeof(null==e?void 0:e.id)?e.id:null,{data:v,loading:g,error:b}=(0,r.Sr)(t),{data:j}=(0,r.Tu)(t),[N,y]=(0,p.useState)(!1),w=(0,p.useCallback)(async()=>{if(!v)return;let e="Run ".concat(v.id,"\nRepo: ").concat(v.repo," | Branch: ").concat(v.branch," | Commit: ").concat(v.commit,"\nVerdict: ").concat(v.verdict," | Score: ").concat(v.score,"\nTimestamp: ").concat(v.timestamp,"\nFiles: ").concat(v.files.length," total, ").concat(v.files.filter(e=>"fail"===e.verdict).length," failed");await navigator.clipboard.writeText(e),y(!0),setTimeout(()=>y(!1),2e3)},[v]),k=(0,p.useCallback)(()=>{if(!v||!("proofBundle"in v)||!v.proofBundle)return;let e=new Blob([JSON.stringify(v.proofBundle,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="proof-bundle-".concat(v.id,".json"),t.click(),URL.revokeObjectURL(s)},[v]);if(b||!g&&!v){var R;return(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsxs)(i.z,{variant:"ghost",onClick:()=>s.push("/dashboard/runs"),className:"gap-2 mb-4",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Back to Runs"]}),(0,a.jsx)("p",{className:"text-destructive",children:null!==(R=null==b?void 0:b.message)&&void 0!==R?R:"Run not found"})]})}if(g||!v)return(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsx)("div",{className:"h-8 w-48 bg-muted animate-pulse rounded mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-muted animate-pulse rounded"})]});let S="proofBundle"in v?v.proofBundle:void 0;return(0,a.jsxs)("div",{className:"container py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)(i.z,{variant:"ghost",onClick:()=>s.push("/dashboard/runs"),className:"gap-2 self-start","aria-label":"Back to runs",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Back to Runs"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[S&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:k,className:"gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4","aria-hidden":!0}),"Download Proof Bundle"]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:w,className:"gap-2",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4","aria-hidden":!0}),N?"Copied":"Copy Summary"]})]})]}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ll,{className:"text-xl",children:v.repo}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[v.pr?"PR #".concat(v.pr):v.branch," \xb7 ",v.commit.slice(0,7)," \xb7"," ",(0,o.WU)(new Date(v.timestamp),"PPp")]})]}),(0,a.jsx)(d.q,{verdict:v.verdict}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:v.score}),v.duration>0&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[v.duration,"ms"]})]})})}),(0,a.jsxs)(c.mQ,{defaultValue:"summary",className:"w-full",children:[(0,a.jsxs)(c.dr,{children:[(0,a.jsx)(c.SP,{value:"summary",children:"Summary"}),(0,a.jsx)(c.SP,{value:"evidence",children:"Evidence"})]}),(0,a.jsxs)(c.nU,{value:"summary",className:"mt-4 space-y-4",children:[j&&(j.newFailures.length>0||j.resolved.length>0)&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-base",children:"Diff vs previous run"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-destructive mb-2",children:["New failures (",j.newFailures.length,")"]}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:j.newFailures.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-destructive shrink-0"}),(0,a.jsx)("span",{className:"font-mono truncate",children:e.path})]},e.path))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-emerald-600 mb-2",children:["Resolved (",j.resolved.length,")"]}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:j.resolved.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-emerald-600 shrink-0"}),(0,a.jsx)("span",{className:"font-mono truncate",children:e.path})]},e.path))})]})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{className:"text-base",children:"Findings by file"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[v.files.length," files \xb7 ",v.coverage.specced,"/",v.coverage.total," specced"]})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("ul",{className:"space-y-3",children:v.files.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between gap-4 py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:["fail"===e.verdict||"warn"===e.verdict?(0,a.jsx)(f.Z,{className:"h-4 w-4 text-destructive shrink-0"}):(0,a.jsx)(h.Z,{className:"h-4 w-4 text-emerald-600 shrink-0"}),(0,a.jsx)("span",{className:"font-mono text-sm truncate",children:e.path})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded ".concat("fail"===e.verdict?"bg-red-100 text-red-800":"warn"===e.verdict?"bg-amber-100 text-amber-800":"bg-emerald-100 text-emerald-800"),children:e.verdict}),e.violations.length>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.violations.length," violation",1!==e.violations.length?"s":""]})]})]},e.path))})})]})]}),(0,a.jsx)(c.nU,{value:"evidence",className:"mt-4",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-base",children:"Proof bundle (raw JSON)"})}),(0,a.jsx)(l.aY,{children:S?(0,a.jsx)("pre",{className:"p-4 bg-muted rounded-lg text-xs overflow-auto max-h-[500px] font-mono",children:JSON.stringify(S,null,2)}):(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No proof bundle stored. This run was ingested via the legacy reports API."})})]})})]})]})}},68150:function(e,s,t){"use strict";t.d(s,{q:function(){return i}});var a=t(80782),n=t(59971);let r={SHIP:{label:"Ship",className:"bg-emerald-100 text-emerald-800 border-emerald-200"},WARN:{label:"Warn",className:"bg-amber-100 text-amber-800 border-amber-200"},NO_SHIP:{label:"No Ship",className:"bg-red-100 text-red-800 border-red-200"}};function i(e){var s;let{verdict:t,size:i="md"}=e,{label:l,className:c}=null!==(s=r[t])&&void 0!==s?s:r.NO_SHIP;return(0,a.jsx)("span",{className:(0,n.cn)("inline-flex items-center font-medium rounded-full border",c,"sm"===i?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1"),role:"status","aria-label":"Verdict: ".concat(l),children:l})}},98219:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(80782),n=t(40618),r=t(44299),i=t(14161),l=t(59971);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,s)=>{let{className:t,variant:n,size:i,asChild:d=!1,...o}=e,u=d?r.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:t})),ref:s,...o})});d.displayName="Button"},26671:function(e,s,t){"use strict";t.d(s,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return o}});var a=t(80782),n=t(40618),r=t(95259),i=t(59971);let l=r.fC,c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});c.displayName=r.aV.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});d.displayName=r.xz.displayName;let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});o.displayName=r.VY.displayName}},function(e){e.O(0,[763,75,348,831,540,789,166,744],function(){return e(e.s=56548)}),_N_E=e.O()}]);