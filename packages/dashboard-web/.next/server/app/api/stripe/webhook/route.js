"use strict";(()=>{var e={};e.id=757,e.ids=[757],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},47003:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>m,patchFetch:()=>E,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>x});var o={};r.r(o),r.d(o,{POST:()=>u});var s=r(82453),n=r(54421),a=r(27337),i=r(42626),c=r(32415),p=r(99316);async function u(e){let t;let r=await e.text(),o=(0,p.headers)().get("stripe-signature");if(!o)return i.Z.json({error:"No signature"},{status:400});try{t=(function(){if(!process.env.STRIPE_SECRET_KEY)throw Error("STRIPE_SECRET_KEY is not set");return new c.Z(process.env.STRIPE_SECRET_KEY)})().webhooks.constructEvent(r,o,process.env.STRIPE_WEBHOOK_SECRET)}catch(e){return console.log("Webhook signature verification failed.",e.message),i.Z.json({error:"Invalid signature"},{status:400})}switch(t.type){case"checkout.session.completed":console.log("Payment successful:",t.data.object);break;case"invoice.payment_succeeded":console.log("Payment succeeded");break;case"invoice.payment_failed":console.log("Payment failed");break;default:console.log(`Unhandled event type ${t.type}`)}return i.Z.json({received:!0})}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/stripe/webhook/route",pathname:"/api/stripe/webhook",filename:"route",bundlePath:"app/api/stripe/webhook/route"},resolvedPagePath:"C:\\Users\\mevla\\OneDrive\\Desktop\\projects\\IntentOS\\packages\\dashboard-web\\src\\app\\api\\stripe\\webhook\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:v,staticGenerationBailout:x}=l,m="/api/stripe/webhook/route";function E(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[230,680,316,415],()=>r(47003));module.exports=o})();