/* ============================================================================
 * SHIPGATE — Mission Control Theme
 *
 * Tesla HUD × Google Material You × SpaceX Telemetry
 *
 * Design principles:
 *   1. Ambient reactive glow — sections emit light based on health status
 *   2. Glass depth — layered translucency creates spatial hierarchy
 *   3. Precision typography — tabular nums, tight tracking, weight hierarchy
 *   4. Alive motion — everything breathes, nothing is static
 *   5. Data-dense clarity — information-rich without clutter
 * ============================================================================ */

/* ── Design Tokens ───────────────────────────────────────────── */

:root {
  /* Surfaces — glass layers */
  --sg-void: #0a0a0f;
  --sg-surface-0: var(--vscode-sideBar-background, #0e0e14);
  --sg-surface-1: rgba(255, 255, 255, 0.03);
  --sg-surface-2: rgba(255, 255, 255, 0.05);
  --sg-surface-3: rgba(255, 255, 255, 0.07);
  --sg-surface-hover: rgba(255, 255, 255, 0.06);
  --sg-surface-active: rgba(255, 255, 255, 0.08);

  /* Borders */
  --sg-border: rgba(255, 255, 255, 0.06);
  --sg-border-hover: rgba(255, 255, 255, 0.1);
  --sg-border-focus: var(--vscode-focusBorder, #4c9aff);

  /* Text hierarchy */
  --sg-text-0: var(--vscode-foreground, #e8eaed);
  --sg-text-1: rgba(255, 255, 255, 0.72);
  --sg-text-2: rgba(255, 255, 255, 0.45);
  --sg-text-3: rgba(255, 255, 255, 0.25);

  /* SHIP — electric emerald */
  --sg-green: #00e68a;
  --sg-green-mid: rgba(0, 230, 138, 0.15);
  --sg-green-dim: rgba(0, 230, 138, 0.08);
  --sg-green-glow: rgba(0, 230, 138, 0.35);
  --sg-green-aura: radial-gradient(ellipse at 50% 0%, rgba(0, 230, 138, 0.06) 0%, transparent 70%);

  /* WARN — molten amber */
  --sg-amber: #ffb547;
  --sg-amber-mid: rgba(255, 181, 71, 0.15);
  --sg-amber-dim: rgba(255, 181, 71, 0.08);
  --sg-amber-glow: rgba(255, 181, 71, 0.35);
  --sg-amber-aura: radial-gradient(ellipse at 50% 0%, rgba(255, 181, 71, 0.06) 0%, transparent 70%);

  /* NO_SHIP — signal red */
  --sg-red: #ff5c6a;
  --sg-red-mid: rgba(255, 92, 106, 0.15);
  --sg-red-dim: rgba(255, 92, 106, 0.08);
  --sg-red-glow: rgba(255, 92, 106, 0.35);
  --sg-red-aura: radial-gradient(ellipse at 50% 0%, rgba(255, 92, 106, 0.06) 0%, transparent 70%);

  /* Accent — cobalt */
  --sg-blue: #5b9aff;
  --sg-blue-mid: rgba(91, 154, 255, 0.15);
  --sg-blue-dim: rgba(91, 154, 255, 0.08);
  --sg-blue-glow: rgba(91, 154, 255, 0.35);

  /* Teal — connected */
  --sg-teal: #00d4aa;
  --sg-teal-dim: rgba(0, 212, 170, 0.08);
  --sg-teal-glow: rgba(0, 212, 170, 0.3);

  /* Motion */
  --sg-ease: cubic-bezier(0.22, 1, 0.36, 1);
  --sg-ease-out: cubic-bezier(0, 0, 0.15, 1);
  --sg-ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --sg-dur: 300ms;
  --sg-dur-slow: 600ms;
  --sg-dur-fast: 150ms;

  /* Radius */
  --sg-r: 8px;
  --sg-r-sm: 5px;
  --sg-r-lg: 12px;
  --sg-r-pill: 100px;

  /* Typography */
  --sg-font: var(--vscode-font-family, system-ui, -apple-system, 'Segoe UI', sans-serif);
  --sg-mono: var(--vscode-editor-font-family, 'SF Mono', 'Cascadia Code', 'JetBrains Mono', 'Fira Code', ui-monospace, monospace);
  --sg-fs-base: 12px;
  --sg-fs-sm: 11px;
  --sg-fs-xs: 10px;
  --sg-fs-xxs: 9px;
  --sg-fs-data: 22px;
  --sg-fs-gauge: 15px;
}

/* ── Reset ────────────────────────────────────────────────────── */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ── Base ─────────────────────────────────────────────────────── */

body.sg-panel {
  font-family: var(--sg-font);
  font-size: var(--sg-fs-base);
  color: var(--sg-text-0);
  background: linear-gradient(135deg, #064e3b, #0d9488, #065f46);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
}

#sg-bg-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  opacity: 0.6;
}

.sg-svg-hidden { display: none; }

.sg-content {
  position: relative;
  z-index: 1;
}

/* ── Header ──────────────────────────────────────────────────── */

.sg-logo-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 14px 6px 16px;
}

.sg-brand {
  font-size: 15px;
  font-weight: 700;
  letter-spacing: -0.02em;
  color: var(--sg-text-0);
}

.sg-help-btn {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text-2);
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background var(--sg-dur-fast) var(--sg-ease), color var(--sg-dur-fast) var(--sg-ease), border-color var(--sg-dur-fast) var(--sg-ease);
}

.sg-help-btn:hover {
  background: var(--sg-blue-dim);
  color: var(--sg-blue);
  border-color: var(--sg-blue);
}

/* ── Onboarding Wizard ───────────────────────────────────────── */

.sg-hidden { display: none !important; }

.sg-onboarding {
  margin: 0 12px 12px;
  padding: 14px 16px;
  background: #12131a;
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-r-lg);
  position: relative;
  z-index: 2;
  animation: sg-fade-in var(--sg-dur) var(--sg-ease);
}

@keyframes sg-fade-in {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: translateY(0); }
}

.sg-onboarding-step {
  font-size: var(--sg-fs-base);
  color: var(--sg-text-0);
  line-height: 1.6;
}

.sg-onboarding-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--sg-blue);
  margin-bottom: 6px;
}

.sg-onboarding-desc {
  font-size: var(--sg-fs-sm);
  color: var(--sg-text-1);
  margin-bottom: 12px;
}

.sg-onboarding-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.sg-onboarding-dots {
  display: flex;
  gap: 5px;
}

.sg-onboarding-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--sg-surface-3);
  transition: background var(--sg-dur-fast) var(--sg-ease);
}

.sg-onboarding-dot--active {
  background: var(--sg-blue);
}

.sg-onboarding-btn {
  font-size: var(--sg-fs-xs);
  padding: 4px 12px;
  border-radius: var(--sg-r-pill);
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text-1);
  cursor: pointer;
  transition: background var(--sg-dur-fast) var(--sg-ease), color var(--sg-dur-fast) var(--sg-ease);
}

.sg-onboarding-btn:hover {
  background: var(--sg-surface-hover);
  color: var(--sg-text-0);
}

.sg-onboarding-btn--primary {
  background: var(--sg-blue-dim);
  color: var(--sg-blue);
  border-color: rgba(91, 154, 255, 0.3);
}

.sg-onboarding-btn--primary:hover {
  background: var(--sg-blue-mid);
}

/* ── Intent Builder ──────────────────────────────────────────── */

.sg-apikey-wrap {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  align-items: stretch;
}

.sg-apikey-input {
  flex: 1;
  padding: 7px 10px;
  font-family: var(--sg-font);
  font-size: var(--sg-fs-sm);
  color: var(--sg-text-0);
  background: #0d0e14;
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-r-md);
  outline: none;
  transition: border-color var(--sg-dur-fast) var(--sg-ease);
}

.sg-apikey-input::placeholder { color: var(--sg-text-3); }
.sg-apikey-input:focus { border-color: var(--sg-blue); }

.sg-apikey-note {
  margin-top: 6px;
  font-size: 10px;
  color: var(--sg-text-3);
  font-style: italic;
}

.sg-btn--ghost {
  background: transparent;
  color: var(--sg-text-3);
  border: 1px solid var(--sg-border);
  font-size: 11px;
  padding: 4px 8px;
}

.sg-btn--ghost:hover {
  color: var(--sg-text-1);
  border-color: var(--sg-text-3);
}

.sg-input-wrap { margin-top: 8px; }

.sg-textarea {
  width: 100%;
  min-height: 56px;
  padding: 8px 10px;
  font-family: var(--sg-font);
  font-size: var(--sg-fs-sm);
  color: var(--sg-text-0);
  background: #0d0e14;
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-r-md);
  resize: vertical;
  outline: none;
  transition: border-color var(--sg-dur-fast) var(--sg-ease);
}

.sg-textarea::placeholder { color: var(--sg-text-3); }
.sg-textarea:focus { border-color: var(--sg-blue); }

.sg-btn-row {
  display: flex;
  gap: 6px;
}

.sg-pipeline {
  display: flex;
  align-items: center;
  gap: 0;
  margin-top: 10px;
  padding: 8px 0;
}

.sg-pipeline-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.sg-pipeline-dot {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid var(--sg-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: transparent;
  transition: all var(--sg-dur) var(--sg-ease);
}

.sg-pipeline-dot--active {
  border-color: var(--sg-blue);
  box-shadow: 0 0 8px rgba(91, 154, 255, 0.4);
  animation: sg-pulse 1.5s ease-in-out infinite;
}

.sg-pipeline-dot--done {
  border-color: var(--sg-green);
  background: var(--sg-green);
  color: #000;
}

@keyframes sg-pulse {
  0%, 100% { box-shadow: 0 0 4px rgba(91, 154, 255, 0.3); }
  50%      { box-shadow: 0 0 12px rgba(91, 154, 255, 0.6); }
}

.sg-pipeline-label {
  font-size: 9px;
  color: var(--sg-text-3);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  white-space: nowrap;
}

.sg-pipeline-label--active {
  color: var(--sg-blue);
  font-weight: 600;
}

.sg-pipeline-line {
  flex: 1;
  height: 2px;
  min-width: 12px;
  background: var(--sg-border);
  margin: 0 2px;
  margin-bottom: 16px;
  transition: background var(--sg-dur) var(--sg-ease);
}

.sg-pipeline-line--done {
  background: var(--sg-green);
}

#sg-root {
  position: relative;
  z-index: 1;
  padding: 10px 12px 28px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

#root {
  position: relative;
  z-index: 1;
  padding: 10px 12px 28px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* ── Staggered entrance ──────────────────────────────────────── */

@keyframes sg-materialize {
  0%   { opacity: 0; transform: translateY(12px) scale(0.98); filter: blur(4px); }
  100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}

.sg-section { animation: sg-materialize var(--sg-dur-slow) var(--sg-ease) both; }
.sg-section:nth-child(1)  { animation-delay:  0ms; }
.sg-section:nth-child(2)  { animation-delay: 50ms; }
.sg-section:nth-child(3)  { animation-delay: 100ms; }
.sg-section:nth-child(4)  { animation-delay: 150ms; }
.sg-section:nth-child(5)  { animation-delay: 200ms; }
.sg-section:nth-child(6)  { animation-delay: 250ms; }
.sg-section:nth-child(7)  { animation-delay: 300ms; }
.sg-section:nth-child(8)  { animation-delay: 350ms; }
.sg-section:nth-child(9)  { animation-delay: 400ms; }
.sg-section:nth-child(10) { animation-delay: 450ms; }

/* ── Welcome Banner ──────────────────────────────────────────── */

.sg-welcome {
  font-size: var(--sg-fs-sm);
  color: var(--sg-text-1);
  padding: 12px 14px;
  background: var(--sg-blue-dim);
  border: 1px solid rgba(91, 154, 255, 0.12);
  border-radius: var(--sg-r);
  line-height: 1.65;
  position: relative;
  overflow: hidden;
}

.sg-welcome::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(91, 154, 255, 0.4), transparent);
}

/* ── Section Cards ───────────────────────────────────────────── */

.sg-section {
  position: relative;
  background: #12131a;
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-r-lg);
  padding: 14px 14px 12px;
  overflow: hidden;
  transition:
    border-color var(--sg-dur) var(--sg-ease),
    box-shadow var(--sg-dur) var(--sg-ease),
    transform var(--sg-dur-fast) var(--sg-ease);
}

/* Glass refraction top-edge */
.sg-section::before {
  content: '';
  position: absolute;
  top: 0; left: 12px; right: 12px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
  transition: background var(--sg-dur) var(--sg-ease);
}

.sg-section:hover { border-color: var(--sg-border-hover); }
.sg-section:hover::before {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
}

/* ── Ambient Aura — status-driven background glow ────────────── */

.sg-section::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--sg-dur-slow) var(--sg-ease);
}

.sg-section[data-status="ship"]::after    { background: var(--sg-green-aura); opacity: 1; }
.sg-section[data-status="warn"]::after    { background: var(--sg-amber-aura); opacity: 1; }
.sg-section[data-status="noship"]::after  { background: var(--sg-red-aura); opacity: 1; }
.sg-section[data-status="running"]::after {
  background: radial-gradient(ellipse at 50% 0%, rgba(91,154,255,0.06) 0%, transparent 70%);
  opacity: 1;
}

.sg-section[data-status="ship"] {
  border-color: rgba(0,230,138,0.15);
  box-shadow: 0 0 0 1px rgba(0,230,138,0.04), 0 4px 24px -4px rgba(0,230,138,0.08);
}
.sg-section[data-status="warn"] {
  border-color: rgba(255,181,71,0.15);
  box-shadow: 0 0 0 1px rgba(255,181,71,0.04), 0 4px 24px -4px rgba(255,181,71,0.08);
}
.sg-section[data-status="noship"] {
  border-color: rgba(255,92,106,0.15);
  box-shadow: 0 0 0 1px rgba(255,92,106,0.04), 0 4px 24px -4px rgba(255,92,106,0.08);
}
.sg-section[data-status="running"] {
  border-color: rgba(91,154,255,0.15);
  box-shadow: 0 0 0 1px rgba(91,154,255,0.04), 0 4px 24px -4px rgba(91,154,255,0.08);
}

/* ── Section Header ──────────────────────────────────────────── */

.sg-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
  position: relative;
  z-index: 1;
}

.sg-section-title {
  font-size: var(--sg-fs-xxs);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: var(--sg-text-2);
  user-select: none;
}

/* ── Badges ──────────────────────────────────────────────────── */

.sg-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: var(--sg-fs-xxs);
  font-weight: 700;
  font-family: var(--sg-mono);
  letter-spacing: 0.8px;
  text-transform: uppercase;
  padding: 3px 10px;
  border-radius: var(--sg-r-pill);
  line-height: 1.4;
  white-space: nowrap;
  transition: all var(--sg-dur) var(--sg-ease);
}

.sg-badge--idle        { background: var(--sg-surface-2); color: var(--sg-text-3); }
.sg-badge--ship        { background: var(--sg-green-mid); color: var(--sg-green); box-shadow: 0 0 12px var(--sg-green-glow), inset 0 0 8px rgba(0,230,138,0.06); }
.sg-badge--warn        { background: var(--sg-amber-mid); color: var(--sg-amber); box-shadow: 0 0 12px var(--sg-amber-glow), inset 0 0 8px rgba(255,181,71,0.06); }
.sg-badge--noship      { background: var(--sg-red-mid); color: var(--sg-red); box-shadow: 0 0 12px var(--sg-red-glow), inset 0 0 8px rgba(255,92,106,0.06); }
.sg-badge--connected   { background: var(--sg-teal-dim); color: var(--sg-teal); box-shadow: 0 0 8px var(--sg-teal-glow); }
.sg-badge--disconnected { background: var(--sg-surface-2); color: var(--sg-text-3); }
.sg-badge--checking    { background: var(--sg-blue-dim); color: var(--sg-blue); }
.sg-badge--allowed     { background: var(--sg-green-mid); color: var(--sg-green); box-shadow: 0 0 8px var(--sg-green-glow); }
.sg-badge--blocked     { background: var(--sg-red-mid); color: var(--sg-red); box-shadow: 0 0 12px var(--sg-red-glow); animation: sg-badgePulse 2s ease-in-out infinite; }

@keyframes sg-badgePulse {
  0%, 100% { box-shadow: 0 0 12px var(--sg-red-glow); }
  50%      { box-shadow: 0 0 20px var(--sg-red-glow), 0 0 40px rgba(255,92,106,0.1); }
}

/* ── Spinner ─────────────────────────────────────────────────── */

@keyframes sg-spin { to { transform: rotate(360deg); } }

.sg-spinner {
  display: inline-block;
  width: 10px; height: 10px;
  border: 1.5px solid rgba(91,154,255,0.2);
  border-top-color: var(--sg-blue);
  border-radius: 50%;
  animation: sg-spin 0.7s linear infinite;
  flex-shrink: 0;
}

/* ── Summary ─────────────────────────────────────────────────── */

.sg-summary     { font-size: var(--sg-fs-sm); color: var(--sg-text-1); line-height: 1.55; position: relative; z-index: 1; }
.sg-summary-mono { font-family: var(--sg-mono); font-size: var(--sg-fs-xs); color: var(--sg-text-2); letter-spacing: 0.3px; }

/* ── Score Display ───────────────────────────────────────────── */

.sg-score-row {
  display: flex;
  align-items: baseline;
  gap: 6px;
  margin: 8px 0 2px;
  position: relative;
  z-index: 1;
}

.sg-score-value {
  font-family: var(--sg-mono);
  font-size: var(--sg-fs-data);
  font-weight: 800;
  line-height: 1;
  letter-spacing: -0.5px;
  font-variant-numeric: tabular-nums;
  transition: color var(--sg-dur) var(--sg-ease);
}

.sg-score-value--ship   { color: var(--sg-green); }
.sg-score-value--warn   { color: var(--sg-amber); }
.sg-score-value--noship { color: var(--sg-red); }
.sg-score-value--idle   { color: var(--sg-text-3); }

.sg-score-unit  { font-size: var(--sg-fs-sm); color: var(--sg-text-3); font-weight: 500; }
.sg-score-label { font-size: var(--sg-fs-xs); color: var(--sg-text-2); margin-left: auto; font-weight: 500; }

/* ── Stats Grid ──────────────────────────────────────────────── */

.sg-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 5px;
  margin: 10px 0 2px;
  position: relative;
  z-index: 1;
}

.sg-stat {
  background: var(--sg-surface-2);
  border: 1px solid transparent;
  border-radius: var(--sg-r);
  padding: 8px 4px 6px;
  text-align: center;
  position: relative;
  overflow: hidden;
  transition: all var(--sg-dur) var(--sg-ease);
}

.sg-stat:hover {
  border-color: var(--sg-border-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Stat accent line */
.sg-stat::before {
  content: '';
  position: absolute;
  top: 0; left: 20%; right: 20%;
  height: 1px;
  border-radius: 1px;
  opacity: 0;
  transition: opacity var(--sg-dur) var(--sg-ease);
}

.sg-stat--pass::before { background: var(--sg-green); opacity: 0.5; }
.sg-stat--warn::before { background: var(--sg-amber); opacity: 0.5; }
.sg-stat--fail::before { background: var(--sg-red); opacity: 0.5; }

.sg-stat-value {
  font-family: var(--sg-mono);
  font-size: 18px;
  font-weight: 800;
  font-variant-numeric: tabular-nums;
  color: var(--sg-text-0);
  line-height: 1.1;
  transition: color var(--sg-dur) var(--sg-ease);
}

.sg-stat--pass .sg-stat-value { color: var(--sg-green); }
.sg-stat--warn .sg-stat-value { color: var(--sg-amber); }
.sg-stat--fail .sg-stat-value { color: var(--sg-red); }

.sg-stat-label {
  font-size: var(--sg-fs-xxs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--sg-text-3);
  margin-top: 3px;
}

@keyframes sg-countPop {
  0%  { transform: scale(1); }
  40% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.sg-stat-value[data-animate] {
  animation: sg-countPop 0.35s var(--sg-ease-spring);
}

/* ── Drift Gauge (SVG Arc) ───────────────────────────────────── */

.sg-gauge-container {
  display: flex;
  align-items: center;
  gap: 14px;
  margin: 6px -8px 4px;
  cursor: pointer;
  padding: 8px;
  border-radius: var(--sg-r);
  transition: background var(--sg-dur) var(--sg-ease);
  position: relative;
  z-index: 1;
}

.sg-gauge-container:hover { background: var(--sg-surface-hover); }

.sg-gauge-ring { position: relative; width: 64px; height: 64px; flex-shrink: 0; }

.sg-gauge-svg {
  width: 64px; height: 64px;
  transform: rotate(-90deg);
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.3));
}

.sg-gauge-bg    { fill: none; stroke: var(--sg-surface-3); stroke-width: 4; }
.sg-gauge-trail {
  fill: none; stroke-width: 4; stroke-linecap: round;
  stroke-dasharray: 163.36; stroke-dashoffset: 163.36;
  transition: stroke-dashoffset 1.2s var(--sg-ease), stroke 0.5s var(--sg-ease);
  filter: blur(3px); opacity: 0.4;
}
.sg-gauge-fill {
  fill: none; stroke-width: 4; stroke-linecap: round;
  stroke-dasharray: 163.36; stroke-dashoffset: 163.36;
  transition: stroke-dashoffset 1.2s var(--sg-ease), stroke 0.5s var(--sg-ease);
}

.sg-gauge-fill[data-color="green"], .sg-gauge-trail[data-color="green"] { stroke: var(--sg-green); }
.sg-gauge-fill[data-color="amber"], .sg-gauge-trail[data-color="amber"] { stroke: var(--sg-amber); }
.sg-gauge-fill[data-color="red"],   .sg-gauge-trail[data-color="red"]   { stroke: var(--sg-red); }

.sg-gauge-label {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--sg-mono); font-size: var(--sg-fs-gauge);
  font-weight: 800; color: var(--sg-text-0);
  pointer-events: none; font-variant-numeric: tabular-nums;
}

.sg-gauge-meta   { flex: 1; min-width: 0; }
.sg-gauge-title  { font-size: var(--sg-fs-base); font-weight: 600; color: var(--sg-text-0); margin-bottom: 2px; }
.sg-gauge-desc   { font-size: var(--sg-fs-sm); color: var(--sg-text-2); line-height: 1.4; }
.sg-gauge-files  { font-size: var(--sg-fs-xs); font-family: var(--sg-mono); color: var(--sg-text-3); margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* ── Buttons ─────────────────────────────────────────────────── */

.sg-btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 6px;
  width: 100%; padding: 8px 14px; margin-top: 8px;
  font-family: var(--sg-font); font-size: var(--sg-fs-sm); font-weight: 600;
  color: var(--sg-text-1);
  background: var(--sg-surface-2);
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-r);
  cursor: pointer; position: relative; overflow: hidden; outline: none;
  transition: background var(--sg-dur) var(--sg-ease), border-color var(--sg-dur) var(--sg-ease), color var(--sg-dur) var(--sg-ease), box-shadow var(--sg-dur) var(--sg-ease), transform var(--sg-dur-fast) var(--sg-ease);
  z-index: 1;
}

/* Hover shimmer sweep */
.sg-btn::before {
  content: '';
  position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.04), transparent);
  transition: left 0.5s var(--sg-ease);
}
.sg-btn:hover::before       { left: 100%; }
.sg-btn:hover:not(:disabled) { border-color: var(--sg-border-hover); background: var(--sg-surface-3); }
.sg-btn:active:not(:disabled) { transform: scale(0.97); }
.sg-btn:focus-visible        { box-shadow: 0 0 0 2px var(--sg-border-focus); }
.sg-btn:disabled             { opacity: 0.35; cursor: not-allowed; }

/* Loading state — spinner + disabled + glow pulse */
.sg-btn--loading {
  pointer-events: none;
  opacity: 0.8;
  cursor: wait;
}
.sg-btn--loading .sg-btn-spinner {
  display: inline-block;
  width: 14px; height: 14px;
  border: 2px solid rgba(255,255,255,0.15);
  border-top-color: currentColor;
  border-radius: 50%;
  animation: sg-btnSpin 0.6s linear infinite;
  flex-shrink: 0;
}
@keyframes sg-btnSpin {
  to { transform: rotate(360deg); }
}
.sg-btn--loading::after {
  content: '';
  position: absolute; inset: 0;
  border-radius: inherit;
  box-shadow: 0 0 12px rgba(91,154,255,0.15);
  animation: sg-btnGlow 1.5s ease-in-out infinite;
}
@keyframes sg-btnGlow {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

.sg-btn--primary {
  background: var(--sg-blue-mid); border-color: rgba(91,154,255,0.2); color: var(--sg-blue);
}
.sg-btn--primary:hover:not(:disabled) {
  background: rgba(91,154,255,0.22); border-color: rgba(91,154,255,0.35);
  box-shadow: 0 0 16px rgba(91,154,255,0.12), inset 0 1px 0 rgba(255,255,255,0.04);
}

.sg-btn--ship {
  background: var(--sg-green-mid); border-color: rgba(0,230,138,0.2); color: var(--sg-green);
}
.sg-btn--ship:hover:not(:disabled) {
  background: rgba(0,230,138,0.22); border-color: rgba(0,230,138,0.35);
  box-shadow: 0 0 16px rgba(0,230,138,0.12), inset 0 1px 0 rgba(255,255,255,0.04);
}

.sg-btn-row           { display: flex; gap: 6px; margin-top: 8px; }
.sg-btn-row .sg-btn   { margin-top: 0; flex: 1; }

/* ── Links ───────────────────────────────────────────────────── */

.sg-link {
  color: var(--sg-blue); text-decoration: none; cursor: pointer;
  position: relative; transition: color var(--sg-dur) var(--sg-ease);
}

.sg-link::after {
  content: '';
  position: absolute; bottom: -1px; left: 0;
  width: 0; height: 1px; background: var(--sg-blue);
  transition: width var(--sg-dur) var(--sg-ease);
}

.sg-link:hover        { color: #80b5ff; }
.sg-link:hover::after { width: 100%; }
.sg-link:focus-visible { outline: 2px solid var(--sg-border-focus); outline-offset: 2px; border-radius: 2px; }

/* ── Progress bar ────────────────────────────────────────────── */

@keyframes sg-shimmer {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(250%); }
}

.sg-progress {
  height: 2px; background: var(--sg-surface-3); border-radius: 2px;
  overflow: hidden; margin: 10px 0 2px; position: relative; z-index: 1;
}

.sg-progress-bar {
  height: 100%; width: 35%;
  background: linear-gradient(90deg, var(--sg-blue), rgba(188,140,255,0.8), var(--sg-blue));
  border-radius: 2px;
  animation: sg-shimmer 1.8s var(--sg-ease-out) infinite;
}

/* ── List Items ──────────────────────────────────────────────── */

.sg-list-item {
  display: flex; align-items: center; gap: 8px;
  padding: 5px 8px; margin: 1px -8px;
  border-radius: var(--sg-r-sm);
  font-size: var(--sg-fs-sm);
  transition: background var(--sg-dur) var(--sg-ease);
  position: relative; z-index: 1;
}
.sg-list-item:hover { background: var(--sg-surface-hover); }
.sg-list-item .sg-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.sg-run-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
.sg-run-dot--success { background: var(--sg-green); box-shadow: 0 0 6px var(--sg-green-glow); }
.sg-run-dot--failure { background: var(--sg-red); box-shadow: 0 0 6px var(--sg-red-glow); }
.sg-run-dot--pending { background: var(--sg-amber); animation: sg-breathe 2s ease-in-out infinite; }

@keyframes sg-breathe {
  0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--sg-amber-glow); }
  50%      { opacity: 0.5; box-shadow: 0 0 8px var(--sg-amber-glow); }
}

/* ── Divider / Helpers ───────────────────────────────────────── */

.sg-divider { height: 1px; background: linear-gradient(90deg, transparent, var(--sg-border), transparent); margin: 8px 0; position: relative; z-index: 1; }

.sg-sub-title {
  font-size: var(--sg-fs-xxs); font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px;
  color: var(--sg-text-3); margin: 8px 0 4px; position: relative; z-index: 1;
}

/* ── Findings ────────────────────────────────────────────────── */

.sg-findings { display: flex; flex-direction: column; gap: 1px; position: relative; z-index: 1; }

.sg-finding {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 8px; margin: 0 -8px; border-radius: var(--sg-r);
  cursor: pointer;
  transition: background var(--sg-dur) var(--sg-ease), transform var(--sg-dur-fast) var(--sg-ease);
}
.sg-finding:hover  { background: var(--sg-surface-hover); }
.sg-finding:active { transform: scale(0.99); }
.sg-finding:focus-visible { outline: 2px solid var(--sg-border-focus); outline-offset: -2px; }

.sg-dot { width: 8px; height: 8px; border-radius: 50%; margin-top: 4px; flex-shrink: 0; position: relative; }
.sg-dot::after { content: ''; position: absolute; inset: -3px; border-radius: 50%; opacity: 0; transition: opacity var(--sg-dur) var(--sg-ease); }
.sg-dot--pass { background: var(--sg-green); }
.sg-dot--warn { background: var(--sg-amber); }
.sg-dot--fail { background: var(--sg-red); }
.sg-dot--pass::after { box-shadow: 0 0 8px var(--sg-green-glow); }
.sg-dot--warn::after { box-shadow: 0 0 8px var(--sg-amber-glow); }
.sg-dot--fail::after { box-shadow: 0 0 8px var(--sg-red-glow); }
.sg-finding:hover .sg-dot::after { opacity: 1; }

.sg-finding-body  { flex: 1; min-width: 0; }
.sg-finding-file  { font-family: var(--sg-mono); font-size: var(--sg-fs-sm); color: var(--sg-text-0); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sg-finding-msg   { font-size: var(--sg-fs-xs); color: var(--sg-text-3); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sg-finding-score { font-family: var(--sg-mono); font-size: var(--sg-fs-xs); font-weight: 700; font-variant-numeric: tabular-nums; color: var(--sg-text-2); flex-shrink: 0; margin-top: 3px; }

/* ── Empty State ─────────────────────────────────────────────── */

.sg-empty      { text-align: center; padding: 20px 10px; color: var(--sg-text-3); font-size: var(--sg-fs-sm); position: relative; z-index: 1; }
.sg-empty-icon { font-size: 20px; margin-bottom: 6px; opacity: 0.25; }

/* ── Scrollbar ───────────────────────────────────────────────── */

::-webkit-scrollbar       { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.12); }

/* ── Focus ───────────────────────────────────────────────────── */

*:focus-visible { outline: 2px solid var(--sg-border-focus); outline-offset: 2px; }

/* ── Toggle Switch ───────────────────────────────────────────── */

.sg-toggle {
  position: relative;
  display: inline-block;
  width: 34px;
  height: 18px;
  cursor: pointer;
  margin-left: auto;
  margin-right: 8px;
  flex-shrink: 0;
}

.sg-toggle-input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
}

.sg-toggle-slider {
  position: absolute;
  inset: 0;
  background: var(--sg-surface-3);
  border-radius: var(--sg-r-pill);
  border: 1px solid var(--sg-border);
  transition: background var(--sg-dur) var(--sg-ease), border-color var(--sg-dur) var(--sg-ease);
}

.sg-toggle-slider::before {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  left: 2px;
  bottom: 2px;
  background: var(--sg-text-2);
  border-radius: 50%;
  transition: transform var(--sg-dur) var(--sg-ease), background var(--sg-dur) var(--sg-ease);
}

.sg-toggle-input:checked + .sg-toggle-slider {
  background: var(--sg-green-dim);
  border-color: var(--sg-green);
}

.sg-toggle-input:checked + .sg-toggle-slider::before {
  transform: translateX(16px);
  background: var(--sg-green);
}

.sg-toggle:hover .sg-toggle-slider {
  border-color: var(--sg-border-hover);
}

.sg-toggle-input:focus-visible + .sg-toggle-slider {
  outline: 2px solid var(--sg-border-focus);
  outline-offset: 2px;
}

/* ── Heal Section ────────────────────────────────────────────── */

.sg-select-wrap { margin-top: 8px; }

.sg-select-label {
  display: block;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--sg-text-2);
  margin-bottom: 4px;
}

.sg-select {
  width: 100%;
  padding: 7px 10px;
  font-family: var(--sg-font);
  font-size: var(--sg-fs-xs);
  color: var(--sg-text-1);
  background: var(--vscode-dropdown-background, #1e1e2e);
  border: 1px solid var(--sg-border);
  border-radius: var(--sg-radius);
  outline: none;
  appearance: none;
  cursor: pointer;
  transition: border-color var(--sg-dur-fast) var(--sg-ease);
}
.sg-select:focus { border-color: var(--sg-blue); }
.sg-select option { background: var(--vscode-dropdown-background, #1e1e2e); color: var(--vscode-dropdown-foreground, #e8eaed); }

.sg-heal-blockers {
  padding: 8px 10px;
  background: rgba(218,54,51,0.06);
  border: 1px solid rgba(218,54,51,0.15);
  border-radius: var(--sg-radius);
  font-size: var(--sg-fs-xxs);
}

.sg-heal-blocker-item {
  color: var(--sg-text-2);
  padding: 2px 0;
  line-height: 1.4;
}

.sg-heal-patches { position: relative; z-index: 1; }

.sg-list-item--clickable {
  cursor: pointer;
  border-radius: var(--sg-radius);
  padding: 4px 6px;
  transition: background var(--sg-dur-fast) var(--sg-ease);
}
.sg-list-item--clickable:hover { background: rgba(255,255,255,0.06); }

.sg-badge--blocked {
  background: rgba(218,54,51,0.15);
  color: var(--sg-red);
}

/* ── Utility ─────────────────────────────────────────────────── */

.sg-flex-1 { flex: 1; min-width: 0; }
.sg-mt-4   { margin-top: 4px; }
.sg-mt-8   { margin-top: 8px; }
.sg-z1     { position: relative; z-index: 1; }
