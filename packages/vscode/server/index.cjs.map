{"version":3,"sources":["../src/documents.ts","../src/features/completion.ts","../src/features/hover.ts","../src/features/import-resolver.ts","../src/features/semantic-linter.ts","../src/features/diagnostics.ts","../src/features/definition.ts","../src/features/symbols.ts","../src/features/semantic-tokens.ts","../src/features/actions.ts","../src/features/formatting.ts","../src/features/scanner-diagnostics.ts","../src/server.ts"],"names":["IncrementalParser","SymbolIndex","DiagnosticSeverity","exports","URI","path","withExtension","LSPDiagnosticSeverity","BUILTIN_TYPES","CodeActionKind","TextEdit","createIntegratedFirewall","createConnection","ProposedFeatures","TextDocuments","TextDocument","TextDocumentSyncKind","SemanticTokensBuilder","CompletionItemKind","SymbolKind"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCO,IAAM,qBAAN,MAAyB;AAAA,EACtB,MAAA;AAAA,EACA,WAAA;AAAA,EACA,SAAA,uBAAgB,GAAA,EAA4B;AAAA,EAC5C,cAAA,uBAAqB,GAAA,EAA4B;AAAA,EACjD,UAAA,GAAa,GAAA;AAAA,EAErB,WAAA,GAAc;AACZ,IAAA,IAAA,CAAK,MAAA,GAAS,IAAIA,yBAAA,EAAkB;AACpC,IAAA,IAAA,CAAK,WAAA,GAAc,IAAIC,mBAAA,EAAY;AAAA,EACrC;AAAA;AAAA;AAAA;AAAA,EAKA,cAAA,CAAe,QAAA,EAAwB,SAAA,GAAY,KAAA,EAAmC;AACpF,IAAA,MAAM,MAAM,QAAA,CAAS,GAAA;AAGrB,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,GAAG,CAAA;AAC3C,IAAA,IAAI,OAAA,EAAS;AACX,MAAA,YAAA,CAAa,OAAO,CAAA;AACpB,MAAA,IAAA,CAAK,cAAA,CAAe,OAAO,GAAG,CAAA;AAAA,IAChC;AAEA,IAAA,IAAI,SAAA,EAAW;AACb,MAAA,OAAO,IAAA,CAAK,cAAc,QAAQ,CAAA;AAAA,IACpC;AAGA,IAAA,MAAM,OAAA,GAAU,WAAW,MAAM;AAC/B,MAAA,IAAA,CAAK,cAAA,CAAe,OAAO,GAAG,CAAA;AAC9B,MAAA,IAAA,CAAK,cAAc,QAAQ,CAAA;AAAA,IAC7B,CAAA,EAAG,KAAK,UAAU,CAAA;AAElB,IAAA,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,GAAA,EAAK,OAAO,CAAA;AACpC,IAAA,OAAO,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA,EAKQ,cAAc,QAAA,EAAwC;AAC5D,IAAA,MAAM,MAAM,QAAA,CAAS,GAAA;AACrB,IAAA,MAAM,MAAA,GAAS,SAAS,OAAA,EAAQ;AAGhC,IAAA,MAAM,EAAE,QAAO,GAAI,IAAA,CAAK,OAAO,KAAA,CAAM,GAAA,EAAK,MAAA,EAAQ,QAAA,CAAS,OAAA,EAAS;AAAA,MAClE,SAAA,EAAW;AAAA,KACZ,CAAA;AAGD,IAAA,IAAA,CAAK,WAAA,CAAY,YAAA,CAAa,GAAA,EAAK,MAAA,CAAO,OAAO,CAAA;AAGjD,IAAA,MAAM,MAAA,GAAyB;AAAA,MAC7B,GAAA;AAAA,MACA,SAAS,QAAA,CAAS,OAAA;AAAA,MAClB,cAAA,EAAgB,MAAA;AAAA,MAChB,QAAQ,MAAA,CAAO;AAAA,KACjB;AAEA,IAAA,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAA,EAAK,MAAM,CAAA;AAC9B,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,YAAY,GAAA,EAAyC;AACnD,IAAA,OAAO,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,GAAA,EAAmB;AAEhC,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,GAAG,CAAA;AAC3C,IAAA,IAAI,OAAA,EAAS;AACX,MAAA,YAAA,CAAa,OAAO,CAAA;AACpB,MAAA,IAAA,CAAK,cAAA,CAAe,OAAO,GAAG,CAAA;AAAA,IAChC;AAGA,IAAA,IAAA,CAAK,SAAA,CAAU,OAAO,GAAG,CAAA;AACzB,IAAA,IAAA,CAAK,MAAA,CAAO,WAAW,GAAG,CAAA;AAC1B,IAAA,IAAA,CAAK,WAAA,CAAY,cAAc,GAAG,CAAA;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,GAAA,EAA8B;AAC3C,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAClC,IAAA,OAAO,GAAA,EAAK,cAAA,CAAe,WAAA,IAAe,EAAC;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,GAAA,EAA8B;AACvC,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAClC,IAAA,OAAO,GAAA,EAAK,cAAA,CAAe,OAAA,IAAW,EAAC;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,UAAA,CAAW,MAAc,IAAA,EAA0C;AACjE,IAAA,OAAO,IAAA,CAAK,WAAA,CAAY,cAAA,CAAe,IAAA,EAAM,IAA6B,CAAA;AAAA,EAC5E;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAA,CAAoB,KAAa,QAAA,EAA+C;AAE9E,IAAA,MAAM,UAAA,GAAa,IAAA,CAAK,WAAA,CAAY,cAAA,CAAe,GAAA,EAAK,SAAS,IAAA,GAAO,CAAA,EAAG,QAAA,CAAS,SAAA,GAAY,CAAC,CAAA;AACjG,IAAA,IAAI,YAAY,OAAO,UAAA;AAGvB,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAClC,IAAA,IAAI,CAAC,KAAK,OAAO,MAAA;AAEjB,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,aAAA,GAAiC;AAC/B,IAAA,OAAO,IAAA,CAAK,WAAA,CAAY,IAAA,CAAK,EAAE,CAAA;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA,EAKA,cAAA,GAA2B;AACzB,IAAA,OAAO,IAAA,CAAK,YAAY,cAAA,EAAe;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAA,GAA6B;AAC3B,IAAA,OAAO,IAAA,CAAK,YAAY,gBAAA,EAAiB;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAKA,YAAA,GAAyB;AACvB,IAAA,OAAO,IAAA,CAAK,YAAY,YAAA,EAAa;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,UAAA,EAAqC;AAC7C,IAAA,OAAO,IAAA,CAAK,WAAA,CAAY,SAAA,CAAU,UAAU,CAAA;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,oBAAA,CAAqB,UAAwB,QAAA,EAAuC;AAClF,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,QAAA,CAAS,IAAI,CAAA,IAAK,EAAA;AACrC,IAAA,MAAM,UAAA,GAAa,IAAA,CAAK,SAAA,CAAU,CAAA,EAAG,SAAS,SAAS,CAAA;AAGvD,IAAA,MAAM,WAAA,GAAc,UAAA,CAAW,KAAA,CAAM,UAAU,CAAA;AAC/C,IAAA,MAAM,MAAA,GAAS,WAAA,GAAc,WAAA,CAAY,CAAC,CAAA,GAAI,EAAA;AAG9C,IAAA,MAAM,WAAA,GAAc,MAAA,CAAO,MAAA,GAAS,CAAA,GAAI,MAAA,GACtC,UAAA,CAAW,MAAA,GAAS,CAAA,GAAI,UAAA,CAAW,UAAA,CAAW,MAAA,GAAS,CAAC,CAAA,GAAI,MAAA;AAG9D,IAAA,MAAM,WAAA,GAAc,IAAA,CAAK,oBAAA,CAAqB,KAAA,EAAO,QAAQ,CAAA;AAE7D,IAAA,OAAO;AAAA,MACL,WAAA;AAAA,MACA,gBAAA,EAAkB,WAAA;AAAA,MAClB,MAAA;AAAA,MACA,IAAA;AAAA,MACA,UAAU,EAAE,IAAA,EAAM,SAAS,IAAA,EAAM,SAAA,EAAW,SAAS,SAAA,EAAU;AAAA,MAC/D,YAAA,EAAc,IAAA,CAAK,gBAAA,CAAiB,KAAA,EAAO,QAAQ,CAAA;AAAA,MACnD,eAAA,EAAiB,IAAA,CAAK,iBAAA,CAAkB,KAAA,EAAO,SAAS,IAAI;AAAA,KAC9D;AAAA,EACF;AAAA,EAEQ,oBAAA,CAAqB,OAAiB,QAAA,EAAiC;AAC7E,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,IAAI,YAAA,GAAe,EAAA;AACnB,IAAA,IAAI,cAAA,GAAiB,EAAA;AAErB,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,IAAK,QAAA,CAAS,MAAM,CAAA,EAAA,EAAK;AACvC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,MAAM,OAAA,GAAU,KAAK,IAAA,EAAK;AAG1B,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AAGxC,MAAA,IAAI,OAAA,CAAQ,KAAA,CAAM,eAAe,CAAA,EAAG;AAClC,QAAA,YAAA,GAAe,QAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,eAAe,CAAA,EAAG;AACzC,QAAA,YAAA,GAAe,QAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,iBAAiB,CAAA,EAAG;AAC3C,QAAA,YAAA,GAAe,UAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,kBAAkB,CAAA,EAAG;AAC5C,QAAA,YAAA,GAAe,WAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,eAAe,CAAA,EAAG;AACzC,QAAA,YAAA,GAAe,QAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,aAAa,CAAA,EAAG;AACvC,QAAA,YAAA,GAAe,MAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,mBAAmB,CAAA,EAAG;AAC7C,QAAA,YAAA,GAAe,UAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB,CAAA,MAAA,IAAW,OAAA,CAAQ,KAAA,CAAM,cAAc,CAAA,EAAG;AACxC,QAAA,YAAA,GAAe,OAAA;AACf,QAAA,cAAA,GAAiB,EAAA;AAAA,MACnB;AAGA,MAAA,IAAI,OAAA,KAAY,WAAW,cAAA,GAAiB,OAAA;AAAA,WAAA,IACnC,OAAA,KAAY,YAAY,cAAA,GAAiB,QAAA;AAAA,WAAA,IACzC,QAAQ,UAAA,CAAW,iBAAiB,CAAA,IAAK,OAAA,KAAY,SAAS,cAAA,GAAiB,KAAA;AAAA,WAAA,IAC/E,QAAQ,UAAA,CAAW,kBAAkB,CAAA,IAAK,OAAA,KAAY,UAAU,cAAA,GAAiB,MAAA;AAAA,WAAA,IACjF,OAAA,KAAY,gBAAgB,cAAA,GAAiB,WAAA;AAAA,WAAA,IAC7C,OAAA,KAAY,cAAc,cAAA,GAAiB,UAAA;AAAA,WAAA,IAC3C,OAAA,KAAY,cAAc,cAAA,GAAiB,UAAA;AAAA,WAAA,IAC3C,OAAA,KAAY,eAAe,cAAA,GAAiB,WAAA;AAAA,IACvD;AAGA,IAAA,MAAM,WAAA,GAAc,KAAA,CAAM,QAAA,CAAS,IAAI,CAAA,IAAK,EAAA;AAC5C,IAAA,MAAM,YAAA,GAAe,WAAA,CAAY,SAAA,CAAU,CAAA,EAAG,SAAS,SAAS,CAAA;AAChE,IAAA,IAAI,YAAA,CAAa,KAAA,CAAM,OAAO,CAAA,EAAG;AAC/B,MAAA,OAAO,iBAAA;AAAA,IACT;AAGA,IAAA,IAAI,UAAA,KAAe,GAAG,OAAO,WAAA;AAC7B,IAAA,IAAI,UAAA,KAAe,CAAA,IAAK,CAAC,YAAA,EAAc,OAAO,QAAA;AAE9C,IAAA,QAAQ,YAAA;AAAc,MACpB,KAAK,QAAA;AACH,QAAA,IAAI,cAAA,KAAmB,aAAa,OAAO,YAAA;AAC3C,QAAA,IAAI,cAAA,KAAmB,aAAa,OAAO,cAAA;AAC3C,QAAA,OAAO,cAAA;AAAA,MACT,KAAK,UAAA;AACH,QAAA,QAAQ,cAAA;AAAgB,UACtB,KAAK,OAAA;AAAS,YAAA,OAAO,gBAAA;AAAA,UACrB,KAAK,QAAA;AAAU,YAAA,OAAO,iBAAA;AAAA,UACtB,KAAK,KAAA;AAAO,YAAA,OAAO,cAAA;AAAA,UACnB,KAAK,MAAA;AAAQ,YAAA,OAAO,eAAA;AAAA,UACpB,KAAK,WAAA;AAAa,YAAA,OAAO,oBAAA;AAAA,UACzB,KAAK,UAAA;AAAY,YAAA,OAAO,mBAAA;AAAA,UACxB,KAAK,UAAA;AAAY,YAAA,OAAO,mBAAA;AAAA,UACxB;AAAS,YAAA,OAAO,UAAA;AAAA;AAClB,MACF,KAAK,WAAA;AACH,QAAA,OAAO,WAAA;AAAA,MACT,KAAK,QAAA;AACH,QAAA,OAAO,QAAA;AAAA,MACT,KAAK,MAAA;AACH,QAAA,OAAO,MAAA;AAAA,MACT,KAAK,UAAA;AACH,QAAA,OAAO,UAAA;AAAA,MACT,KAAK,OAAA;AACH,QAAA,OAAO,OAAA;AAAA,MACT;AACE,QAAA,OAAO,QAAA;AAAA;AACX,EACF;AAAA,EAEQ,gBAAA,CAAiB,OAAiB,QAAA,EAAwC;AAChF,IAAA,KAAA,IAAS,CAAA,GAAI,QAAA,CAAS,IAAA,EAAM,CAAA,IAAK,GAAG,CAAA,EAAA,EAAK;AACvC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,MAAM,OAAA,GAAU,KAAK,IAAA,EAAK;AAE1B,MAAA,MAAM,WAAA,GAAc,OAAA,CAAQ,KAAA,CAAM,iBAAiB,CAAA;AACnD,MAAA,IAAI,WAAA,EAAa,OAAO,WAAA,CAAY,CAAC,CAAA;AAErC,MAAA,MAAM,aAAA,GAAgB,OAAA,CAAQ,KAAA,CAAM,mBAAmB,CAAA;AACvD,MAAA,IAAI,aAAA,EAAe,OAAO,aAAA,CAAc,CAAC,CAAA;AAEzC,MAAA,MAAM,WAAA,GAAc,OAAA,CAAQ,KAAA,CAAM,iBAAiB,CAAA;AACnD,MAAA,IAAI,WAAA,EAAa,OAAO,WAAA,CAAY,CAAC,CAAA;AAAA,IACvC;AAEA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEQ,iBAAA,CAAkB,OAAiB,OAAA,EAA0B;AACnE,IAAA,IAAI,UAAA,GAAa,CAAA;AAEjB,IAAA,KAAA,IAAS,CAAA,GAAI,OAAA,EAAS,CAAA,IAAK,CAAA,EAAG,CAAA,EAAA,EAAK;AACjC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,EAAG,MAAK,IAAK,EAAA;AACjC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AAExC,MAAA,IAAA,CAAK,KAAK,UAAA,CAAW,kBAAkB,KAAK,IAAA,KAAS,QAAA,KAAa,cAAc,CAAA,EAAG;AACjF,QAAA,OAAO,IAAA;AAAA,MACT;AACA,MAAA,IAAA,CAAK,KAAK,UAAA,CAAW,iBAAiB,KAAK,IAAA,KAAS,OAAA,KAAY,cAAc,CAAA,EAAG;AAC/E,QAAA,OAAO,KAAA;AAAA,MACT;AAAA,IACF;AAEA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,iBAAA,CAAkB,UAAwB,QAAA,EAA4B;AACpE,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,QAAA,CAAS,IAAI,CAAA;AAChC,IAAA,IAAI,CAAC,MAAM,OAAO,EAAA;AAGlB,IAAA,IAAI,QAAQ,QAAA,CAAS,SAAA;AACrB,IAAA,IAAI,MAAM,QAAA,CAAS,SAAA;AAEnB,IAAA,OAAO,KAAA,GAAQ,KAAK,MAAA,CAAO,IAAA,CAAK,KAAK,KAAA,GAAQ,CAAC,CAAA,IAAK,EAAE,CAAA,EAAG;AACtD,MAAA,KAAA,EAAA;AAAA,IACF;AACA,IAAA,OAAO,GAAA,GAAM,KAAK,MAAA,IAAU,MAAA,CAAO,KAAK,IAAA,CAAK,GAAG,CAAA,IAAK,EAAE,CAAA,EAAG;AACxD,MAAA,GAAA,EAAA;AAAA,IACF;AAEA,IAAA,OAAO,IAAA,CAAK,SAAA,CAAU,KAAA,EAAO,GAAG,CAAA;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAKA,sBAAA,CAAuB,UAAwB,QAAA,EAAuC;AACpF,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,QAAA,CAAS,IAAI,CAAA;AAChC,IAAA,IAAI,CAAC,MAAM,OAAO,MAAA;AAElB,IAAA,IAAI,QAAQ,QAAA,CAAS,SAAA;AACrB,IAAA,IAAI,MAAM,QAAA,CAAS,SAAA;AAEnB,IAAA,OAAO,KAAA,GAAQ,KAAK,MAAA,CAAO,IAAA,CAAK,KAAK,KAAA,GAAQ,CAAC,CAAA,IAAK,EAAE,CAAA,EAAG;AACtD,MAAA,KAAA,EAAA;AAAA,IACF;AACA,IAAA,OAAO,GAAA,GAAM,KAAK,MAAA,IAAU,MAAA,CAAO,KAAK,IAAA,CAAK,GAAG,CAAA,IAAK,EAAE,CAAA,EAAG;AACxD,MAAA,GAAA,EAAA;AAAA,IACF;AAEA,IAAA,IAAI,KAAA,KAAU,KAAK,OAAO,MAAA;AAE1B,IAAA,OAAO;AAAA,MACL,OAAO,EAAE,IAAA,EAAM,QAAA,CAAS,IAAA,EAAM,WAAW,KAAA,EAAM;AAAA,MAC/C,KAAK,EAAE,IAAA,EAAM,QAAA,CAAS,IAAA,EAAM,WAAW,GAAA;AAAI,KAC7C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,OAAO,QAAQ,GAAA,EAA4B;AACzC,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,EAAE,IAAA,EAAM,GAAA,CAAI,OAAO,CAAA,EAAG,SAAA,EAAW,GAAA,CAAI,MAAA,GAAS,CAAA,EAAE;AAAA,MACvD,GAAA,EAAK,EAAE,IAAA,EAAM,GAAA,CAAI,UAAU,CAAA,EAAG,SAAA,EAAW,GAAA,CAAI,SAAA,GAAY,CAAA;AAAE,KAC7D;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,cAAc,QAAA,EAAsD;AACzE,IAAA,OAAO;AAAA,MACL,IAAA,EAAM,SAAS,IAAA,GAAO,CAAA;AAAA,MACtB,MAAA,EAAQ,SAAS,SAAA,GAAY;AAAA,KAC/B;AAAA,EACF;AACF;;;AC9aA,IAAM,kBAAA,GAAqB;AAAA,EACzB,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,qBAAA;AAC1B,CAAA;AAEA,IAAM,eAAA,GAAkB;AAAA,EACtB,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,4BAAA,EAA6B;AAAA,EACrD,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,6BAAA,EAA8B;AAAA,EACxD,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,sBAAA,EAAuB;AAAA,EAC7C,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,uBAAA,EAAwB;AAAA,EAC9C,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,0BAAA,EAA2B;AAAA,EACvD,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,iBAAA,EAAkB;AAAA,EAC1C,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,0BAAA,EAA2B;AAAA,EACjD,EAAE,KAAA,EAAO,WAAA,EAAa,GAAA,EAAK,uBAAA,EAAwB;AAAA,EACnD,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,oBAAA,EAAqB;AAAA,EAC5C,EAAE,KAAA,EAAO,SAAA,EAAW,GAAA,EAAK,gBAAA,EAAiB;AAAA,EAC1C,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,cAAA,EAAe;AAAA,EACtC,EAAE,KAAA,EAAO,SAAA,EAAW,GAAA,EAAK,2BAAA;AAC3B,CAAA;AAEA,IAAM,eAAA,GAAkB;AAAA,EACtB,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,mBAAA,EAAoB;AAAA,EAChD,EAAE,KAAA,EAAO,WAAA,EAAa,GAAA,EAAK,yBAAA;AAC7B,CAAA;AAEA,IAAM,iBAAA,GAAoB;AAAA,EACxB,EAAE,KAAA,EAAO,aAAA,EAAe,GAAA,EAAK,sBAAA,EAAuB;AAAA,EACpD,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,mBAAA,EAAoB;AAAA,EAC5C,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,kBAAA,EAAmB;AAAA,EAC1C,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,sBAAA,EAAuB;AAAA,EAC/C,EAAE,KAAA,EAAO,eAAA,EAAiB,GAAA,EAAK,eAAA,EAAgB;AAAA,EAC/C,EAAE,KAAA,EAAO,gBAAA,EAAkB,GAAA,EAAK,gBAAA,EAAiB;AAAA,EACjD,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,qBAAA,EAAsB;AAAA,EAClD,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,sBAAA,EAAuB;AAAA,EACjD,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,uBAAA,EAAwB;AAAA,EAClD,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,yBAAA,EAA0B;AAAA,EACtD,EAAE,KAAA,EAAO,eAAA,EAAiB,GAAA,EAAK,wBAAA;AACjC,CAAA;AAcA,IAAM,iBAAA,GAAoB;AAAA,EACxB,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,0BAAA,EAA2B;AAAA,EACrD,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,oBAAA,EAAqB;AAAA,EACjD,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,aAAA,EAAc;AAAA,EACtC,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,eAAA,EAAgB;AAAA,EACvC,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,wBAAA,EAAyB;AAAA,EACjD,EAAE,KAAA,EAAO,aAAA,EAAe,GAAA,EAAK,kBAAA;AAC/B,CAAA;AAEA,IAAM,iBAAA,GAAoB;AAAA,EACxB,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,gCAAA,EAAiC;AAAA,EAC3D,EAAE,KAAA,EAAO,YAAA,EAAc,GAAA,EAAK,eAAA,EAAgB;AAAA,EAC5C,EAAE,KAAA,EAAO,wBAAA,EAA0B,GAAA,EAAK,wBAAA;AAC1C,CAAA;AAEA,IAAM,mBAAA,GAAsB;AAAA,EAC1B,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,sBAAA,EAAuB;AAAA,EAC/C,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,wBAAA,EAAyB;AAAA,EACjD,EAAE,KAAA,EAAO,SAAA,EAAW,GAAA,EAAK,qBAAA,EAAsB;AAAA,EAC/C,EAAE,KAAA,EAAO,KAAA,EAAO,GAAA,EAAK,aAAA,EAAc;AAAA,EACnC,EAAE,KAAA,EAAO,IAAA,EAAM,GAAA,EAAK,YAAA,EAAa;AAAA,EACjC,EAAE,KAAA,EAAO,KAAA,EAAO,GAAA,EAAK,kBAAA,EAAmB;AAAA,EACxC,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,cAAA,EAAe;AAAA,EACrC,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,eAAA,EAAgB;AAAA,EACvC,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,YAAA;AACxB,CAAA;AAEA,IAAM,sBAAA,GAAyB;AAAA,EAC7B,EAAE,KAAA,EAAO,KAAA,EAAO,GAAA,EAAK,8BAAA,EAA+B;AAAA,EACpD,EAAE,KAAA,EAAO,QAAA,EAAU,GAAA,EAAK,+BAAA,EAAgC;AAAA,EACxD,EAAE,KAAA,EAAO,SAAA,EAAW,GAAA,EAAK,6BAAA,EAA8B;AAAA,EACvD,EAAE,KAAA,EAAO,SAAA,EAAW,GAAA,EAAK,6BAAA,EAA8B;AAAA,EACvD,GAAG;AACL,CAAA;AAEA,IAAM,iBAAA,GAAoB;AAAA,EACxB,EAAE,KAAA,EAAO,UAAA,EAAY,GAAA,EAAK,wBAAA,EAAyB;AAAA,EACnD,EAAE,KAAA,EAAO,OAAA,EAAS,GAAA,EAAK,aAAA,EAAc;AAAA,EACrC,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,gBAAA,EAAiB;AAAA,EACvC,EAAE,KAAA,EAAO,MAAA,EAAQ,GAAA,EAAK,kBAAA;AACxB,CAAA;AAMA,IAAM,aAAA,GAAqC;AAAA,EACzC,EAAE,OAAO,QAAA,EAAU,IAAA,EAAM,QAAQ,MAAA,EAAQ,kBAAA,EAAoB,eAAe,kCAAA,EAAmC;AAAA,EAC/G,EAAE,OAAO,KAAA,EAAO,IAAA,EAAM,QAAQ,MAAA,EAAQ,eAAA,EAAiB,eAAe,uBAAA,EAAwB;AAAA,EAC9F,EAAE,OAAO,SAAA,EAAW,IAAA,EAAM,QAAQ,MAAA,EAAQ,gBAAA,EAAkB,eAAe,6BAAA,EAA8B;AAAA,EACzG,EAAE,OAAO,SAAA,EAAW,IAAA,EAAM,QAAQ,MAAA,EAAQ,eAAA,EAAiB,eAAe,eAAA,EAAgB;AAAA,EAC1F,EAAE,OAAO,MAAA,EAAQ,IAAA,EAAM,QAAQ,MAAA,EAAQ,+BAAA,EAAiC,eAAe,oBAAA,EAAqB;AAAA,EAC5G,EAAE,OAAO,WAAA,EAAa,IAAA,EAAM,QAAQ,MAAA,EAAQ,6BAAA,EAA+B,eAAe,iBAAA,EAAkB;AAAA,EAC5G,EAAE,OAAO,UAAA,EAAY,IAAA,EAAM,QAAQ,MAAA,EAAQ,eAAA,EAAiB,eAAe,oDAAA,EAAqD;AAAA,EAChI,EAAE,OAAO,MAAA,EAAQ,IAAA,EAAM,QAAQ,MAAA,EAAQ,eAAA,EAAiB,eAAe,mBAAA,EAAoB;AAAA,EAC3F,EAAE,OAAO,MAAA,EAAQ,IAAA,EAAM,QAAQ,MAAA,EAAQ,aAAA,EAAe,eAAe,mBAAA,EAAoB;AAAA,EACzF,EAAE,KAAA,EAAO,MAAA,EAAQ,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,oBAAA,EAAsB,aAAA,EAAe,wCAAA,EAA0C,UAAA,EAAY,cAAA,EAAgB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC9K,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,sBAAA,EAAwB,aAAA,EAAe,6BAAA,EAA+B,UAAA,EAAY,qBAAA,EAAuB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC3K,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,mBAAA,EAAqB,aAAA,EAAe,0BAAA,EAA4B,UAAA,EAAY,aAAA,EAAe,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC7J,EAAE,KAAA,EAAO,UAAA,EAAY,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,gBAAA,EAAkB,aAAA,EAAe,2BAAA,EAA6B,UAAA,EAAY,kBAAA,EAAoB,gBAAA,EAAkB,SAAA;AAC7J,CAAA;AAMA,IAAM,iBAAA,GAAyC;AAAA,EAC7C,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,gBAAA,EAAkB,aAAA,EAAe,qCAAA,EAAuC,UAAA,EAAY,gBAAA,EAAkB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC5K,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,sBAAA,EAAwB,aAAA,EAAe,gCAAA,EAAkC,UAAA,EAAY,sBAAA,EAAwB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EACnL,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,mBAAA,EAAqB,aAAA,EAAe,0BAAA,EAA4B,UAAA,EAAY,sBAAA,EAAwB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC1K,EAAE,KAAA,EAAO,OAAA,EAAS,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,gBAAA,EAAkB,aAAA,EAAe,yBAAA,EAA2B,UAAA,EAAY,wCAAA,EAA0C,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC1L,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,mBAAA,EAAqB,aAAA,EAAe,8BAAA,EAAgC,UAAA,EAAY,yCAAA,EAA2C,gBAAA,EAAkB,SAAA,EAAU;AAAA,EACpM,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,WAAA,EAAa,aAAA,EAAe,uCAAA,EAAyC,UAAA,EAAY,mDAAA,EAAqD,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC5M,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,WAAA,EAAa,aAAA,EAAe,wCAAA,EAA0C,UAAA,EAAY,mDAAA,EAAqD,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC7M,EAAE,KAAA,EAAO,MAAA,EAAQ,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,YAAA,EAAc,aAAA,EAAe,sCAAA,EAAwC,UAAA,EAAY,oDAAA,EAAsD,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAC9M,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,QAAQ,mBAAA,EAAqB,aAAA,EAAe,+BAAA,EAAiC,UAAA,EAAY,OAAA,EAAQ;AAAA,EACnI,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,eAAA,EAAiB,aAAA,EAAe,wBAAA,EAA0B,UAAA,EAAY,iBAAA,EAAmB,gBAAA,EAAkB,SAAA,EAAU;AAAA,EAClK,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,MAAA,EAAQ,eAAA,EAAiB,aAAA,EAAe,4BAAA,EAA8B,UAAA,EAAY,iBAAA,EAAmB,gBAAA,EAAkB,SAAA;AAC9J,CAAA;AAMA,IAAM,cAAA,GAAoC;AAAA,EACxC,KAAA,EAAO,QAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,qBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;;AAAA;AAAA,CAAA,CAAA;AAAA,EAKZ,gBAAA,EAAkB,SAAA;AAAA,EAClB,SAAA,EAAW;AACb,CAAA;AAEA,IAAM,cAAA,GAAoC;AAAA,EACxC,KAAA,EAAO,QAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,qBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EAQZ,gBAAA,EAAkB;AACpB,CAAA;AAEA,IAAM,gBAAA,GAAsC;AAAA,EAC1C,KAAA,EAAO,UAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,uBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EA4BZ,gBAAA,EAAkB;AACpB,CAAA;AAEA,IAAM,YAAA,GAAkC;AAAA,EACtC,KAAA,EAAO,MAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,sBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EAGZ,gBAAA,EAAkB;AACpB,CAAA;AAEA,IAAM,YAAA,GAAkC;AAAA,EACtC,KAAA,EAAO,MAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,uBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;AAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EAKZ,gBAAA,EAAkB;AACpB,CAAA;AAEA,IAAM,iBAAA,GAAuC;AAAA,EAC3C,KAAA,EAAO,YAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,2BAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EAQZ,gBAAA,EAAkB;AACpB,CAAA;AAEA,IAAM,gBAAA,GAAsC;AAAA,EAC1C,KAAA,EAAO,UAAA;AAAA,EACP,IAAA,EAAM,SAAA;AAAA,EACN,MAAA,EAAQ,wBAAA;AAAA,EACR,UAAA,EAAY,CAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,CAAA,CAAA;AAAA,EAaZ,gBAAA,EAAkB;AACpB,CAAA;AAMO,IAAM,wBAAN,MAA4B;AAAA,EACjC,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,kBAAA,CAAmB,UAAwB,QAAA,EAAyC;AAClF,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,eAAA,CAAgB,oBAAA,CAAqB,UAAU,QAAQ,CAAA;AAC5E,IAAA,MAAM,QAA6B,EAAC;AAGpC,IAAA,QAAQ,QAAQ,WAAA;AAAa,MAC3B,KAAK,WAAA;AACH,QAAA,KAAA,CAAM,KAAK,cAAc,CAAA;AACzB,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,kBAAA,CAAmB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACzC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,QAAA;AACH,QAAA,KAAA,CAAM,KAAK,cAAc,CAAA;AACzB,QAAA,KAAA,CAAM,KAAK,gBAAgB,CAAA;AAC3B,QAAA,KAAA,CAAM,KAAK,YAAY,CAAA;AACvB,QAAA,KAAA,CAAM,KAAK,YAAY,CAAA;AACvB,QAAA,KAAA,CAAM,KAAK,iBAAiB,CAAA;AAC5B,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,eAAA,CAAgB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACtC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,QAAA;AAAA,MACL,KAAK,cAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,eAAA,CAAgB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACtC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,UAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAA,CAAkB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACxC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,gBAAA;AAAA,MACL,KAAK,iBAAA;AAEH,QAAA;AAAA,MAEF,KAAK,cAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,mBAAA,CAAoB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UAC1C,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAA,CAAkB,MAAA,CAAO,CAAA,CAAA,KAAK,CAAA,CAAE,KAAA,KAAU,KAAA,IAAS,CAAA,CAAE,KAAA,KAAU,QAAQ,CAAC,CAAA;AACtF,QAAA;AAAA,MAEF,KAAK,eAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,sBAAA,CAAuB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UAC7C,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAiB,CAAA;AAC/B,QAAA;AAAA,MAEF,KAAK,mBAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAA,CAAkB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACxC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,mBAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAA,CAAkB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACxC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,UAAA;AACH,QAAA,KAAA,CAAM,KAAK,gBAAgB,CAAA;AAC3B,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAA,CAAkB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UACxC,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA;AAAA,MAEF,KAAK,iBAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,aAAa,CAAA;AAC3B,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,wBAAA,EAA0B,CAAA;AAC7C,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,oBAAA,EAAsB,CAAA;AACzC,QAAA;AAAA,MAEF,KAAK,YAAA;AAAA,MACL,KAAK,WAAA;AAAA,MACL,KAAK,QAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,mBAAA,CAAoB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UAC1C,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AACH,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,iBAAiB,CAAA;AAC/B,QAAA;AAAA,MAEF;AAEE,QAAA,KAAA,CAAM,IAAA,CAAK,GAAG,mBAAA,CAAoB,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,UAC1C,OAAO,CAAA,CAAE,KAAA;AAAA,UACT,IAAA,EAAM,SAAA;AAAA,UACN,QAAQ,CAAA,CAAE;AAAA,UACV,CAAC,CAAA;AAAA;AAIP,IAAA,IAAI,OAAA,CAAQ,qBAAqB,GAAA,EAAK;AACpC,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,aAAa,CAAA;AAC3B,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,wBAAA,EAA0B,CAAA;AAC7C,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,oBAAA,EAAsB,CAAA;AAAA,IAC3C;AAEA,IAAA,IAAI,OAAA,CAAQ,qBAAqB,GAAA,EAAK;AACpC,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,oBAAA,CAAqB,OAAO,CAAC,CAAA;AAAA,IAClD;AAEA,IAAA,IAAI,OAAA,CAAQ,qBAAqB,GAAA,EAAK;AACpC,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,wBAAA,EAA0B,CAAA;AAAA,IAC/C;AAGA,IAAA,IAAI,CAAC,cAAc,cAAA,EAAgB,eAAA,EAAiB,WAAW,CAAA,CAAE,QAAA,CAAS,OAAA,CAAQ,WAAW,CAAA,EAAG;AAC9F,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,oBAAA,EAAsB,CAAA;AACzC,MAAA,KAAA,CAAM,IAAA,CAAK,GAAG,IAAA,CAAK,sBAAA,EAAwB,CAAA;AAAA,IAC7C;AAGA,IAAA,IAAI,QAAQ,MAAA,EAAQ;AAClB,MAAA,MAAM,MAAA,GAAS,OAAA,CAAQ,MAAA,CAAO,WAAA,EAAY;AAC1C,MAAA,OAAO,KAAA,CAAM,MAAA;AAAA,QAAO,CAAA,IAAA,KAClB,IAAA,CAAK,KAAA,CAAM,WAAA,EAAY,CAAE,UAAA,CAAW,MAAM,CAAA,IAC1C,IAAA,CAAK,UAAA,EAAY,WAAA,EAAY,CAAE,WAAW,MAAM;AAAA,OAClD;AAAA,IACF;AAEA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA,EAEQ,wBAAA,GAAgD;AACtD,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,eAAA,CAAgB,YAAA,EAAa;AAChD,IAAA,OAAO,KAAA,CAAM,IAAI,CAAA,IAAA,MAAS;AAAA,MACxB,KAAA,EAAO,IAAA;AAAA,MACP,IAAA,EAAM,MAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV,CAAE,CAAA;AAAA,EACJ;AAAA,EAEQ,oBAAA,GAA4C;AAClD,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,eAAA,CAAgB,cAAA,EAAe;AACrD,IAAA,OAAO,QAAA,CAAS,IAAI,CAAA,IAAA,MAAS;AAAA,MAC3B,KAAA,EAAO,IAAA;AAAA,MACP,IAAA,EAAM,QAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV,CAAE,CAAA;AAAA,EACJ;AAAA,EAEQ,sBAAA,GAA8C;AACpD,IAAA,MAAM,SAAA,GAAY,IAAA,CAAK,eAAA,CAAgB,gBAAA,EAAiB;AACxD,IAAA,OAAO,SAAA,CAAU,IAAI,CAAA,IAAA,MAAS;AAAA,MAC5B,KAAA,EAAO,IAAA;AAAA,MACP,IAAA,EAAM,UAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV,CAAE,CAAA;AAAA,EACJ;AAAA,EAEQ,qBAAqB,OAAA,EAAyE;AACpG,IAAA,MAAM,QAA6B,EAAC;AAGpC,IAAA,KAAA,CAAM,IAAA;AAAA,MACJ,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,QAAQ,YAAA,EAAc,UAAA,EAAY,iBAAA,EAAmB,gBAAA,EAAkB,SAAA,EAAU;AAAA,MACtH,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,QAAQ,iBAAA,EAAmB,UAAA,EAAY,iBAAA,EAAmB,gBAAA,EAAkB,SAAA,EAAU;AAAA,MAC3H,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,UAAA,EAAY,QAAQ,kBAAA,EAAmB;AAAA,MAC7D,EAAE,KAAA,EAAO,OAAA,EAAS,IAAA,EAAM,UAAA,EAAY,QAAQ,gBAAA,EAAiB;AAAA,MAC7D,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,QAAQ,iBAAA,EAAmB,UAAA,EAAY,wBAAA,EAA0B,gBAAA,EAAkB,SAAA;AAAU,KACpI;AAGA,IAAA,KAAA,CAAM,IAAA;AAAA,MACJ,EAAE,KAAA,EAAO,IAAA,EAAM,IAAA,EAAM,UAAA,EAAY,QAAQ,cAAA,EAAe;AAAA,MACxD,EAAE,KAAA,EAAO,SAAA,EAAW,IAAA,EAAM,UAAA,EAAY,QAAQ,SAAA,EAAU;AAAA,MACxD,EAAE,KAAA,EAAO,SAAA,EAAW,IAAA,EAAM,UAAA,EAAY,QAAQ,SAAA,EAAU;AAAA,MACxD,EAAE,KAAA,EAAO,OAAA,EAAS,IAAA,EAAM,UAAA,EAAY,QAAQ,OAAA,EAAQ;AAAA,MACpD,EAAE,KAAA,EAAO,MAAA,EAAQ,IAAA,EAAM,UAAA,EAAY,QAAQ,MAAA;AAAO,KACpD;AAGA,IAAA,KAAA,CAAM,IAAA;AAAA,MACJ,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,UAAA,EAAY,QAAQ,eAAA,EAAgB;AAAA,MAC7D,EAAE,KAAA,EAAO,UAAA,EAAY,IAAA,EAAM,UAAA,EAAY,QAAQ,iBAAA,EAAkB;AAAA,MACjE,EAAE,KAAA,EAAO,UAAA,EAAY,IAAA,EAAM,UAAA,EAAY,QAAQ,gBAAA;AAAiB,KAClE;AAGA,IAAA,IAAI,QAAQ,YAAA,EAAc;AACxB,MAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,SAAA,CAAU,QAAQ,YAAY,CAAA;AAClE,MAAA,KAAA,MAAW,SAAS,MAAA,EAAQ;AAC1B,QAAA,KAAA,CAAM,IAAA,CAAK;AAAA,UACT,OAAO,KAAA,CAAM,IAAA;AAAA,UACb,IAAA,EAAM,OAAA;AAAA,UACN,MAAA,EAAQ,KAAA,CAAM,MAAA,IAAU,KAAA,CAAM;AAAA,SAC/B,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA,EAEQ,wBAAA,GAAgD;AACtD,IAAA,OAAO;AAAA,MACL,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,SAAA,EAAW,QAAQ,sBAAA,EAAuB;AAAA,MACnE,EAAE,KAAA,EAAO,WAAA,EAAa,IAAA,EAAM,SAAA,EAAW,QAAQ,yBAAA,EAA0B;AAAA,MACzE,EAAE,KAAA,EAAO,SAAA,EAAW,IAAA,EAAM,SAAA,EAAW,QAAQ,kBAAA,EAAmB;AAAA,MAChE,EAAE,KAAA,EAAO,WAAA,EAAa,IAAA,EAAM,SAAA,EAAW,QAAQ,yBAAA,EAA0B;AAAA,MACzE,EAAE,KAAA,EAAO,QAAA,EAAU,IAAA,EAAM,SAAA,EAAW,QAAQ,sBAAA,EAAuB;AAAA,MACnE,EAAE,KAAA,EAAO,KAAA,EAAO,IAAA,EAAM,SAAA,EAAW,QAAQ,qCAAA,EAAsC;AAAA,MAC/E,EAAE,KAAA,EAAO,UAAA,EAAY,IAAA,EAAM,SAAA,EAAW,QAAQ,2BAAA,EAA4B;AAAA,MAC1E,EAAE,KAAA,EAAO,YAAA,EAAc,IAAA,EAAM,SAAA,EAAW,QAAQ,oBAAA,EAAqB;AAAA,MACrE,EAAE,KAAA,EAAO,SAAA,EAAW,IAAA,EAAM,SAAA,EAAW,QAAQ,eAAA,EAAiB,UAAA,EAAY,qBAAA,EAAuB,gBAAA,EAAkB,SAAA;AAAU,KAC/H;AAAA,EACF;AACF;;;AC5eA,IAAM,YAAA,GAAuC;AAAA,EAC3C,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQR,GAAA,EAAK,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQL,OAAA,EAAS,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQT,OAAA,EAAS,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQT,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQN,SAAA,EAAW,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQX,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQV,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQN,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQN,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EASN,GAAA,EAAK,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQL,GAAA,EAAK,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQL,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA;AASZ,CAAA;AAMA,IAAM,YAAA,GAAuC;AAAA,EAC3C,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAWR,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAgBR,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EA4BV,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EASN,IAAA,EAAM,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAYN,UAAA,EAAY,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAeZ,aAAA,EAAe,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAWf,cAAA,EAAgB,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAYhB,GAAA,EAAK,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAYL,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAaR,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQR,MAAA,EAAQ,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQR,OAAA,EAAS,CAAA;;AAAA;;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAQT,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAYV,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAWV,QAAA,EAAU,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA;AAAA,EAmBV,SAAA,EAAW,CAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAA;AAYb,CAAA;AAMO,IAAM,mBAAN,MAAuB;AAAA,EAC5B,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,YAAA,CAAa,UAAwB,QAAA,EAAwC;AAC3E,IAAA,MAAM,IAAA,GAAO,IAAA,CAAK,eAAA,CAAgB,iBAAA,CAAkB,UAAU,QAAQ,CAAA;AACtE,IAAA,IAAI,CAAC,MAAM,OAAO,IAAA;AAElB,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,eAAA,CAAgB,sBAAA,CAAuB,UAAU,QAAQ,CAAA;AAG5E,IAAA,IAAI,YAAA,CAAa,IAAI,CAAA,EAAG;AACtB,MAAA,OAAO,EAAE,QAAA,EAAU,YAAA,CAAa,IAAI,GAAG,KAAA,EAAM;AAAA,IAC/C;AAGA,IAAA,IAAI,YAAA,CAAa,IAAI,CAAA,EAAG;AACtB,MAAA,OAAO,EAAE,QAAA,EAAU,YAAA,CAAa,IAAI,GAAG,KAAA,EAAM;AAAA,IAC/C;AAGA,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,IAAI,CAAA;AACnD,IAAA,IAAI,MAAA,EAAQ;AACV,MAAA,OAAO,EAAE,QAAA,EAAU,IAAA,CAAK,iBAAA,CAAkB,MAAM,GAAG,KAAA,EAAM;AAAA,IAC3D;AAGA,IAAA,MAAM,UAAA,GAAa,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,SAAS,GAAG,CAAA;AAC/D,IAAA,MAAM,WAAA,GAAc,IAAA,CAAK,gBAAA,CAAiB,UAAA,EAAY,IAAI,CAAA;AAC1D,IAAA,IAAI,WAAA,EAAa;AACf,MAAA,OAAO,EAAE,QAAA,EAAU,IAAA,CAAK,qBAAA,CAAsB,WAAW,GAAG,KAAA,EAAM;AAAA,IACpE;AAEA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEQ,gBAAA,CACN,SACA,IAAA,EAC2G;AAC3G,IAAA,KAAA,MAAW,OAAO,OAAA,EAAS;AACzB,MAAA,IAAI,GAAA,CAAI,IAAA,KAAS,IAAA,EAAM,OAAO,GAAA;AAC9B,MAAA,IAAI,IAAI,QAAA,EAAU;AAChB,QAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,gBAAA,CAAiB,GAAA,CAAI,UAA4B,IAAI,CAAA;AACxE,QAAA,IAAI,OAAO,OAAO,KAAA;AAAA,MACpB;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEQ,kBAAkB,MAAA,EAAgF;AACxG,IAAA,IAAI,KAAK,CAAA,EAAA,EAAK,MAAA,CAAO,IAAI,CAAA,KAAA,EAAQ,OAAO,IAAI,CAAA;;AAAA,CAAA;AAE5C,IAAA,IAAI,OAAO,IAAA,EAAM;AACf,MAAA,EAAA,IAAM,CAAA,YAAA,EAAe,OAAO,IAAI,CAAA;;AAAA,CAAA;AAAA,IAClC;AAEA,IAAA,IAAI,OAAO,MAAA,EAAQ;AACjB,MAAA,EAAA,IAAM,CAAA,EAAG,OAAO,MAAM;AAAA,CAAA;AAAA,IACxB;AAEA,IAAA,OAAO,EAAA;AAAA,EACT;AAAA,EAEQ,sBACN,MAAA,EACQ;AACR,IAAA,IAAI,KAAK,CAAA,EAAA,EAAK,MAAA,CAAO,IAAI,CAAA,KAAA,EAAQ,OAAO,IAAI,CAAA;;AAAA,CAAA;AAE5C,IAAA,IAAI,OAAO,MAAA,EAAQ;AACjB,MAAA,EAAA,IAAM,CAAA,EAAG,OAAO,MAAM;;AAAA,CAAA;AAAA,IACxB;AAEA,IAAA,IAAI,OAAO,aAAA,EAAe;AACxB,MAAA,EAAA,IAAM,CAAA,EAAG,OAAO,aAAa;;AAAA,CAAA;AAAA,IAC/B;AAEA,IAAA,IAAI,MAAA,CAAO,QAAA,IAAY,MAAA,CAAO,QAAA,CAAS,SAAS,CAAA,EAAG;AACjD,MAAA,MAAM,eAAe,MAAA,CAAO,QAAA;AAG5B,MAAA,MAAM,MAAA,GAAS,YAAA,CAAa,MAAA,CAAO,CAAA,CAAA,KAAK,CAAA,CAAE,IAAA,KAAS,OAAA,IAAW,CAAA,CAAE,IAAA,KAAS,OAAA,IAAW,CAAA,CAAE,IAAA,KAAS,QAAQ,CAAA;AACvG,MAAA,MAAM,SAAS,YAAA,CAAa,MAAA,CAAO,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,OAAO,CAAA;AAC1D,MAAA,MAAM,SAAS,YAAA,CAAa,MAAA,CAAO,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,iBAAiB,CAAA;AAEpE,MAAA,IAAI,MAAA,CAAO,SAAS,CAAA,EAAG;AACrB,QAAA,EAAA,IAAM,eAAA;AACN,QAAA,KAAA,MAAW,SAAS,MAAA,EAAQ;AAC1B,UAAA,MAAM,WAAW,KAAA,CAAM,MAAA,GAAS,CAAA,EAAA,EAAK,KAAA,CAAM,MAAM,CAAA,CAAA,GAAK,EAAA;AACtD,UAAA,EAAA,IAAM,CAAA,IAAA,EAAO,KAAA,CAAM,IAAI,CAAA,EAAA,EAAK,QAAQ;AAAA,CAAA;AAAA,QACtC;AACA,QAAA,EAAA,IAAM,IAAA;AAAA,MACR;AAEA,MAAA,IAAI,MAAA,CAAO,SAAS,CAAA,EAAG;AACrB,QAAA,EAAA,IAAM,eAAA;AACN,QAAA,KAAA,MAAW,SAAS,MAAA,EAAQ;AAC1B,UAAA,EAAA,IAAM,CAAA,IAAA,EAAO,KAAA,CAAM,IAAI,CAAA,EAAA,EAAK,KAAA,CAAM,SAAS,CAAA,GAAA,EAAM,KAAA,CAAM,MAAM,CAAA,CAAA,GAAK,EAAE;AAAA,CAAA;AAAA,QACtE;AACA,QAAA,EAAA,IAAM,IAAA;AAAA,MACR;AAEA,MAAA,IAAI,MAAA,CAAO,SAAS,CAAA,EAAG;AACrB,QAAA,EAAA,IAAM,yBAAA;AACN,QAAA,EAAA,IAAM,MAAA,CAAO,GAAA,CAAI,CAAA,CAAA,KAAK,CAAA,EAAA,EAAK,CAAA,CAAE,IAAI,CAAA,EAAA,CAAI,CAAA,CAAE,IAAA,CAAK,UAAK,CAAA,GAAI,IAAA;AAAA,MACvD;AAAA,IACF;AAEA,IAAA,OAAO,EAAA;AAAA,EACT;AACF;ACpZO,IAAM,oBAAN,MAAwB;AAAA;AAAA,EAErB,WAAA,uBAAkB,GAAA,EAAyC;AAAA;AAAA,EAG3D,YAAA;AAAA;AAAA,EAGA,WAAA,uBAAkB,GAAA,EAAgC;AAAA,EAE1D,YAAY,YAAA,EAA6D;AACvE,IAAA,IAAA,CAAK,YAAA,GAAe,gBAAgB,IAAA,CAAK,mBAAA;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,cAAA,CACJ,WAAA,EACA,MAAA,EACiC;AACjC,IAAA,MAAM,MAAA,GAAiC;AAAA,MACrC,SAAS,EAAC;AAAA,MACV,aAAa,EAAC;AAAA,MACd,eAAA,sBAAqB,GAAA;AAAI,KAC3B;AAEA,IAAA,IAAI,CAAC,MAAA,CAAO,OAAA,IAAW,MAAA,CAAO,OAAA,CAAQ,WAAW,CAAA,EAAG;AAClD,MAAA,OAAO,MAAA;AAAA,IACT;AAEA,IAAA,KAAA,MAAW,UAAA,IAAc,OAAO,OAAA,EAAS;AACvC,MAAA,MAAM,cAAA,GAAiB,MAAM,IAAA,CAAK,aAAA,CAAc,aAAa,UAAU,CAAA;AACvE,MAAA,MAAA,CAAO,OAAA,CAAQ,KAAK,cAAc,CAAA;AAClC,MAAA,MAAA,CAAO,WAAA,CAAY,IAAA,CAAK,GAAG,cAAA,CAAe,WAAW,CAAA;AAGrD,MAAA,KAAA,MAAW,IAAA,IAAQ,eAAe,KAAA,EAAO;AACvC,QAAA,IAAI,IAAA,CAAK,MAAA,IAAU,IAAA,CAAK,kBAAA,EAAoB;AAC1C,UAAA,MAAM,OAAO,IAAA,CAAK,IAAA,CAAK,OAAO,IAAA,IAAQ,IAAA,CAAK,KAAK,IAAA,CAAK,IAAA;AACrD,UAAA,MAAA,CAAO,eAAA,CAAgB,IAAI,IAAA,EAAM;AAAA,YAC/B,IAAA,EAAM,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,IAAA;AAAA,YACrB,MAAM,IAAA,CAAK,IAAA;AAAA,YACX,UAAU,IAAA,CAAK,kBAAA;AAAA,YACf,KAAK,cAAA,CAAe;AAAA,WACrB,CAAA;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,aAAA,CACZ,WAAA,EACA,UAAA,EACyB;AACzB,IAAA,MAAM,cAA+B,EAAC;AACtC,IAAA,MAAM,cAAc,IAAA,CAAK,iBAAA,CAAkB,WAAA,EAAa,UAAA,CAAW,KAAK,KAAK,CAAA;AAE7E,IAAA,MAAM,MAAA,GAAyB;AAAA,MAC7B,eAAA,EAAiB,UAAA;AAAA,MACjB,WAAA;AAAA,MACA,QAAA,EAAU,KAAA;AAAA,MACV,OAAO,EAAC;AAAA,MACR;AAAA,KACF;AAGA,IAAA,MAAM,cAAA,GAAiB,MAAM,IAAA,CAAK,UAAA,CAAW,WAAW,CAAA;AAExD,IAAA,IAAI,CAAC,cAAA,EAAgB;AAEnB,MAAA,WAAA,CAAY,IAAA,CAAK;AAAA,QACf,OAAA,EAAS,CAAA,uBAAA,EAA0B,UAAA,CAAW,IAAA,CAAK,KAAK,CAAA,CAAA,CAAA;AAAA,QACxD,UAAUC,0BAAA,CAAmB,KAAA;AAAA,QAC7B,QAAA,EAAU,WAAW,IAAA,CAAK,QAAA;AAAA,QAC1B,IAAA,EAAM,SAAA;AAAA,QACN,MAAA,EAAQ,qBAAA;AAAA,QACR,IAAA,EAAM;AAAA,UACJ,IAAA,EAAM,mBAAA;AAAA,UACN,UAAA,EAAY,WAAW,IAAA,CAAK,KAAA;AAAA,UAC5B;AAAA;AACF,OACD,CAAA;AACD,MAAA,OAAO,MAAA;AAAA,IACT;AAEA,IAAA,MAAA,CAAO,QAAA,GAAW,IAAA;AAGlB,IAAA,MAAMC,SAAA,GAAU,IAAA,CAAK,UAAA,CAAW,WAAA,EAAa,cAAc,CAAA;AAG3D,IAAA,KAAA,MAAW,IAAA,IAAQ,WAAW,KAAA,EAAO;AACnC,MAAA,MAAM,cAAA,GAAiBA,SAAA,CAAQ,GAAA,CAAI,IAAA,CAAK,KAAK,IAAI,CAAA;AAEjD,MAAA,IAAI,CAAC,cAAA,EAAgB;AAEnB,QAAA,WAAA,CAAY,IAAA,CAAK;AAAA,UACf,OAAA,EAAS,IAAI,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,wBAAA,EAA2B,UAAA,CAAW,KAAK,KAAK,CAAA,CAAA,CAAA;AAAA,UAC3E,UAAUD,0BAAA,CAAmB,KAAA;AAAA,UAC7B,QAAA,EAAU,KAAK,IAAA,CAAK,QAAA;AAAA,UACpB,IAAA,EAAM,SAAA;AAAA,UACN,MAAA,EAAQ,qBAAA;AAAA,UACR,WAAA,EAAa;AAAA,YACX;AAAA,cACE,OAAA,EAAS,CAAA,MAAA,EAAS,UAAA,CAAW,IAAA,CAAK,KAAK,CAAA,WAAA,EAAc,KAAA,CAAM,IAAA,CAAKC,SAAA,CAAQ,MAAM,CAAA,CAAE,IAAA,CAAK,IAAI,KAAK,SAAS,CAAA,CAAA;AAAA,cACvG,QAAA,EAAU,WAAW,IAAA,CAAK;AAAA;AAC5B,WACF;AAAA,UACA,IAAA,EAAM;AAAA,YACJ,IAAA,EAAM,gBAAA;AAAA,YACN,UAAA,EAAY,KAAK,IAAA,CAAK,IAAA;AAAA,YACtB,gBAAA,EAAkB,KAAA,CAAM,IAAA,CAAKA,SAAA,CAAQ,MAAM;AAAA;AAC7C,SACD,CAAA;AAED,QAAA,MAAA,CAAO,MAAM,IAAA,CAAK;AAAA,UAChB,IAAA;AAAA,UACA,MAAA,EAAQ;AAAA,SACT,CAAA;AAAA,MACH,CAAA,MAAO;AACL,QAAA,MAAA,CAAO,MAAM,IAAA,CAAK;AAAA,UAChB,IAAA;AAAA,UACA,MAAA,EAAQ,IAAA;AAAA,UACR,MAAM,cAAA,CAAe,IAAA;AAAA,UACrB,oBAAoB,cAAA,CAAe;AAAA,SACpC,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,UAAA,CAAW,KAAa,MAAA,EAA6C;AAEnE,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAG,CAAA;AACvC,IAAA,IAAI,QAAQ,OAAO,MAAA;AAEnB,IAAA,MAAMA,SAAA,uBAAc,GAAA,EAA4B;AAGhD,IAAA,KAAA,MAAW,MAAA,IAAU,OAAO,QAAA,EAAU;AACpC,MAAAA,SAAA,CAAQ,GAAA,CAAI,MAAA,CAAO,IAAA,CAAK,IAAA,EAAM;AAAA,QAC5B,IAAA,EAAM,OAAO,IAAA,CAAK,IAAA;AAAA,QAClB,IAAA,EAAM,QAAA;AAAA,QACN,QAAA,EAAU,OAAO,IAAA,CAAK,QAAA;AAAA,QACtB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,KAAA,MAAW,IAAA,IAAQ,OAAO,KAAA,EAAO;AAC/B,MAAA,MAAM,IAAA,GAAO,IAAA,CAAK,UAAA,CAAW,IAAA,KAAS,aAAa,MAAA,GAAS,MAAA;AAC5D,MAAAA,SAAA,CAAQ,GAAA,CAAI,IAAA,CAAK,IAAA,CAAK,IAAA,EAAM;AAAA,QAC1B,IAAA,EAAM,KAAK,IAAA,CAAK,IAAA;AAAA,QAChB,IAAA;AAAA,QACA,QAAA,EAAU,KAAK,IAAA,CAAK,QAAA;AAAA,QACpB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,KAAA,MAAW,QAAA,IAAY,OAAO,SAAA,EAAW;AACvC,MAAAA,SAAA,CAAQ,GAAA,CAAI,QAAA,CAAS,IAAA,CAAK,IAAA,EAAM;AAAA,QAC9B,IAAA,EAAM,SAAS,IAAA,CAAK,IAAA;AAAA,QACpB,IAAA,EAAM,UAAA;AAAA,QACN,QAAA,EAAU,SAAS,IAAA,CAAK,QAAA;AAAA,QACxB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,KAAA,MAAW,SAAA,IAAa,OAAO,UAAA,EAAY;AACzC,MAAAA,SAAA,CAAQ,GAAA,CAAI,SAAA,CAAU,IAAA,CAAK,IAAA,EAAM;AAAA,QAC/B,IAAA,EAAM,UAAU,IAAA,CAAK,IAAA;AAAA,QACrB,IAAA,EAAM,WAAA;AAAA,QACN,QAAA,EAAU,UAAU,IAAA,CAAK,QAAA;AAAA,QACzB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,KAAA,MAAW,MAAA,IAAU,OAAO,QAAA,EAAU;AACpC,MAAAA,SAAA,CAAQ,GAAA,CAAI,MAAA,CAAO,IAAA,CAAK,IAAA,EAAM;AAAA,QAC5B,IAAA,EAAM,OAAO,IAAA,CAAK,IAAA;AAAA,QAClB,IAAA,EAAM,QAAA;AAAA,QACN,QAAA,EAAU,OAAO,IAAA,CAAK,QAAA;AAAA,QACtB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,KAAA,MAAW,IAAA,IAAQ,OAAO,KAAA,EAAO;AAC/B,MAAAA,SAAA,CAAQ,GAAA,CAAI,IAAA,CAAK,IAAA,CAAK,IAAA,EAAM;AAAA,QAC1B,IAAA,EAAM,KAAK,IAAA,CAAK,IAAA;AAAA,QAChB,IAAA,EAAM,MAAA;AAAA,QACN,QAAA,EAAU,KAAK,IAAA,CAAK,QAAA;AAAA,QACpB;AAAA,OACD,CAAA;AAAA,IACH;AAGA,IAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAKA,SAAO,CAAA;AAEjC,IAAA,OAAOA,SAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAA,CAAkB,aAAqB,UAAA,EAA4B;AAEjE,IAAA,IAAI,WAAW,UAAA,CAAW,IAAI,KAAK,UAAA,CAAW,UAAA,CAAW,KAAK,CAAA,EAAG;AAE/D,MAAA,MAAM,YAAA,GAAeC,aAAA,CAAI,KAAA,CAAM,WAAW,CAAA,CAAE,MAAA;AAC5C,MAAA,MAAM,WAAA,GAAmBC,wBAAQ,YAAY,CAAA;AAC7C,MAAA,MAAM,QAAA,GAAgBA,eAAA,CAAA,OAAA,CAAQ,WAAA,EAAa,UAAU,CAAA;AAGrD,MAAA,MAAMC,iBAAgB,QAAA,CAAS,QAAA,CAAS,MAAM,CAAA,GAAI,QAAA,GAAW,GAAG,QAAQ,CAAA,IAAA,CAAA;AACxE,MAAA,OAAOF,aAAA,CAAI,IAAA,CAAKE,cAAa,CAAA,CAAE,QAAA,EAAS;AAAA,IAC1C;AAIA,IAAA,MAAM,gBAAgB,UAAA,CAAW,QAAA,CAAS,MAAM,CAAA,GAAI,UAAA,GAAa,GAAG,UAAU,CAAA,IAAA,CAAA;AAC9E,IAAA,OAAOF,aAAA,CAAI,IAAA,CAAK,aAAa,CAAA,CAAE,QAAA,EAAS;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,WAAW,GAAA,EAA0C;AAEjE,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAG,CAAA;AACvC,IAAA,IAAI,MAAA,KAAW,QAAW,OAAO,MAAA;AAEjC,IAAA,IAAI;AACF,MAAA,MAAM,OAAA,GAAU,MAAM,IAAA,CAAK,YAAA,CAAa,GAAG,CAAA;AAC3C,MAAA,IAAI,CAAC,OAAA,EAAS;AACZ,QAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAK,KAAA,CAAS,CAAA;AACnC,QAAA,OAAO,KAAA,CAAA;AAAA,MACT;AAGA,MAAA,MAAM,EAAE,KAAA,EAAM,GAAI,MAAM,OAAO,kBAAkB,CAAA;AACjD,MAAA,MAAM,SAAS,KAAA,CAAM,OAAA,EAASA,cAAI,KAAA,CAAM,GAAG,EAAE,MAAM,CAAA;AAEnD,MAAA,IAAI,MAAA,CAAO,OAAA,IAAW,MAAA,CAAO,MAAA,EAAQ;AACnC,QAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAK,MAAA,CAAO,MAAM,CAAA;AACvC,QAAA,OAAO,MAAA,CAAO,MAAA;AAAA,MAChB;AAEA,MAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAK,KAAA,CAAS,CAAA;AACnC,MAAA,OAAO,KAAA,CAAA;AAAA,IACT,CAAA,CAAA,MAAQ;AACN,MAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAK,MAAS,CAAA;AACnC,MAAA,OAAO,MAAA;AAAA,IACT;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,oBAAoB,GAAA,EAA0C;AAC1E,IAAA,IAAI;AACF,MAAA,MAAM,EAAA,GAAK,MAAM,OAAO,aAAa,CAAA;AACrC,MAAA,MAAM,QAAA,GAAWA,aAAA,CAAI,KAAA,CAAM,GAAG,CAAA,CAAE,MAAA;AAChC,MAAA,OAAO,MAAM,EAAA,CAAG,QAAA,CAAS,QAAA,EAAU,OAAO,CAAA;AAAA,IAC5C,CAAA,CAAA,MAAQ;AACN,MAAA,OAAO,MAAA;AAAA,IACT;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,GAAA,EAAoB;AAC7B,IAAA,IAAI,GAAA,EAAK;AACP,MAAA,IAAA,CAAK,WAAA,CAAY,OAAO,GAAG,CAAA;AAC3B,MAAA,IAAA,CAAK,WAAA,CAAY,OAAO,GAAG,CAAA;AAAA,IAC7B,CAAA,MAAO;AACL,MAAA,IAAA,CAAK,YAAY,KAAA,EAAM;AACvB,MAAA,IAAA,CAAK,YAAY,KAAA,EAAM;AAAA,IACzB;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,QAAA,EAA8D;AAC5E,IAAA,IAAA,CAAK,YAAA,GAAe,QAAA;AAEpB,IAAA,IAAA,CAAK,UAAA,EAAW;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKA,cAAA,CAAe,KAAa,MAAA,EAAkC;AAC5D,IAAA,IAAA,CAAK,WAAA,CAAY,GAAA,CAAI,GAAA,EAAK,MAAM,CAAA;AAChC,IAAA,IAAI,MAAA,EAAQ;AACV,MAAA,IAAA,CAAK,UAAA,CAAW,KAAK,MAAM,CAAA;AAAA,IAC7B;AAAA,EACF;AACF;AClVO,IAAM,UAAA,GAAuC;AAAA;AAAA,EAElD,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,uBAAA;AAAA,IACN,WAAA,EAAa,wDAAA;AAAA,IACb,UAAUF,0BAAAA,CAAmB,OAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,4BAAA;AAAA,IACN,WAAA,EAAa,uDAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,aAAA;AAAA,IACN,WAAA,EAAa,gCAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,8BAAA;AAAA,IACN,WAAA,EAAa,wCAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,KAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA;AAAA,EAGA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,qBAAA;AAAA,IACN,WAAA,EAAa,oCAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,mBAAA;AAAA,IACN,WAAA,EAAa,mDAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,OAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,8BAAA;AAAA,IACN,WAAA,EAAa,8DAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,cAAA;AAAA,IACN,WAAA,EAAa,wCAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA;AAAA,EAGA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,6BAAA;AAAA,IACN,WAAA,EAAa,qDAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,OAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,mBAAA;AAAA,IACN,WAAA,EAAa,uDAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA;AAAA,EAGA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,gBAAA;AAAA,IACN,WAAA,EAAa,gEAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,SAAA,EAAW;AAAA,IACT,EAAA,EAAI,SAAA;AAAA,IACJ,IAAA,EAAM,oBAAA;AAAA,IACN,WAAA,EAAa,sDAAA;AAAA,IACb,UAAUA,0BAAAA,CAAmB,IAAA;AAAA,IAC7B,QAAA,EAAU;AAAA;AAEd;AAMO,IAAM,oBAAN,MAAwB;AAAA,EACrB,eAA4B,IAAI,GAAA,CAAI,MAAA,CAAO,IAAA,CAAK,UAAU,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA,EAKnE,cAAA,CAAe,SAAmB,QAAA,EAA0B;AAC1D,IAAA,KAAA,MAAW,QAAQ,OAAA,EAAS;AAC1B,MAAA,IAAA,CAAK,YAAA,CAAa,IAAI,IAAI,CAAA;AAAA,IAC5B;AACA,IAAA,KAAA,MAAW,QAAQ,QAAA,EAAU;AAC3B,MAAA,IAAA,CAAK,YAAA,CAAa,OAAO,IAAI,CAAA;AAAA,IAC/B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,IAAA,CAAK,QAAgB,QAAA,EAAmC;AACtD,IAAA,MAAM,cAA+B,EAAC;AAGtC,IAAA,WAAA,CAAY,KAAK,GAAG,IAAA,CAAK,aAAA,CAAc,MAAA,EAAQ,QAAQ,CAAC,CAAA;AACxD,IAAA,WAAA,CAAY,KAAK,GAAG,IAAA,CAAK,YAAA,CAAa,MAAA,EAAQ,QAAQ,CAAC,CAAA;AACvD,IAAA,WAAA,CAAY,KAAK,GAAG,IAAA,CAAK,SAAA,CAAU,MAAA,EAAQ,QAAQ,CAAC,CAAA;AACpD,IAAA,WAAA,CAAY,KAAK,GAAG,IAAA,CAAK,aAAA,CAAc,MAAA,EAAQ,QAAQ,CAAC,CAAA;AACxD,IAAA,WAAA,CAAY,KAAK,GAAG,IAAA,CAAK,YAAA,CAAa,MAAA,EAAQ,QAAQ,CAAC,CAAA;AAGvD,IAAA,OAAO,WAAA,CAAY,OAAO,CAAA,CAAA,KAAK,IAAA,CAAK,aAAa,GAAA,CAAI,CAAA,CAAE,IAAA,IAAQ,EAAE,CAAC,CAAA;AAAA,EACpE;AAAA;AAAA;AAAA;AAAA,EAMQ,aAAA,CAAc,QAAgB,SAAA,EAAoC;AACxE,IAAA,MAAM,cAA+B,EAAC;AACtC,IAAA,MAAM,sBAAA,uBAA6B,GAAA,EAAY;AAG/C,IAAA,KAAA,MAAW,aAAA,IAAiB,OAAO,SAAA,EAAW;AAC5C,MAAA,sBAAA,CAAuB,GAAA,CAAI,aAAA,CAAc,YAAA,CAAa,IAAI,CAAA;AAAA,IAC5D;AAEA,IAAA,KAAA,MAAW,QAAA,IAAY,OAAO,SAAA,EAAW;AAEvC,MAAA,IAAI,QAAA,CAAS,cAAA,CAAe,MAAA,KAAW,CAAA,EAAG;AACxC,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,uBAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,uBAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK,IAAA;AAAA,YAC5B,kBAAkB,QAAA,CAAS;AAAA;AAC7B,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,QAAA,CAAS,cAAc,MAAA,GAAS,CAAA,IAAK,SAAS,MAAA,CAAO,MAAA,CAAO,WAAW,CAAA,EAAG;AAC5E,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,8CAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,4BAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK,IAAA;AAAA,YAC5B,iBAAA,EAAmB,SAAS,aAAA,CAAc;AAAA;AAC5C,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,CAAC,SAAS,WAAA,EAAa;AACzB,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,2BAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,qBAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK;AAAA;AAC9B,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,KAAK,eAAA,CAAgB,QAAQ,KAAK,QAAA,CAAS,QAAA,CAAS,WAAW,CAAA,EAAG;AACpE,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,gDAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,8BAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK;AAAA;AAC9B,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,CAAC,sBAAA,CAAuB,GAAA,CAAI,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,EAAG;AACnD,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,+BAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,cAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK;AAAA;AAC9B,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,IAAA,CAAK,eAAA,CAAgB,QAAQ,CAAA,KAAM,CAAC,SAAS,QAAA,IAAY,QAAA,CAAS,QAAA,CAAS,MAAA,KAAW,CAAA,CAAA,EAAI;AAC5F,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,iDAAA,CAAA;AAAA,UAC/B,SAAS,IAAA,CAAK,QAAA;AAAA,UACd;AAAA,YACE,IAAA,EAAM,mBAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK;AAAA;AAC9B,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,IAAA,CAAK,YAAY,QAAQ,CAAA,IAAK,CAAC,IAAA,CAAK,aAAA,CAAc,QAAQ,CAAA,EAAG;AAC/D,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,UAAA,EAAa,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,6CAAA,CAAA;AAAA,UAC/B,SAAS,MAAA,CAAO,QAAA;AAAA,UAChB;AAAA,YACE,IAAA,EAAM,oBAAA;AAAA,YACN,YAAA,EAAc,SAAS,IAAA,CAAK;AAAA;AAC9B,SACD,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMQ,YAAA,CAAa,QAAgB,SAAA,EAAoC;AACvE,IAAA,MAAM,cAA+B,EAAC;AAEtC,IAAA,KAAA,MAAW,MAAA,IAAU,OAAO,QAAA,EAAU;AAEpC,MAAA,MAAM,KAAA,GAAQ,OAAO,MAAA,CAAO,IAAA;AAAA,QAAK,CAAA,CAAA,KAC/B,CAAA,CAAE,IAAA,CAAK,IAAA,KAAS,IAAA,IAChB,CAAA,CAAE,IAAA,CAAK,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAAS,IAAI;AAAA,OACzC;AAEA,MAAA,IAAI,CAAC,KAAA,EAAO;AACV,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,QAAA,EAAW,MAAA,CAAO,IAAA,CAAK,IAAI,CAAA,8CAAA,CAAA;AAAA,UAC3B,OAAO,IAAA,CAAK,QAAA;AAAA,UACZ;AAAA,YACE,IAAA,EAAM,mBAAA;AAAA,YACN,UAAA,EAAY,OAAO,IAAA,CAAK,IAAA;AAAA,YACxB,QAAQ,MAAA,CAAO,MAAA,CAAO,IAAI,CAAA,CAAA,KAAK,CAAA,CAAE,KAAK,IAAI;AAAA;AAC5C,SACD,CAAA;AAAA,MACH;AAGA,MAAA,KAAA,MAAW,KAAA,IAAS,OAAO,MAAA,EAAQ;AACjC,QAAA,IAAI,IAAA,CAAK,oBAAA,CAAqB,KAAA,CAAM,IAAA,CAAK,IAAI,CAAA,EAAG;AAC9C,UAAA,MAAM,cAAA,GAAiB,IAAA,CAAK,mBAAA,CAAoB,KAAK,CAAA;AACrD,UAAA,IAAI,CAAC,cAAA,EAAgB;AACnB,YAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,cACpB,WAAW,SAAS,CAAA;AAAA,cACpB,CAAA,OAAA,EAAU,KAAA,CAAM,IAAA,CAAK,IAAI,CAAA,+CAAA,CAAA;AAAA,cACzB,MAAM,IAAA,CAAK,QAAA;AAAA,cACX;AAAA,gBACE,IAAA,EAAM,6BAAA;AAAA,gBACN,SAAA,EAAW,MAAM,IAAA,CAAK,IAAA;AAAA,gBACtB,UAAA,EAAY,OAAO,IAAA,CAAK,IAAA;AAAA,gBACxB,oBAAA,EAAsB,IAAA,CAAK,kBAAA,CAAmB,KAAA,CAAM,KAAK,IAAI;AAAA;AAC/D,aACD,CAAA;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMQ,SAAA,CAAU,QAAgB,SAAA,EAAoC;AACpE,IAAA,MAAM,cAA+B,EAAC;AACtC,IAAA,MAAM,SAAA,GAAY,IAAA,CAAK,gBAAA,CAAiB,MAAM,CAAA;AAE9C,IAAA,KAAA,MAAW,IAAA,IAAQ,OAAO,KAAA,EAAO;AAE/B,MAAA,IAAI,CAAC,SAAA,CAAU,GAAA,CAAI,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,EAAG;AAClC,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,MAAA,EAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,2BAAA,CAAA;AAAA,UACvB,KAAK,IAAA,CAAK,QAAA;AAAA,UACV;AAAA,YACE,IAAA,EAAM,aAAA;AAAA,YACN,QAAA,EAAU,KAAK,IAAA,CAAK;AAAA;AACtB,SACD,CAAA;AAAA,MACH;AAGA,MAAA,IAAI,IAAA,CAAK,eAAA,CAAgB,IAAI,CAAA,EAAG;AAC9B,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,MAAA,EAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,4DAAA,CAAA;AAAA,UACvB,KAAK,IAAA,CAAK,QAAA;AAAA,UACV;AAAA,YACE,IAAA,EAAM,gBAAA;AAAA,YACN,QAAA,EAAU,KAAK,IAAA,CAAK;AAAA;AACtB,SACD,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMQ,aAAA,CAAc,QAAgB,SAAA,EAAoC;AACxE,IAAA,MAAM,cAA+B,EAAC;AACtC,IAAA,MAAM,aAAA,GAAgB,IAAI,GAAA,CAAI,MAAA,CAAO,SAAA,CAAU,IAAI,CAAA,CAAA,KAAK,CAAA,CAAE,IAAA,CAAK,IAAI,CAAC,CAAA;AAEpE,IAAA,KAAA,MAAW,aAAA,IAAiB,OAAO,SAAA,EAAW;AAE5C,MAAA,IAAI,CAAC,aAAA,CAAc,GAAA,CAAI,aAAA,CAAc,YAAA,CAAa,IAAI,CAAA,EAAG;AACvD,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,wCAAA,EAA2C,aAAA,CAAc,YAAA,CAAa,IAAI,CAAA,CAAA,CAAA;AAAA,UAC1E,cAAc,YAAA,CAAa,QAAA;AAAA,UAC3B;AAAA,YACE,IAAA,EAAM,8BAAA;AAAA,YACN,YAAA,EAAc,cAAc,YAAA,CAAa,IAAA;AAAA,YACzC,kBAAA,EAAoB,KAAA,CAAM,IAAA,CAAK,aAAa;AAAA;AAC9C,SACD,CAAA;AAAA,MACH;AAAA,IACF;AAGA,IAAA,KAAA,MAAW,UAAA,IAAc,OAAO,KAAA,EAAO;AACrC,MAAA,IAAI,CAAC,aAAA,CAAc,GAAA,CAAI,UAAA,CAAW,YAAA,CAAa,IAAI,CAAA,EAAG;AACpD,QAAA,WAAA,CAAY,KAAK,IAAA,CAAK,gBAAA;AAAA,UACpB,WAAW,SAAS,CAAA;AAAA,UACpB,CAAA,0CAAA,EAA6C,UAAA,CAAW,YAAA,CAAa,IAAI,CAAA,CAAA,CAAA;AAAA,UACzE,WAAW,YAAA,CAAa,QAAA;AAAA,UACxB;AAAA,YACE,IAAA,EAAM,8BAAA;AAAA,YACN,YAAA,EAAc,WAAW,YAAA,CAAa,IAAA;AAAA,YACtC,kBAAA,EAAoB,KAAA,CAAM,IAAA,CAAK,aAAa;AAAA;AAC9C,SACD,CAAA;AAAA,MACH;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMQ,YAAA,CAAa,QAAgB,SAAA,EAAoC;AAGvE,IAAA,OAAO,EAAC;AAAA,EACV;AAAA;AAAA;AAAA;AAAA,EAMQ,gBAAA,CACN,IAAA,EACA,OAAA,EACA,QAAA,EACA,MACA,WAAA,EACe;AACf,IAAA,OAAO;AAAA,MACL,OAAA;AAAA,MACA,UAAU,IAAA,CAAK,QAAA;AAAA,MACf,QAAA;AAAA,MACA,MAAM,IAAA,CAAK,EAAA;AAAA,MACX,MAAA,EAAQ,qBAAA;AAAA,MACR,IAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AAAA,EAEQ,gBAAgB,QAAA,EAA6B;AAEnD,IAAA,MAAM,IAAA,GAAO,QAAA,CAAS,IAAA,CAAK,IAAA,CAAK,WAAA,EAAY;AAC5C,IAAA,MAAM,gBAAA,GAAmB;AAAA,MACvB,QAAA;AAAA,MAAU,QAAA;AAAA,MAAU,QAAA;AAAA,MAAU,QAAA;AAAA,MAAU,KAAA;AAAA,MAAO,KAAA;AAAA,MAC/C,QAAA;AAAA,MAAU,QAAA;AAAA,MAAU,QAAA;AAAA,MAAU,OAAA;AAAA,MAAS;AAAA,KACzC;AAEA,IAAA,OAAO,iBAAiB,IAAA,CAAK,CAAA,CAAA,KAAK,IAAA,CAAK,QAAA,CAAS,CAAC,CAAC,CAAA;AAAA,EACpD;AAAA,EAEQ,YAAY,QAAA,EAA6B;AAC/C,IAAA,MAAM,MAAA,GAAS,SAAS,MAAA,CAAO,OAAA;AAC/B,IAAA,OAAO,OAAO,IAAA,KAAS,UAAA;AAAA,EACzB;AAAA,EAEQ,cAAc,QAAA,EAA6B;AAEjD,IAAA,MAAM,mBAAmB,CAAC,MAAA,EAAQ,SAAS,QAAA,EAAU,QAAA,EAAU,YAAY,YAAY,CAAA;AACvF,IAAA,OAAO,QAAA,CAAS,MAAM,MAAA,CAAO,IAAA;AAAA,MAAK,OAChC,gBAAA,CAAiB,QAAA,CAAS,EAAE,IAAA,CAAK,IAAA,CAAK,aAAa;AAAA,KACrD;AAAA,EACF;AAAA,EAEQ,qBAAqB,IAAA,EAAuB;AAClD,IAAA,MAAM,iBAAA,GAAoB;AAAA,MACxB,UAAA;AAAA,MAAY,QAAA;AAAA,MAAU,OAAA;AAAA,MAAS,KAAA;AAAA,MAAO,YAAA;AAAA,MACtC,KAAA;AAAA,MAAO,iBAAA;AAAA,MAAmB,aAAA;AAAA,MAAe,WAAA;AAAA,MACzC,SAAA;AAAA,MAAW,MAAA;AAAA,MAAQ;AAAA,KACrB;AACA,IAAA,MAAM,KAAA,GAAQ,KAAK,WAAA,EAAY;AAC/B,IAAA,OAAO,kBAAkB,IAAA,CAAK,CAAA,CAAA,KAAK,KAAA,CAAM,QAAA,CAAS,CAAC,CAAC,CAAA;AAAA,EACtD;AAAA,EAEQ,oBAAoB,KAAA,EAAmC;AAC7D,IAAA,MAAM,OAAO,KAAA,CAAM,IAAA;AACnB,IAAA,OAAO,MAAM,IAAA,KAAS,iBAAA;AAAA,EACxB;AAAA,EAEQ,mBAAmB,SAAA,EAA6B;AACtD,IAAA,MAAM,KAAA,GAAQ,UAAU,WAAA,EAAY;AACpC,IAAA,IAAI,KAAA,CAAM,QAAA,CAAS,UAAU,CAAA,EAAG;AAC9B,MAAA,OAAO,CAAC,iBAAiB,uCAAuC,CAAA;AAAA,IAClE;AACA,IAAA,IAAI,KAAA,CAAM,QAAA,CAAS,OAAO,CAAA,EAAG;AAC3B,MAAA,OAAO,CAAC,iBAAiB,CAAA;AAAA,IAC3B;AACA,IAAA,IAAI,MAAM,QAAA,CAAS,OAAO,KAAK,KAAA,CAAM,QAAA,CAAS,KAAK,CAAA,EAAG;AACpD,MAAA,OAAO,CAAC,iBAAiB,CAAA;AAAA,IAC3B;AACA,IAAA,OAAO,CAAC,iBAAiB,CAAA;AAAA,EAC3B;AAAA,EAEQ,iBAAiB,MAAA,EAA6B;AACpD,IAAA,MAAM,SAAA,uBAAgB,GAAA,EAAY;AAElC,IAAA,MAAM,eAAA,GAAkB,CAAC,OAAA,KAAqB;AAC5C,MAAA,IAAI,CAAC,OAAA,IAAW,OAAO,OAAA,KAAY,QAAA,EAAU;AAC7C,MAAA,MAAM,CAAA,GAAI,OAAA;AAEV,MAAA,IAAI,CAAA,CAAE,SAAS,eAAA,IAAmB,CAAA,CAAE,QAAQ,OAAO,CAAA,CAAE,SAAS,QAAA,EAAU;AACtE,QAAA,MAAM,OAAO,CAAA,CAAE,IAAA;AACf,QAAA,IAAI,IAAA,CAAK,SAAS,IAAA,CAAK,KAAA,CAAM,SAAS,CAAA,IAAK,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA,EAAG;AACxD,UAAA,SAAA,CAAU,GAAA,CAAI,IAAA,CAAK,KAAA,CAAM,CAAC,EAAE,IAAI,CAAA;AAAA,QAClC;AAAA,MACF;AAGA,MAAA,IAAI,CAAA,CAAE,OAAA,EAAS,eAAA,CAAgB,CAAA,CAAE,OAAO,CAAA;AACxC,MAAA,IAAI,CAAA,CAAE,GAAA,EAAK,eAAA,CAAgB,CAAA,CAAE,GAAG,CAAA;AAChC,MAAA,IAAI,CAAA,CAAE,KAAA,EAAO,eAAA,CAAgB,CAAA,CAAE,KAAK,CAAA;AACpC,MAAA,IAAI,CAAA,CAAE,KAAA,EAAO,eAAA,CAAgB,CAAA,CAAE,KAAK,CAAA;AACpC,MAAA,IAAI,CAAA,CAAE,IAAA,EAAM,eAAA,CAAgB,CAAA,CAAE,IAAI,CAAA;AAAA,IACpC,CAAA;AAGA,IAAA,KAAA,MAAW,MAAA,IAAU,OAAO,QAAA,EAAU;AACpC,MAAA,KAAA,MAAW,KAAA,IAAS,OAAO,MAAA,EAAQ;AACjC,QAAA,eAAA,CAAgB,MAAM,IAAI,CAAA;AAAA,MAC5B;AAAA,IACF;AAGA,IAAA,KAAA,MAAW,QAAA,IAAY,OAAO,SAAA,EAAW;AACvC,MAAA,KAAA,MAAW,KAAA,IAAS,QAAA,CAAS,KAAA,CAAM,MAAA,EAAQ;AACzC,QAAA,eAAA,CAAgB,MAAM,IAAI,CAAA;AAAA,MAC5B;AACA,MAAA,eAAA,CAAgB,QAAA,CAAS,OAAO,OAAO,CAAA;AAAA,IACzC;AAGA,IAAA,KAAA,MAAW,IAAA,IAAQ,OAAO,KAAA,EAAO;AAC/B,MAAA,IAAI,IAAA,CAAK,UAAA,CAAW,IAAA,KAAS,YAAA,EAAc;AACzC,QAAA,KAAA,MAAW,KAAA,IAAS,IAAA,CAAK,UAAA,CAAW,MAAA,EAAQ;AAC1C,UAAA,eAAA,CAAgB,MAAM,IAAI,CAAA;AAAA,QAC5B;AAAA,MACF,CAAA,MAAA,IAAW,IAAA,CAAK,UAAA,CAAW,IAAA,KAAS,iBAAA,EAAmB;AACrD,QAAA,eAAA,CAAgB,IAAA,CAAK,WAAW,IAAI,CAAA;AAAA,MACtC;AAAA,IACF;AAEA,IAAA,OAAO,SAAA;AAAA,EACT;AAAA,EAEQ,gBAAgB,IAAA,EAAgC;AACtD,IAAA,MAAM,MAAM,IAAA,CAAK,UAAA;AACjB,IAAA,IAAI,GAAA,CAAI,IAAA,KAAS,iBAAA,EAAmB,OAAO,KAAA;AAE3C,IAAA,MAAM,OAAO,GAAA,CAAI,IAAA;AACjB,IAAA,IAAI,IAAA,CAAK,IAAA,KAAS,UAAA,EAAY,OAAO,KAAA;AAGrC,IAAA,MAAM,UAAA,GAAa,IAAI,WAAA,CAAY,IAAA;AAAA,MAAK,CAAA,CAAA,KACtC,CAAA,CAAE,IAAA,KAAS,UAAA,IAAc,EAAE,IAAA,KAAS;AAAA,KACtC;AAEA,IAAA,OAAO,CAAC,UAAA;AAAA,EACV;AACF;;;ACzgBO,IAAM,yBAAN,MAA6B;AAAA,EASlC,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAClB,IAAA,IAAA,CAAK,cAAA,GAAiB,IAAI,iBAAA,EAAkB;AAC5C,IAAA,IAAA,CAAK,cAAA,GAAiB,IAAI,iBAAA,EAAkB;AAAA,EAC9C;AAAA,EAXQ,cAAA;AAAA,EACA,cAAA;AAAA,EACA,OAAA,GAA8B;AAAA,IACpC,cAAA,EAAgB,IAAA;AAAA,IAChB,eAAA,EAAiB,IAAA;AAAA,IACjB,eAAe;AAAC,GAClB;AAAA;AAAA;AAAA;AAAA,EAUA,UAAU,OAAA,EAA4C;AACpD,IAAA,IAAA,CAAK,UAAU,EAAE,GAAG,IAAA,CAAK,OAAA,EAAS,GAAG,OAAA,EAAQ;AAC7C,IAAA,IAAI,QAAQ,aAAA,EAAe;AACzB,MAAA,IAAA,CAAK,cAAA,CAAe,cAAA,CAAe,EAAC,EAAG,QAAQ,aAAa,CAAA;AAAA,IAC9D;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAA,GAA6B;AAC3B,IAAA,OAAO,IAAA,CAAK,OAAA,CAAQ,aAAA,IAAiB,EAAC;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAA,GAAuC;AACrC,IAAA,OAAO,IAAA,CAAK,cAAA;AAAA,EACd;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAA,GAAuC;AACrC,IAAA,OAAO,IAAA,CAAK,cAAA;AAAA,EACd;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,mBAAmB,QAAA,EAAsC;AAEvD,IAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,QAAA,EAAU,IAAI,CAAA;AAGlD,IAAA,MAAM,cAAA,GAAiB,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,SAAS,GAAG,CAAA;AAGvE,IAAA,IAAI,WAAA,GAAc,eAAe,GAAA,CAAI,CAAA,CAAA,KAAK,KAAK,iBAAA,CAAkB,CAAA,EAAG,QAAA,CAAS,GAAG,CAAC,CAAA;AAGjF,IAAA,IAAI,IAAA,CAAK,QAAQ,eAAA,EAAiB;AAChC,MAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,WAAA,CAAY,SAAS,GAAG,CAAA;AAC5D,MAAA,IAAI,QAAQ,MAAA,EAAQ;AAClB,QAAA,MAAM,kBAAkB,IAAA,CAAK,cAAA,CAAe,KAAK,MAAA,CAAO,MAAA,EAAQ,SAAS,GAAG,CAAA;AAC5E,QAAA,MAAM,aAAA,GAAgB,gBAAgB,GAAA,CAAI,CAAA,CAAA,KAAK,KAAK,iBAAA,CAAkB,CAAA,EAAG,QAAA,CAAS,GAAG,CAAC,CAAA;AAGtF,QAAA,WAAA,GAAc,KAAK,sBAAA,CAAuB,CAAC,GAAG,WAAA,EAAa,GAAG,aAAa,CAAC,CAAA;AAAA,MAC9E;AAAA,IACF;AAGA,IAAA,MAAM,aAAA,GAAgB,IAAA,CAAK,OAAA,CAAQ,aAAA,IAAiB,EAAC;AACrD,IAAA,IAAI,aAAA,CAAc,SAAS,CAAA,EAAG;AAC5B,MAAA,WAAA,GAAc,WAAA,CAAY,MAAA;AAAA,QAAO,CAAA,CAAA,KAC/B,CAAC,CAAA,CAAE,IAAA,IAAQ,CAAC,cAAc,QAAA,CAAS,MAAA,CAAO,CAAA,CAAE,IAAI,CAAC;AAAA,OACnD;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,uBAAuB,WAAA,EAAyC;AACtE,IAAA,MAAM,KAAA,uBAAY,GAAA,EAAwB;AAE1C,IAAA,KAAA,MAAW,KAAK,WAAA,EAAa;AAE3B,MAAA,MAAM,GAAA,GAAM,CAAA,EAAG,CAAA,CAAE,IAAI,CAAA,CAAA,EAAI,CAAA,CAAE,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,CAAA,EAAI,CAAA,CAAE,KAAA,CAAM,MAAM,SAAS,CAAA,CAAA;AAEtE,MAAA,MAAM,QAAA,GAAW,KAAA,CAAM,GAAA,CAAI,GAAG,CAAA;AAC9B,MAAA,IAAI,CAAC,QAAA,EAAU;AACb,QAAA,KAAA,CAAM,GAAA,CAAI,KAAK,CAAC,CAAA;AAAA,MAClB,CAAA,MAAO;AAEL,QAAA,IAAI,CAAA,CAAE,IAAA,IAAQ,CAAC,QAAA,CAAS,IAAA,EAAM;AAC5B,UAAA,KAAA,CAAM,GAAA,CAAI,KAAK,CAAC,CAAA;AAAA,QAClB;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO,KAAA,CAAM,IAAA,CAAK,KAAA,CAAM,MAAA,EAAQ,CAAA;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,8BAA8B,QAAA,EAAoD;AAEtF,IAAA,MAAM,WAAA,GAAc,IAAA,CAAK,kBAAA,CAAmB,QAAQ,CAAA;AAGpD,IAAA,IAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB;AAChC,MAAA,OAAO,EAAE,WAAA,EAAY;AAAA,IACvB;AAEA,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,WAAA,CAAY,SAAS,GAAG,CAAA;AAC5D,IAAA,IAAI,CAAC,QAAQ,MAAA,EAAQ;AACnB,MAAA,OAAO,EAAE,WAAA,EAAY;AAAA,IACvB;AAGA,IAAA,MAAM,gBAAA,GAAmB,MAAM,IAAA,CAAK,cAAA,CAAe,cAAA;AAAA,MACjD,QAAA,CAAS,GAAA;AAAA,MACT,MAAA,CAAO;AAAA,KACT;AAGA,IAAA,KAAA,MAAW,UAAA,IAAc,iBAAiB,WAAA,EAAa;AACrD,MAAA,WAAA,CAAY,KAAK,IAAA,CAAK,iBAAA,CAAkB,UAAA,EAAY,QAAA,CAAS,GAAG,CAAC,CAAA;AAAA,IACnE;AAEA,IAAA,OAAO;AAAA,MACL,WAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,0BAAA,CACE,UACA,eAAA,EACc;AACd,IAAA,MAAM,cAA4B,EAAC;AACnC,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,WAAA,CAAY,SAAS,GAAG,CAAA;AAC5D,IAAA,IAAI,CAAC,MAAA,EAAQ,MAAA,EAAQ,OAAO,WAAA;AAG5B,IAAA,MAAM,WAAA,uBAAkB,GAAA,EAAY;AAGpC,IAAA,KAAA,MAAW,MAAA,IAAU,MAAA,CAAO,MAAA,CAAO,QAAA,EAAU;AAC3C,MAAA,KAAA,MAAW,KAAA,IAAS,OAAO,MAAA,EAAQ;AACjC,QAAA,IAAA,CAAK,mBAAmB,KAAA,CAAM,IAAA,EAAM,iBAAiB,WAAA,EAAa,WAAA,EAAa,SAAS,GAAG,CAAA;AAAA,MAC7F;AAAA,IACF;AAGA,IAAA,KAAA,MAAW,QAAA,IAAY,MAAA,CAAO,MAAA,CAAO,SAAA,EAAW;AAC9C,MAAA,KAAA,MAAW,KAAA,IAAS,QAAA,CAAS,KAAA,CAAM,MAAA,EAAQ;AACzC,QAAA,IAAA,CAAK,mBAAmB,KAAA,CAAM,IAAA,EAAM,iBAAiB,WAAA,EAAa,WAAA,EAAa,SAAS,GAAG,CAAA;AAAA,MAC7F;AACA,MAAA,IAAA,CAAK,kBAAA,CAAmB,SAAS,MAAA,CAAO,OAAA,EAAS,iBAAiB,WAAA,EAAa,WAAA,EAAa,SAAS,GAAG,CAAA;AAAA,IAC1G;AAGA,IAAA,KAAA,MAAW,CAAC,IAAA,EAAM,MAAM,CAAA,IAAK,eAAA,EAAiB;AAC5C,MAAA,IAAI,CAAC,WAAA,CAAY,GAAA,CAAI,IAAI,CAAA,EAAG;AAE1B,QAAA,MAAM,cAAA,GAAiB,IAAA,CAAK,kBAAA,CAAmB,MAAA,CAAO,QAAQ,IAAI,CAAA;AAClE,QAAA,IAAI,cAAA,EAAgB;AAClB,UAAA,WAAA,CAAY,IAAA,CAAK;AAAA,YACf,KAAA,EAAO,kBAAA,CAAW,OAAA,CAAQ,cAAc,CAAA;AAAA,YACxC,OAAA,EAAS,aAAa,IAAI,CAAA,eAAA,CAAA;AAAA,YAC1B,UAAUK,uCAAA,CAAsB,IAAA;AAAA,YAChC,IAAA,EAAM,SAAA;AAAA,YACN,MAAA,EAAQ,qBAAA;AAAA,YACR,IAAA,EAAM;AAAA,cACJ,IAAA,EAAM,eAAA;AAAA,cACN,UAAA,EAAY,IAAA;AAAA,cACZ,cAAc,MAAA,CAAO;AAAA;AACvB,WACD,CAAA;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,kBAAA,CACN,OAAA,EACA,eAAA,EACA,WAAA,EACA,cACA,IAAA,EACM;AACN,IAAA,IAAI,CAAC,OAAA,IAAW,OAAO,OAAA,KAAY,QAAA,EAAU;AAC7C,IAAA,MAAM,CAAA,GAAI,OAAA;AAEV,IAAA,IAAI,CAAA,CAAE,SAAS,eAAA,IAAmB,CAAA,CAAE,QAAQ,OAAO,CAAA,CAAE,SAAS,QAAA,EAAU;AACtE,MAAA,MAAM,OAAO,CAAA,CAAE,IAAA;AACf,MAAA,IAAI,IAAA,CAAK,KAAA,IAAS,IAAA,CAAK,KAAA,CAAM,SAAS,CAAA,EAAG;AACvC,QAAA,MAAM,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA;AACzB,QAAA,IAAI,IAAA,IAAQ,eAAA,CAAgB,GAAA,CAAI,IAAA,CAAK,IAAI,CAAA,EAAG;AAC1C,UAAA,WAAA,CAAY,GAAA,CAAI,KAAK,IAAI,CAAA;AAAA,QAC3B;AAAA,MACF;AAAA,IACF;AAGA,IAAA,IAAI,CAAA,CAAE,SAAS,IAAA,CAAK,kBAAA,CAAmB,EAAE,OAAA,EAAS,eAAA,EAAiB,WAAA,EAAa,YAAA,EAAc,IAAI,CAAA;AAClG,IAAA,IAAI,CAAA,CAAE,KAAK,IAAA,CAAK,kBAAA,CAAmB,EAAE,GAAA,EAAK,eAAA,EAAiB,WAAA,EAAa,YAAA,EAAc,IAAI,CAAA;AAC1F,IAAA,IAAI,CAAA,CAAE,OAAO,IAAA,CAAK,kBAAA,CAAmB,EAAE,KAAA,EAAO,eAAA,EAAiB,WAAA,EAAa,YAAA,EAAc,IAAI,CAAA;AAC9F,IAAA,IAAI,CAAA,CAAE,OAAO,IAAA,CAAK,kBAAA,CAAmB,EAAE,KAAA,EAAO,eAAA,EAAiB,WAAA,EAAa,YAAA,EAAc,IAAI,CAAA;AAC9F,IAAA,IAAI,CAAA,CAAE,MAAM,IAAA,CAAK,kBAAA,CAAmB,EAAE,IAAA,EAAM,eAAA,EAAiB,WAAA,EAAa,YAAA,EAAc,IAAI,CAAA;AAAA,EAC9F;AAAA;AAAA;AAAA;AAAA,EAKQ,kBAAA,CAAmB,QAAwJ,IAAA,EAA0C;AAC3N,IAAA,KAAA,MAAW,GAAA,IAAO,OAAO,OAAA,EAAS;AAChC,MAAA,KAAA,MAAW,IAAA,IAAQ,IAAI,KAAA,EAAO;AAC5B,QAAA,MAAM,YAAA,GAAe,IAAA,CAAK,KAAA,EAAO,IAAA,IAAQ,KAAK,IAAA,CAAK,IAAA;AACnD,QAAA,IAAI,iBAAiB,IAAA,EAAM;AACzB,UAAA,OAAO,IAAA,CAAK,KAAA,EAAO,QAAA,IAAY,IAAA,CAAK,IAAA,CAAK,QAAA;AAAA,QAC3C;AAAA,MACF;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,iBAAA,CAAkB,GAAkB,WAAA,EAAiC;AAC3E,IAAA,MAAM,WAAA,GAA0D,CAAA,CAAE,WAAA,EAAa,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,MACvF,QAAA,EAAU;AAAA,QACR,GAAA,EAAK,CAAA,CAAE,QAAA,CAAS,IAAA,KAAS,CAAA,CAAE,QAAA,CAAS,IAAA,GAAO,IAAA,CAAK,SAAA,CAAU,CAAA,CAAE,QAAA,CAAS,IAAI,CAAA,GAAI,WAAA;AAAA,QAC7E,KAAA,EAAO,kBAAA,CAAW,OAAA,CAAQ,CAAA,CAAE,QAAQ;AAAA,OACtC;AAAA,MACA,SAAS,CAAA,CAAE;AAAA,KACb,CAAE,CAAA;AAEF,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,kBAAA,CAAW,OAAA,CAAQ,CAAA,CAAE,QAAQ,CAAA;AAAA,MACpC,SAAS,CAAA,CAAE,OAAA;AAAA,MACX,UAAU,CAAA,CAAE,QAAA;AAAA,MACZ,MAAM,CAAA,CAAE,IAAA;AAAA,MACR,QAAQ,CAAA,CAAE,MAAA;AAAA,MACV,kBAAA,EAAoB,WAAA;AAAA,MACpB,MAAM,CAAA,CAAE;AAAA,KACV;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKQ,UAAU,QAAA,EAA0B;AAC1C,IAAA,IAAI,QAAA,CAAS,UAAA,CAAW,SAAS,CAAA,EAAG;AAClC,MAAA,OAAO,QAAA;AAAA,IACT;AAEA,IAAA,OAAO,CAAA,OAAA,EAAU,QAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,GAAG,CAAC,CAAA,CAAA;AAAA,EAC/C;AACF;;;ACjTO,IAAM,wBAAN,MAA4B;AAAA,EACjC,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,iBAAA,CAAkB,UAAwB,QAAA,EAAqC;AAC7E,IAAA,MAAM,IAAA,GAAO,IAAA,CAAK,eAAA,CAAgB,iBAAA,CAAkB,UAAU,QAAQ,CAAA;AACtE,IAAA,IAAI,CAAC,MAAM,OAAO,IAAA;AAGlB,IAAA,IAAI,IAAA,CAAK,aAAA,CAAc,IAAI,CAAA,EAAG;AAC5B,MAAA,OAAO,IAAA;AAAA,IACT;AAGA,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,IAAI,CAAA;AACnD,IAAA,IAAI,MAAA,EAAQ;AACV,MAAA,OAAO;AAAA,QACL,KAAK,MAAA,CAAO,GAAA;AAAA,QACZ,KAAA,EAAO;AAAA,UACL,KAAA,EAAO;AAAA,YACL,IAAA,EAAM,MAAA,CAAO,iBAAA,CAAkB,IAAA,GAAO,CAAA;AAAA,YACtC,SAAA,EAAW,MAAA,CAAO,iBAAA,CAAkB,MAAA,GAAS;AAAA,WAC/C;AAAA,UACA,GAAA,EAAK;AAAA,YACH,IAAA,EAAM,MAAA,CAAO,iBAAA,CAAkB,OAAA,GAAU,CAAA;AAAA,YACzC,SAAA,EAAW,MAAA,CAAO,iBAAA,CAAkB,SAAA,GAAY;AAAA;AAClD;AACF,OACF;AAAA,IACF;AAGA,IAAA,MAAM,UAAA,GAAa,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,SAAS,GAAG,CAAA;AAC/D,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,gBAAA,CAAiB,UAAA,EAAY,IAAI,CAAA;AACpD,IAAA,IAAI,KAAA,EAAO;AACT,MAAA,OAAO;AAAA,QACL,KAAK,QAAA,CAAS,GAAA;AAAA,QACd,KAAA,EAAO;AAAA,UACL,KAAA,EAAO;AAAA,YACL,IAAA,EAAM,KAAA,CAAM,iBAAA,CAAkB,IAAA,GAAO,CAAA;AAAA,YACrC,SAAA,EAAW,KAAA,CAAM,iBAAA,CAAkB,MAAA,GAAS;AAAA,WAC9C;AAAA,UACA,GAAA,EAAK;AAAA,YACH,IAAA,EAAM,KAAA,CAAM,iBAAA,CAAkB,OAAA,GAAU,CAAA;AAAA,YACxC,SAAA,EAAW,KAAA,CAAM,iBAAA,CAAkB,SAAA,GAAY;AAAA;AACjD;AACF,OACF;AAAA,IACF;AAEA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEQ,cAAc,IAAA,EAAuB;AAC3C,IAAA,MAAM,QAAA,uBAAe,GAAA,CAAI;AAAA,MACvB,QAAA;AAAA,MAAU,KAAA;AAAA,MAAO,SAAA;AAAA,MAAW,SAAA;AAAA,MAAW,MAAA;AAAA,MAAQ,WAAA;AAAA,MAC/C,UAAA;AAAA,MAAY,MAAA;AAAA,MAAQ,MAAA;AAAA,MAAQ,MAAA;AAAA,MAAQ,KAAA;AAAA,MAAO,KAAA;AAAA,MAAO,UAAA;AAAA,MAAY;AAAA,KAC/D,CAAA;AACD,IAAA,OAAO,QAAA,CAAS,IAAI,IAAI,CAAA;AAAA,EAC1B;AAAA,EAEQ,gBAAA,CACN,SAMA,IAAA,EACyG;AACzG,IAAA,KAAA,MAAW,OAAO,OAAA,EAAS;AACzB,MAAA,IAAI,GAAA,CAAI,IAAA,KAAS,IAAA,EAAM,OAAO,GAAA;AAC9B,MAAA,IAAI,IAAI,QAAA,EAAU;AAChB,QAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,gBAAA,CAAiB,GAAA,CAAI,UAA4B,IAAI,CAAA;AACxE,QAAA,IAAI,OAAO,OAAO,KAAA;AAAA,MACpB;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AACF;;;AClEO,IAAM,oBAAN,MAAwB;AAAA,EAC7B,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,eAAe,QAAA,EAA0C;AAEvD,IAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,QAAA,EAAU,IAAI,CAAA;AAGlD,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,SAAS,GAAG,CAAA;AAG5D,IAAA,OAAO,QAAQ,GAAA,CAAI,CAAA,GAAA,KAAO,IAAA,CAAK,aAAA,CAAc,GAAG,CAAC,CAAA;AAAA,EACnD;AAAA,EAEQ,cAAc,GAAA,EAAoC;AACxD,IAAA,OAAO;AAAA,MACL,MAAM,GAAA,CAAI,IAAA;AAAA,MACV,MAAM,GAAA,CAAI,IAAA;AAAA,MACV,KAAA,EAAO,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI,QAAQ,CAAA;AAAA,MAChC,cAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI,iBAAiB,CAAA;AAAA,MAClD,QAAQ,GAAA,CAAI,MAAA;AAAA,MACZ,QAAA,EAAU,IAAI,QAAA,EAAU,GAAA,CAAI,WAAS,IAAA,CAAK,aAAA,CAAc,KAAK,CAAC;AAAA,KAChE;AAAA,EACF;AAAA,EAEQ,QAAQ,GAAA,EAAkF;AAChG,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,EAAE,IAAA,EAAM,GAAA,CAAI,OAAO,CAAA,EAAG,SAAA,EAAW,GAAA,CAAI,MAAA,GAAS,CAAA,EAAE;AAAA,MACvD,GAAA,EAAK,EAAE,IAAA,EAAM,GAAA,CAAI,UAAU,CAAA,EAAG,SAAA,EAAW,GAAA,CAAI,SAAA,GAAY,CAAA;AAAE,KAC7D;AAAA,EACF;AACF;;;AC3CO,IAAM,WAAA,GAAmC;AAAA,EAC9C,WAAA;AAAA,EACA,MAAA;AAAA,EACA,OAAA;AAAA,EACA,MAAA;AAAA,EACA,WAAA;AAAA,EACA,QAAA;AAAA,EACA,eAAA;AAAA,EACA,WAAA;AAAA,EACA,UAAA;AAAA,EACA,UAAA;AAAA,EACA,YAAA;AAAA,EACA,UAAA;AAAA,EACA,QAAA;AAAA,EACA,SAAA;AAAA,EACA,UAAA;AAAA,EACA,SAAA;AAAA,EACA,QAAA;AAAA,EACA,QAAA;AAAA,EACA,QAAA;AAAA,EACA,UAAA;AAAA,EACA;AACF;AAEO,IAAM,eAAA,GAA2C;AAAA,EACtD,aAAA;AAAA,EACA,YAAA;AAAA,EACA,UAAA;AAAA,EACA,QAAA;AAAA,EACA,YAAA;AAAA,EACA,UAAA;AAAA,EACA,OAAA;AAAA,EACA,cAAA;AAAA,EACA,eAAA;AAAA,EACA;AACF;AAEA,IAAM,QAAA,uBAAe,GAAA,CAAI;AAAA,EACvB,QAAA;AAAA,EAAU,QAAA;AAAA,EAAU,UAAA;AAAA,EAAY,MAAA;AAAA,EAAQ,WAAA;AAAA,EAAa,QAAA;AAAA,EAAU,MAAA;AAAA,EAAQ,UAAA;AAAA,EACvE,OAAA;AAAA,EAAS,QAAA;AAAA,EAAU,KAAA;AAAA,EAAO,MAAA;AAAA,EAAQ,OAAA;AAAA,EAAS,WAAA;AAAA,EAAa,UAAA;AAAA,EAAY,UAAA;AAAA,EACpE,SAAA;AAAA,EAAW,aAAA;AAAA,EAAe,QAAA;AAAA,EAAU,QAAA;AAAA,EAAU,SAAA;AAAA,EAAW,KAAA;AAAA,EAAO,IAAA;AAAA,EAAM,KAAA;AAAA,EACtE,KAAA;AAAA,EAAO,QAAA;AAAA,EAAU,MAAA;AAAA,EAAQ,OAAA;AAAA,EAAS,MAAA;AAAA,EAAQ,OAAA;AAAA,EAAS,MAAA;AAAA,EAAQ;AAC7D,CAAC,CAAA;AAED,IAAMC,cAAAA,uBAAoB,GAAA,CAAI;AAAA,EAC5B,QAAA;AAAA,EAAU,KAAA;AAAA,EAAO,SAAA;AAAA,EAAW,MAAA;AAAA,EAAQ,WAAA;AAAA,EAAa,SAAA;AAAA,EAAW,UAAA;AAAA,EAC5D,MAAA;AAAA,EAAQ,MAAA;AAAA,EAAQ,MAAA;AAAA,EAAQ,KAAA;AAAA,EAAO,KAAA;AAAA,EAAO;AACxC,CAAC,CAAA;AAEM,IAAM,4BAAN,MAAgC;AAAA,EACrC,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,cAAc,QAAA,EAAyC;AACrD,IAAA,MAAM,SAA0B,EAAC;AACjC,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAE7B,IAAA,KAAA,IAAS,OAAA,GAAU,CAAA,EAAG,OAAA,GAAU,KAAA,CAAM,QAAQ,OAAA,EAAA,EAAW;AACvD,MAAA,MAAM,IAAA,GAAO,MAAM,OAAO,CAAA;AAC1B,MAAA,IAAA,CAAK,YAAA,CAAa,IAAA,EAAM,OAAA,EAAS,MAAM,CAAA;AAAA,IACzC;AAEA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEQ,YAAA,CAAa,IAAA,EAAc,OAAA,EAAiB,MAAA,EAA+B;AAEjF,IAAA,MAAM,YAAA,GAAe,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA;AACxC,IAAA,IAAI,YAAA,EAAc;AAChB,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,OAAA,CAAQ,IAAI,CAAA;AAC/B,MAAA,MAAA,CAAO,IAAA,CAAK;AAAA,QACV,IAAA,EAAM,OAAA;AAAA,QACN,SAAA,EAAW,KAAA;AAAA,QACX,MAAA,EAAQ,KAAK,MAAA,GAAS,KAAA;AAAA,QACtB,SAAA,EAAW,SAAA;AAAA,QACX,gBAAgB;AAAC,OAClB,CAAA;AACD,MAAA;AAAA,IACF;AAGA,IAAA,MAAM,WAAA,GAAc,UAAA;AACpB,IAAA,IAAI,WAAA;AACJ,IAAA,OAAA,CAAQ,WAAA,GAAc,WAAA,CAAY,IAAA,CAAK,IAAI,OAAO,IAAA,EAAM;AACtD,MAAA,MAAA,CAAO,IAAA,CAAK;AAAA,QACV,IAAA,EAAM,OAAA;AAAA,QACN,WAAW,WAAA,CAAY,KAAA;AAAA,QACvB,MAAA,EAAQ,WAAA,CAAY,CAAC,CAAA,CAAE,MAAA;AAAA,QACvB,SAAA,EAAW,QAAA;AAAA,QACX,gBAAgB;AAAC,OAClB,CAAA;AAAA,IACH;AAGA,IAAA,MAAM,WAAA,GAAc,kBAAA;AACpB,IAAA,IAAI,WAAA;AACJ,IAAA,OAAA,CAAQ,WAAA,GAAc,WAAA,CAAY,IAAA,CAAK,IAAI,OAAO,IAAA,EAAM;AACtD,MAAA,MAAA,CAAO,IAAA,CAAK;AAAA,QACV,IAAA,EAAM,OAAA;AAAA,QACN,WAAW,WAAA,CAAY,KAAA;AAAA,QACvB,MAAA,EAAQ,WAAA,CAAY,CAAC,CAAA,CAAE,MAAA;AAAA,QACvB,SAAA,EAAW,QAAA;AAAA,QACX,gBAAgB;AAAC,OAClB,CAAA;AAAA,IACH;AAGA,IAAA,MAAM,eAAA,GAAkB,OAAA;AACxB,IAAA,IAAI,eAAA;AACJ,IAAA,OAAA,CAAQ,eAAA,GAAkB,eAAA,CAAgB,IAAA,CAAK,IAAI,OAAO,IAAA,EAAM;AAC9D,MAAA,MAAA,CAAO,IAAA,CAAK;AAAA,QACV,IAAA,EAAM,OAAA;AAAA,QACN,WAAW,eAAA,CAAgB,KAAA;AAAA,QAC3B,MAAA,EAAQ,eAAA,CAAgB,CAAC,CAAA,CAAE,MAAA;AAAA,QAC3B,SAAA,EAAW,WAAA;AAAA,QACX,gBAAgB;AAAC,OAClB,CAAA;AAAA,IACH;AAGA,IAAA,MAAM,SAAA,GAAY,mBAAA;AAClB,IAAA,IAAI,SAAA;AACJ,IAAA,OAAA,CAAQ,SAAA,GAAY,SAAA,CAAU,IAAA,CAAK,IAAI,OAAO,IAAA,EAAM;AAClD,MAAA,MAAM,IAAA,GAAO,UAAU,CAAC,CAAA;AACxB,MAAA,MAAM,YAAY,SAAA,CAAU,KAAA;AAG5B,MAAA,IAAI,IAAA,CAAK,UAAA,CAAW,IAAA,EAAM,SAAS,CAAA,EAAG;AAEtC,MAAA,IAAI,QAAA,CAAS,GAAA,CAAI,IAAI,CAAA,EAAG;AACtB,QAAA,MAAA,CAAO,IAAA,CAAK;AAAA,UACV,IAAA,EAAM,OAAA;AAAA,UACN,SAAA;AAAA,UACA,QAAQ,IAAA,CAAK,MAAA;AAAA,UACb,SAAA,EAAW,SAAA;AAAA,UACX,gBAAgB;AAAC,SAClB,CAAA;AAAA,MACH,CAAA,MAAA,IAAWA,cAAAA,CAAc,GAAA,CAAI,IAAI,CAAA,EAAG;AAClC,QAAA,MAAA,CAAO,IAAA,CAAK;AAAA,UACV,IAAA,EAAM,OAAA;AAAA,UACN,SAAA;AAAA,UACA,QAAQ,IAAA,CAAK,MAAA;AAAA,UACb,SAAA,EAAW,MAAA;AAAA,UACX,cAAA,EAAgB,CAAC,gBAAgB;AAAA,SAClC,CAAA;AAAA,MACH,CAAA,MAAA,IAAW,QAAA,CAAS,IAAA,CAAK,IAAI,CAAA,EAAG;AAE9B,QAAA,MAAM,aAAa,IAAA,CAAK,SAAA,CAAU,CAAA,EAAG,SAAS,EAAE,IAAA,EAAK;AACrD,QAAA,IAAI,WAAW,QAAA,CAAS,QAAQ,KAAK,UAAA,CAAW,QAAA,CAAS,MAAM,CAAA,EAAG;AAChE,UAAA,MAAA,CAAO,IAAA,CAAK;AAAA,YACV,IAAA,EAAM,OAAA;AAAA,YACN,SAAA;AAAA,YACA,QAAQ,IAAA,CAAK,MAAA;AAAA,YACb,SAAA,EAAW,OAAA;AAAA,YACX,cAAA,EAAgB,CAAC,aAAa;AAAA,WAC/B,CAAA;AAAA,QACH,CAAA,MAAA,IAAW,UAAA,CAAW,QAAA,CAAS,UAAU,CAAA,EAAG;AAC1C,UAAA,MAAA,CAAO,IAAA,CAAK;AAAA,YACV,IAAA,EAAM,OAAA;AAAA,YACN,SAAA;AAAA,YACA,QAAQ,IAAA,CAAK,MAAA;AAAA,YACb,SAAA,EAAW,UAAA;AAAA,YACX,cAAA,EAAgB,CAAC,aAAa;AAAA,WAC/B,CAAA;AAAA,QACH,CAAA,MAAA,IAAW,UAAA,CAAW,QAAA,CAAS,GAAG,CAAA,IAAK,UAAA,CAAW,QAAA,CAAS,GAAG,CAAA,IAAK,UAAA,CAAW,QAAA,CAAS,GAAG,CAAA,EAAG;AAC3F,UAAA,MAAA,CAAO,IAAA,CAAK;AAAA,YACV,IAAA,EAAM,OAAA;AAAA,YACN,SAAA;AAAA,YACA,QAAQ,IAAA,CAAK,MAAA;AAAA,YACb,SAAA,EAAW,MAAA;AAAA,YACX,gBAAgB;AAAC,WAClB,CAAA;AAAA,QACH,CAAA,MAAO;AACL,UAAA,MAAA,CAAO,IAAA,CAAK;AAAA,YACV,IAAA,EAAM,OAAA;AAAA,YACN,SAAA;AAAA,YACA,QAAQ,IAAA,CAAK,MAAA;AAAA,YACb,SAAA,EAAW,OAAA;AAAA,YACX,gBAAgB;AAAC,WAClB,CAAA;AAAA,QACH;AAAA,MACF,CAAA,MAAA,IAAW,KAAK,QAAA,CAAS,GAAG,KAAK,SAAA,GAAY,IAAA,CAAK,OAAA,CAAQ,GAAG,CAAA,EAAG;AAE9D,QAAA,MAAA,CAAO,IAAA,CAAK;AAAA,UACV,IAAA,EAAM,OAAA;AAAA,UACN,SAAA;AAAA,UACA,QAAQ,IAAA,CAAK,MAAA;AAAA,UACb,SAAA,EAAW,UAAA;AAAA,UACX,gBAAgB;AAAC,SAClB,CAAA;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEQ,UAAA,CAAW,MAAc,QAAA,EAA2B;AAC1D,IAAA,IAAI,QAAA,GAAW,KAAA;AACf,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,QAAA,EAAU,CAAA,EAAA,EAAK;AACjC,MAAA,IAAI,IAAA,CAAK,CAAC,CAAA,KAAM,GAAA,KAAQ,CAAA,KAAM,KAAK,IAAA,CAAK,CAAA,GAAI,CAAC,CAAA,KAAM,IAAA,CAAA,EAAO;AACxD,QAAA,QAAA,GAAW,CAAC,QAAA;AAAA,MACd;AAAA,IACF;AACA,IAAA,OAAO,QAAA;AAAA,EACT;AACF;ACnLO,IAAM,wBAAN,MAA4B;AAAA,EACjC,YAAoB,eAAA,EAAqC;AAArC,IAAA,IAAA,CAAA,eAAA,GAAA,eAAA;AAAA,EAAsC;AAAA,EAE1D,kBAAA,CACE,QAAA,EACA,KAAA,EACA,OAAA,EACc;AACd,IAAA,MAAM,UAAwB,EAAC;AAC/B,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,KAAA,MAAW,UAAA,IAAc,QAAQ,WAAA,EAAa;AAE5C,MAAA,MAAM,OAAO,UAAA,CAAW,IAAA;AAGxB,MAAA,IAAI,UAAA,CAAW,SAAS,SAAA,EAAW;AACjC,QAAA,MAAM,YAAA,GAAe,MAAM,YAAA,IAAgB,IAAA,CAAK,oBAAoB,KAAA,EAAO,UAAA,CAAW,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA;AACtG,QAAA,IAAI,YAAA,EAAc;AAChB,UAAA,OAAA,CAAQ,KAAK,IAAA,CAAK,4BAAA,CAA6B,UAAU,UAAA,CAAW,KAAA,EAAO,YAAY,CAAC,CAAA;AAAA,QAC1F;AAAA,MACF;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,uCAAA,CAAwC,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,YAAY,CAAC,CAAA;AAAA,MAC1G;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,QAAA,EAAU;AACnD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,4BAAA,CAA6B,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,QAAQ,CAAC,CAAA;AAAA,MAC3F;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,kBAAA,EAAoB;AAC7D,QAAA,KAAA,MAAW,YAAY,IAAA,CAAK,kBAAA,CAAmB,KAAA,CAAM,CAAA,EAAG,CAAC,CAAA,EAAG;AAC1D,UAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,4BAAA,CAA6B,QAAA,EAAU,UAAA,CAAW,OAAO,IAAA,CAAK,YAAA,IAAgB,EAAA,EAAI,QAAQ,CAAC,CAAA;AAAA,QAC/G;AAAA,MACF;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,0BAAA,CAA2B,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,YAAY,CAAC,CAAA;AAAA,MAC7F;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,UAAA,EAAY;AACrD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,sBAAA,CAAuB,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,UAAU,CAAC,CAAA;AAAA,MACvF;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,uBAAA,CAAwB,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,YAAY,CAAC,CAAA;AAAA,MAC1F;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,4BAAA,CAA6B,QAAA,EAAU,KAAK,YAAA,EAAc,UAAA,CAAW,KAAK,CAAC,CAAA;AAAA,MAC/F;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,oBAAA,EAAsB;AAC/D,QAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,0BAAA,CAA2B,QAAA,EAAU,UAAA,CAAW,KAAA,EAAO,IAAA,CAAK,SAAA,IAAa,EAAA,EAAI,IAAA,CAAK,oBAAoB,CAAC,CAAA;AAAA,MAC3H;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,uBAAA,CAAwB,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,YAAY,CAAC,CAAA;AAAA,MAC1F;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,QAAA,EAAU;AACnD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,sBAAA,CAAuB,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,QAAQ,CAAC,CAAA;AAAA,MACrF;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,YAAA,EAAc;AACvD,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,yBAAA,CAA0B,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,CAAK,YAAY,CAAC,CAAA;AAAA,MAC5F;AAGA,MAAA,IAAI,UAAA,CAAW,SAAS,SAAA,EAAW;AAEjC,QAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,gBAAA,CAAiB,QAAA,EAAU,UAAU,CAAC,CAAA;AAAA,MAC1D;AAGA,MAAA,IAAI,UAAA,CAAW,IAAA,KAAS,SAAA,IAAa,IAAA,EAAM,gBAAA,EAAkB;AAC3D,QAAA,KAAA,MAAW,OAAO,IAAA,CAAK,gBAAA,CAAiB,KAAA,CAAM,CAAA,EAAG,CAAC,CAAA,EAAG;AACnD,UAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,yBAAA,CAA0B,QAAA,EAAU,UAAA,CAAW,OAAO,IAAA,CAAK,UAAA,IAAc,EAAA,EAAI,GAAG,CAAC,CAAA;AAAA,QACrG;AAAA,MACF;AAGA,MAAA,IAAI,UAAA,CAAW,SAAS,SAAA,EAAW;AACjC,QAAA,OAAA,CAAQ,IAAA,CAAK,KAAK,wBAAA,CAAyB,QAAA,EAAU,WAAW,KAAA,EAAO,IAAA,EAAM,UAAA,IAAc,EAAE,CAAC,CAAA;AAAA,MAChG;AAGA,MAAA,IAAI,WAAW,IAAA,KAAS,QAAA,IAAY,WAAW,OAAA,CAAQ,QAAA,CAAS,cAAc,CAAA,EAAG;AAC/E,QAAA,MAAM,QAAA,GAAW,IAAA,CAAK,eAAA,CAAgB,UAAA,CAAW,OAAO,CAAA;AACxD,QAAA,IAAI,QAAA,EAAU;AACZ,UAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,sBAAA,CAAuB,QAAA,EAAU,QAAQ,CAAC,CAAA;AAAA,QAC9D;AAAA,MACF;AAGA,MAAA,IAAI,UAAA,CAAW,SAAS,QAAA,EAAU;AAChC,QAAA,MAAM,IAAA,GAAO,IAAA,CAAK,cAAA,CAAe,KAAA,EAAO,WAAW,KAAK,CAAA;AACxD,QAAA,IAAI,IAAA,EAAM;AACR,UAAA,OAAA,CAAQ,KAAK,IAAA,CAAK,6BAAA,CAA8B,UAAU,UAAA,CAAW,KAAA,EAAO,IAAI,CAAC,CAAA;AAAA,QACnF;AAAA,MACF;AAEA,MAAA,IAAI,UAAA,CAAW,SAAS,QAAA,EAAU;AAChC,QAAA,MAAM,IAAA,GAAO,IAAA,CAAK,cAAA,CAAe,KAAA,EAAO,WAAW,KAAK,CAAA;AACxD,QAAA,IAAI,IAAA,EAAM;AACR,UAAA,OAAA,CAAQ,KAAK,IAAA,CAAK,6BAAA,CAA8B,UAAU,UAAA,CAAW,KAAA,EAAO,IAAI,CAAC,CAAA;AAAA,QACnF;AAAA,MACF;AAAA,IACF;AAGA,IAAA,MAAM,QAAA,GAAW,KAAA,CAAM,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,IAAK,EAAA;AAC5C,IAAA,MAAM,OAAA,GAAU,SAAS,IAAA,EAAK;AAG9B,IAAA,IAAI,KAAK,YAAA,CAAa,KAAA,EAAO,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,EAAG;AAC9C,MAAA,MAAM,eAAe,IAAA,CAAK,mBAAA,CAAoB,KAAA,EAAO,KAAA,CAAM,MAAM,IAAI,CAAA;AACrE,MAAA,IAAI,YAAA,EAAc;AAChB,QAAA,OAAA,CAAQ,KAAK,IAAA,CAAK,4BAAA,CAA6B,QAAA,EAAU,YAAA,EAAc,KAAK,CAAC,CAAA;AAAA,MAC/E;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,CAAQ,UAAA,CAAW,QAAQ,CAAA,IAAK,IAAA,CAAK,WAAW,KAAA,EAAO,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,EAAG;AAC5E,MAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,wBAAA,CAAyB,QAAA,EAAU,KAAK,CAAC,CAAA;AAAA,IAC7D;AAGA,IAAA,IAAI,OAAA,CAAQ,KAAA,CAAM,eAAe,CAAA,EAAG;AAClC,MAAA,MAAM,UAAA,GAAa,OAAA,CAAQ,KAAA,CAAM,iBAAiB,IAAI,CAAC,CAAA;AACvD,MAAA,IAAI,UAAA,EAAY;AACd,QAAA,OAAA,CAAQ,KAAK,IAAA,CAAK,iCAAA,CAAkC,QAAA,EAAU,UAAA,EAAY,KAAK,CAAC,CAAA;AAAA,MAClF;AAAA,IACF;AAGA,IAAA,IAAI,KAAK,UAAA,CAAW,KAAA,EAAO,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,EAAG;AAC5C,MAAA,MAAM,UAAA,GAAa,IAAA,CAAK,iBAAA,CAAkB,KAAK,CAAA;AAC/C,MAAA,IAAI,UAAA,EAAY;AACd,QAAA,OAAA,CAAQ,IAAA,CAAK,IAAA,CAAK,4BAAA,CAA6B,QAAA,EAAU,UAAU,CAAC,CAAA;AAAA,MACtE;AAAA,IACF;AAEA,IAAA,OAAO,OAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMQ,4BAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,KAAA,CAAM,IAAA;AAC7B,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,IAAI,aAAA,GAAgB,KAAA;AAEpB,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,KAAA,CAAM,MAAM,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACpD,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,QAAA,CAAS,WAAA,GAAc,YAAY,GAAG,aAAA,GAAgB,IAAA;AAC/D,MAAA,IAAI,aAAA,EAAe;AACjB,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,IAAI,UAAA,KAAe,KAAK,aAAA,EAAe;AACrC,UAAA,UAAA,GAAa,CAAA;AACb,UAAA;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,MAAA,GAAS,IAAA;AACf,IAAA,MAAM,kBAAA,GAAqB;AAAA,EAC7B,MAAM,CAAA;AAAA,EACN,MAAM,GAAG,MAAM,CAAA;AAAA,EACf,MAAM,CAAA,EAAG,MAAM,CAAA,EAAG,MAAM,CAAA;AAAA,EACxB,MAAM,GAAG,MAAM,CAAA;AAAA,EACf,MAAM,CAAA;AAAA,CAAA;AAGJ,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,0BAAA;AAAA,MACP,MAAMC,mCAAA,CAAe,QAAA;AAAA,MACrB,WAAA,EAAa,IAAA;AAAA,MACb,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,MAAA;AAAA,cACP,EAAE,IAAA,EAAM,UAAA,EAAY,SAAA,EAAW,CAAA,EAAE;AAAA,cACjC;AAAA;AACF;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,sBAAA,CAAuB,UAAwB,QAAA,EAA8B;AACnF,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACrC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,CAAE,UAAA,CAAW,SAAS,CAAA,IAAK,IAAA,CAAK,IAAA,EAAK,CAAE,UAAA,CAAW,WAAW,CAAA,EAAG;AAC5E,QAAA,UAAA,GAAa,CAAA;AACb,QAAA;AAAA,MACF;AACA,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,CAAE,UAAA,CAAW,OAAO,CAAA,IAAK,IAAA,CAAK,IAAA,EAAK,CAAE,UAAA,CAAW,OAAO,CAAA,EAAG;AACtE,QAAA,UAAA,GAAa,CAAA,GAAI,CAAA;AAAA,MACnB;AAAA,IACF;AAEA,IAAA,MAAM,cAAA,GAAiB;AAAA,OAAA,EAClB,QAAQ,CAAA;AAAA;AAAA;AAAA,CAAA;AAKb,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,gBAAgB,QAAQ,CAAA,CAAA,CAAA;AAAA,MAC/B,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,cAAc;AAAA;AACpE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,6BAAA,CACN,QAAA,EACA,KAAA,EACA,IAAA,EACY;AACZ,IAAA,MAAM,OAAA,GAAU,KAAK,MAAA,CAAO,CAAC,EAAE,WAAA,EAAY,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA;AAC3D,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,cAAc,OAAO,CAAA,CAAA,CAAA;AAAA,MAC5B,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,SAAS,GAAG,GAAG,CAACC,6BAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,OAAO,CAAC;AAAA;AACnD;AACF,KACF;AAAA,EACF;AAAA,EAEQ,6BAAA,CACN,QAAA,EACA,KAAA,EACA,IAAA,EACY;AACZ,IAAA,MAAM,OAAA,GAAU,KAAK,MAAA,CAAO,CAAC,EAAE,WAAA,EAAY,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA;AAC3D,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,cAAc,OAAO,CAAA,CAAA,CAAA;AAAA,MAC5B,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,SAAS,GAAG,GAAG,CAACC,6BAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,OAAO,CAAC;AAAA;AACnD;AACF,KACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAMQ,4BAAA,CACN,QAAA,EACA,YAAA,EACA,KAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,MAAA,GAAS,CAAA;AAChC,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,MAAA,GAAS,CAAA,EAAG,CAAA,IAAK,GAAG,CAAA,EAAA,EAAK;AAC1C,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,KAAM,GAAA,EAAK;AACvB,QAAA,UAAA,GAAa,CAAA;AACb,QAAA;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,aAAA,GAAgB;AAAA,YAAA,EACZ,YAAY,CAAA;AAAA,yBAAA,EACC,YAAY,CAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,QAAA,EAM7B,YAAY,CAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA,cAAA,EAQN,YAAY,CAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,QAAA,EAMlB,YAAY,CAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAA;AAUlB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,+BAA+B,YAAY,CAAA,CAAA;AAAA,MAClD,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,aAAa;AAAA;AACnE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,wBAAA,CAAyB,UAAwB,KAAA,EAA0B;AACjF,IAAA,MAAM,SAAA,GAAY;AAAA;AAAA;AAAA;AAAA,OAAA,CAAA;AAMlB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,gBAAA;AAAA,MACP,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,MAAA;AAAA,cACP,EAAE,IAAA,EAAM,KAAA,CAAM,MAAM,IAAA,GAAO,CAAA,EAAG,WAAW,CAAA,EAAE;AAAA,cAC3C;AAAA;AACF;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,iCAAA,CACN,QAAA,EACA,UAAA,EACA,KAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,MAAA,GAAS,CAAA;AAChC,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,MAAA,GAAS,CAAA,EAAG,CAAA,IAAK,GAAG,CAAA,EAAA,EAAK;AAC1C,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,KAAM,GAAA,EAAK;AACvB,QAAA,UAAA,GAAa,CAAA;AACb,QAAA;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,aAAA,GAAgB;AAAA,iBAAA,EACP,UAAU,CAAA;AAAA,+BAAA,EACI,UAAU,CAAA;;AAAA;AAAA,+BAAA,EAGV,UAAU;AAAA;;AAAA;AAAA,eAAA,EAI1B,UAAU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,QAAA,EAgBjB,UAAU,CAAA;AAAA;AAAA;AAAA;;AAAA,cAAA,EAKJ,UAAU,CAAA;AAAA,sBAAA,EACF,UAAU,CAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,eAAA,EAOjB,UAAU;;AAAA;AAAA;AAAA,iBAAA,EAIR,UAAU,CAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,iBAAA,EAiBV,UAAU,CAAA;AAAA,qCAAA,EACU,UAAU,CAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,eAAA,EAQhC,UAAU;;AAAA;AAAA;AAAA,iBAAA,EAIR,UAAU,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,MAAA,EAWrB,UAAU,CAAA;AAAA;;AAAA;AAAA;AAAA,QAAA,EAKR,UAAU,CAAA;AAAA;AAAA;AAAA;;AAAA,iBAAA,EAKD,UAAU,CAAA;AAAA,2BAAA,EACA,UAAU,CAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,iBAAA,EAWpB,UAAU,CAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,MAAA,EAOrB,UAAU,CAAA;AAAA;;AAAA;AAAA;AAAA,YAAA,EAKJ,UAAU,CAAA;AAAA;AAAA;AAAA;AAAA,CAAA;AAMpB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,+BAA+B,UAAU,CAAA,CAAA;AAAA,MAChD,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,aAAa;AAAA;AACnE;AACF;AACF,KACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAMQ,uCAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,KAAA,CAAM,IAAA;AAC7B,IAAA,IAAI,UAAA,GAAa,KAAA;AACjB,IAAA,IAAI,QAAA,GAAW,KAAA;AACf,IAAA,IAAI,UAAA,GAAa,CAAA;AAEjB,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACrC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,KAAK,QAAA,CAAS,CAAA,SAAA,EAAY,YAAY,CAAA,CAAE,GAAG,UAAA,GAAa,IAAA;AAC5D,MAAA,IAAI,UAAA,EAAY;AACd,QAAA,IAAI,IAAA,CAAK,IAAA,EAAK,KAAM,UAAA,EAAY,QAAA,GAAW,IAAA;AAC3C,QAAA,IAAI,QAAA,EAAU;AACZ,UAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,UAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,UAAA,IAAI,eAAe,CAAA,EAAG;AACpB,YAAA,UAAA,GAAa,CAAA;AACb,YAAA;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,UAAA,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAA;AASnB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,yCAAA;AAAA,MACP,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,UAAU;AAAA;AAChE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,4BAAA,CACN,QAAA,EACA,KAAA,EACA,QAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,SAAA,GAAY,MAAM,KAAA,CAAM,IAAA;AAC5B,IAAA,IAAI,OAAA,GAAU,MAAM,KAAA,CAAM,IAAA;AAC1B,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,IAAI,KAAA,GAAQ,KAAA;AAEZ,IAAA,KAAA,IAAS,CAAA,GAAI,SAAA,EAAW,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AAC7C,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,IAAI,UAAA,KAAe,KAAK,KAAA,EAAO;AAC7B,QAAA,OAAA,GAAU,CAAA;AACV,QAAA;AAAA,MACF;AACA,MAAA,IAAI,UAAA,GAAa,GAAG,KAAA,GAAQ,IAAA;AAAA,IAC9B;AAEA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,uBAAuB,QAAQ,CAAA,CAAA,CAAA;AAAA,MACtC,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,8BAAS,GAAA,CAAI;AAAA,cACX,KAAA,EAAO,EAAE,IAAA,EAAM,SAAA,EAAW,WAAW,CAAA,EAAE;AAAA,cACvC,KAAK,EAAE,IAAA,EAAM,OAAA,GAAU,CAAA,EAAG,WAAW,CAAA;AAAE,aACxC;AAAA;AACH;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,4BAAA,CACN,QAAA,EACA,KAAA,EACA,WAAA,EACA,UAAA,EACY;AACZ,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,cAAc,UAAU,CAAA,CAAA,CAAA;AAAA,MAC/B,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,SAAS,GAAG,GAAG,CAACC,6BAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,UAAU,CAAC;AAAA;AACtD;AACF,KACF;AAAA,EACF;AAAA,EAEQ,0BAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,IAAA,GAAO,CAAA;AACpC,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,KAAA,CAAM,MAAM,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACpD,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,SAAS,CAAA,SAAA,EAAY,YAAY,EAAE,CAAA,IAAK,IAAA,CAAK,QAAA,CAAS,GAAG,CAAA,EAAG;AACnE,QAAA,UAAA,GAAa,CAAA,GAAI,CAAA;AACjB,QAAA;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,uBAAuB,YAAY,CAAA,CAAA,CAAA;AAAA,MAC1C,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,WAAA,EAAa,IAAA;AAAA,MACb,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,MAAA;AAAA,cACP,EAAE,IAAA,EAAM,UAAA,EAAY,SAAA,EAAW,CAAA,EAAE;AAAA,cACjC,+CAA+C,YAAY,CAAA;;AAAA;AAAA;AAC7D;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,sBAAA,CACN,QAAA,EACA,KAAA,EACA,UAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,IAAA,GAAO,CAAA;AACpC,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,KAAA,CAAM,MAAM,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACpD,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,SAAS,CAAA,OAAA,EAAU,UAAU,EAAE,CAAA,IAAK,IAAA,CAAK,QAAA,CAAS,GAAG,CAAA,EAAG;AAC/D,QAAA,UAAA,GAAa,CAAA,GAAI,CAAA;AACjB,QAAA;AAAA,MACF;AAAA,IACF;AAEA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,sBAAsB,UAAU,CAAA,CAAA,CAAA;AAAA,MACvC,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,WAAA,EAAa,IAAA;AAAA,MACb,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,MAAA;AAAA,cACP,EAAE,IAAA,EAAM,UAAA,EAAY,SAAA,EAAW,CAAA,EAAE;AAAA,cACjC,CAAA;AAAA;AAAA;AACF;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,uBAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,KAAA,CAAM,IAAA;AAC7B,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,IAAI,UAAA,GAAa,KAAA;AAEjB,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,KAAA,CAAM,MAAM,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACpD,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,KAAK,QAAA,CAAS,CAAA,SAAA,EAAY,YAAY,CAAA,CAAE,GAAG,UAAA,GAAa,IAAA;AAC5D,MAAA,IAAI,UAAA,EAAY;AACd,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,IAAI,UAAA,KAAe,KAAK,UAAA,EAAY;AAClC,UAAA,UAAA,GAAa,CAAA;AACb,UAAA;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,aAAA,GAAgB;AAAA;AAAA;AAAA;AAAA,CAAA;AAMtB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,gCAAgC,YAAY,CAAA,CAAA,CAAA;AAAA,MACnD,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,aAAa;AAAA;AACnE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,0BAAA,CACN,QAAA,EACA,KAAA,EACA,SAAA,EACA,oBAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,IAAK,EAAA;AAGxC,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,WAAW,CAAA;AACpC,IAAA,IAAI,CAAC,KAAA,EAAO;AACV,MAAA,OAAO;AAAA,QACL,KAAA,EAAO,uBAAuB,SAAS,CAAA,CAAA,CAAA;AAAA,QACvC,MAAMD,mCAAA,CAAe,QAAA;AAAA,QACrB,IAAA,EAAM,EAAE,OAAA,EAAS,EAAC;AAAE,OACtB;AAAA,IACF;AAEA,IAAA,MAAM,WAAA,GAAc,oBAAA,CAAqB,IAAA,CAAK,IAAI,CAAA;AAClD,IAAA,MAAM,UAAU,IAAA,CAAK,OAAA;AAAA,MACnB,WAAA;AAAA,MACA,UAAU,WAAW,CAAA,EAAA;AAAA,KACvB;AAEA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,gCAAgC,SAAS,CAAA,CAAA,CAAA;AAAA,MAChD,MAAMA,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAA;AAAA,cACP;AAAA,gBACE,OAAO,EAAE,IAAA,EAAM,MAAM,KAAA,CAAM,IAAA,EAAM,WAAW,CAAA,EAAE;AAAA,gBAC9C,GAAA,EAAK,EAAE,IAAA,EAAM,KAAA,CAAM,MAAM,IAAA,EAAM,SAAA,EAAW,KAAK,MAAA;AAAO,eACxD;AAAA,cACA;AAAA;AACF;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,uBAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,KAAA,CAAM,IAAA;AAC7B,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,IAAI,UAAA,GAAa,KAAA;AAEjB,IAAA,KAAA,IAAS,IAAI,KAAA,CAAM,KAAA,CAAM,MAAM,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACpD,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,KAAK,QAAA,CAAS,CAAA,SAAA,EAAY,YAAY,CAAA,CAAE,GAAG,UAAA,GAAa,IAAA;AAC5D,MAAA,IAAI,UAAA,EAAY;AACd,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,QAAA,IAAI,UAAA,KAAe,KAAK,UAAA,EAAY;AAClC,UAAA,UAAA,GAAa,CAAA;AACb,UAAA;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,aAAA,GAAgB;AAAA;AAAA;AAAA;AAAA,CAAA;AAMtB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,iCAAiC,YAAY,CAAA,CAAA,CAAA;AAAA,MACpD,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,aAAa;AAAA;AACnE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,sBAAA,CACN,QAAA,EACA,KAAA,EACA,QAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,IAAK,EAAA;AAGxC,IAAA,MAAM,UAAU,IAAA,CAAK,OAAA;AAAA,MACnB,eAAA;AAAA,MACA;AAAA,KACF;AAEA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,+BAA+B,QAAQ,CAAA,CAAA,CAAA;AAAA,MAC9C,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAA;AAAA,cACP;AAAA,gBACE,OAAO,EAAE,IAAA,EAAM,MAAM,KAAA,CAAM,IAAA,EAAM,WAAW,CAAA,EAAE;AAAA,gBAC9C,GAAA,EAAK,EAAE,IAAA,EAAM,KAAA,CAAM,MAAM,IAAA,EAAM,SAAA,EAAW,KAAK,MAAA;AAAO,eACxD;AAAA,cACA;AAAA;AACF;AACF;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,yBAAA,CACN,QAAA,EACA,KAAA,EACA,YAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAG7B,IAAA,IAAI,UAAA,GAAa,MAAM,KAAA,CAAM,IAAA;AAC7B,IAAA,IAAI,UAAA,GAAa,KAAA;AAEjB,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACrC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,KAAK,QAAA,CAAS,CAAA,SAAA,EAAY,YAAY,CAAA,CAAE,GAAG,UAAA,GAAa,IAAA;AAC5D,MAAA,IAAI,UAAA,IAAc,IAAA,CAAK,IAAA,EAAK,KAAM,SAAA,EAAW;AAC3C,QAAA,UAAA,GAAa,CAAA,GAAI,CAAA;AACjB,QAAA;AAAA,MACF;AAAA,IACF;AAEA,IAAA,MAAM,gBAAA,GAAmB,CAAA;AAAA;AAAA,CAAA;AAIzB,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,sBAAsB,YAAY,CAAA,CAAA,CAAA;AAAA,MACzC,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAO,EAAE,IAAA,EAAM,YAAY,SAAA,EAAW,CAAA,IAAK,gBAAgB;AAAA;AACtE;AACF;AACF,KACF;AAAA,EACF;AAAA,EAEQ,gBAAA,CAAiB,UAAwB,UAAA,EAAoC;AACnF,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,qBAAA;AAAA,MACP,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,OAAA,EAAS;AAAA,QACP,KAAA,EAAO,iBAAA;AAAA,QACP,OAAA,EAAS,gBAAA;AAAA,QACT,SAAA,EAAW,CAAC,UAAA,CAAW,IAAI;AAAA;AAC7B,KACF;AAAA,EACF;AAAA,EAEQ,yBAAA,CACN,QAAA,EACA,KAAA,EACA,WAAA,EACA,UAAA,EACY;AACZ,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,WAAW,UAAU,CAAA,SAAA,CAAA;AAAA,MAC5B,MAAMA,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,SAAS,GAAG,GAAG,CAACC,6BAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,UAAU,CAAC;AAAA;AACtD;AACF,KACF;AAAA,EACF;AAAA,EAEQ,wBAAA,CACN,QAAA,EACA,KAAA,EACA,UAAA,EACY;AACZ,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC7B,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,IAAK,EAAA;AAGxC,IAAA,MAAM,WAAA,GAAc,IAAA,CAAK,KAAA,CAAM,uBAAuB,CAAA;AACtD,IAAA,IAAI,WAAA,EAAa;AACf,MAAA,MAAM,KAAA,GAAQ,WAAA,CAAY,CAAC,CAAA,EAAG,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,CAAA,CAAA,KAAK,CAAA,CAAE,IAAA,EAAM,KAAK,EAAC;AAChE,MAAA,IAAI,KAAA,CAAM,WAAW,CAAA,EAAG;AAEtB,QAAA,OAAO;AAAA,UACL,KAAA,EAAO,yBAAyB,UAAU,CAAA,CAAA,CAAA;AAAA,UAC1C,MAAMD,mCAAA,CAAe,QAAA;AAAA,UACrB,IAAA,EAAM;AAAA,YACJ,OAAA,EAAS;AAAA,cACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,gBACdC,8BAAS,GAAA,CAAI;AAAA,kBACX,OAAO,EAAE,IAAA,EAAM,MAAM,KAAA,CAAM,IAAA,EAAM,WAAW,CAAA,EAAE;AAAA,kBAC9C,GAAA,EAAK,EAAE,IAAA,EAAM,KAAA,CAAM,MAAM,IAAA,GAAO,CAAA,EAAG,WAAW,CAAA;AAAE,iBACjD;AAAA;AACH;AACF;AACF,SACF;AAAA,MACF;AAAA,IACF;AAGA,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,yBAAyB,UAAU,CAAA,CAAA,CAAA;AAAA,MAC1C,MAAMD,mCAAA,CAAe,QAAA;AAAA,MACrB,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS;AAAA,UACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,YACdC,6BAAA,CAAS,OAAA,CAAQ,KAAA,EAAO,EAAE;AAAA;AAC5B;AACF;AACF,KACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAMQ,mBAAA,CAAoB,OAAiB,SAAA,EAAuC;AAClF,IAAA,KAAA,IAAS,CAAA,GAAI,SAAA,EAAW,CAAA,IAAK,CAAA,EAAG,CAAA,EAAA,EAAK;AACnC,MAAA,MAAM,KAAA,GAAQ,KAAA,CAAM,CAAC,CAAA,EAAG,MAAM,wBAAwB,CAAA;AACtD,MAAA,IAAI,KAAA,EAAO,OAAO,KAAA,CAAM,CAAC,CAAA;AAAA,IAC3B;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEQ,gBAAgB,OAAA,EAAqC;AAC3D,IAAA,MAAM,KAAA,GAAQ,OAAA,CAAQ,KAAA,CAAM,sBAAsB,CAAA;AAClD,IAAA,OAAO,QAAQ,CAAC,CAAA;AAAA,EAClB;AAAA,EAEQ,cAAA,CAAe,OAAiB,KAAA,EAAkC;AACxE,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA;AACnC,IAAA,IAAI,CAAC,MAAM,OAAO,MAAA;AAClB,IAAA,OAAO,KAAK,SAAA,CAAU,KAAA,CAAM,MAAM,SAAA,EAAW,KAAA,CAAM,IAAI,SAAS,CAAA;AAAA,EAClE;AAAA,EAEQ,YAAA,CAAa,OAAiB,OAAA,EAA0B;AAC9D,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,KAAA,IAAS,CAAA,GAAI,OAAA,EAAS,CAAA,IAAK,CAAA,EAAG,CAAA,EAAA,EAAK;AACjC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,IAAI,IAAA,CAAK,KAAA,CAAM,sBAAsB,CAAA,IAAK,cAAc,CAAA,EAAG;AACzD,QAAA,OAAO,IAAA;AAAA,MACT;AACA,MAAA,IAAI,IAAA,CAAK,KAAA,CAAM,oBAAoB,CAAA,IAAK,cAAc,CAAA,EAAG;AACvD,QAAA,OAAO,KAAA;AAAA,MACT;AAAA,IACF;AACA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA,EAEQ,UAAA,CAAW,OAAiB,OAAA,EAA0B;AAC5D,IAAA,IAAI,UAAA,GAAa,CAAA;AACjB,IAAA,KAAA,IAAS,CAAA,GAAI,OAAA,EAAS,CAAA,IAAK,CAAA,EAAG,CAAA,EAAA,EAAK;AACjC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,UAAA,IAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAK,CAAA,IAAK,EAAC,EAAG,MAAA;AACxC,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,KAAM,UAAA,IAAc,cAAc,CAAA,EAAG;AACjD,QAAA,OAAO,IAAA;AAAA,MACT;AACA,MAAA,IAAI,IAAA,CAAK,IAAA,EAAK,KAAM,SAAA,IAAa,cAAc,CAAA,EAAG;AAChD,QAAA,OAAO,KAAA;AAAA,MACT;AAAA,IACF;AACA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA,EAEQ,UAAA,CAAW,OAAiB,OAAA,EAA0B;AAC5D,IAAA,KAAA,IAAS,CAAA,GAAI,OAAA,EAAS,CAAA,IAAK,CAAA,EAAG,CAAA,EAAA,EAAK;AACjC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,IAAI,IAAA,CAAK,KAAA,CAAM,kBAAkB,CAAA,EAAG;AAClC,QAAA,OAAO,IAAA;AAAA,MACT;AAAA,IACF;AACA,IAAA,OAAO,KAAA;AAAA,EACT;AAAA,EAEQ,kBAAkB,KAAA,EAAqC;AAC7D,IAAA,KAAA,MAAW,QAAQ,KAAA,EAAO;AACxB,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,oBAAoB,CAAA;AAC7C,MAAA,IAAI,KAAA,EAAO,OAAO,KAAA,CAAM,CAAC,CAAA;AAAA,IAC3B;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEQ,4BAAA,CACN,UACA,UAAA,EACY;AACZ,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,wCAAwC,UAAU,CAAA,CAAA;AAAA,MACzD,MAAMD,mCAAA,CAAe,MAAA;AAAA,MACrB,OAAA,EAAS;AAAA,QACP,KAAA,EAAO,iCAAA;AAAA,QACP,OAAA,EAAS,+BAAA;AAAA,QACT,SAAA,EAAW,CAAC,QAAA,CAAS,GAAA,EAAK,UAAU;AAAA;AACtC,KACF;AAAA,EACF;AACF;ACllCO,IAAM,wBAAN,MAA4B;AAAA,EACjC,MAAA,CAAO,UAAwB,OAAA,EAAwC;AACrE,IAAA,MAAM,IAAA,GAAO,SAAS,OAAA,EAAQ;AAC9B,IAAA,MAAM,SAAA,GAAY,IAAA,CAAK,YAAA,CAAa,IAAA,EAAM,OAAO,CAAA;AAGjD,IAAA,IAAI,cAAc,IAAA,EAAM;AACtB,MAAA,OAAO,EAAC;AAAA,IACV;AAEA,IAAA,OAAO;AAAA,MACLC,6BAAAA,CAAS,OAAA;AAAA,QACP;AAAA,UACE,KAAA,EAAO,EAAE,IAAA,EAAM,CAAA,EAAG,WAAW,CAAA,EAAE;AAAA,UAC/B,GAAA,EAAK,QAAA,CAAS,UAAA,CAAW,IAAA,CAAK,MAAM;AAAA,SACtC;AAAA,QACA;AAAA;AACF,KACF;AAAA,EACF;AAAA,EAEQ,YAAA,CAAa,QAAgB,OAAA,EAAoC;AACvE,IAAA,MAAM,SAAS,OAAA,CAAQ,YAAA,GAAe,IAAI,MAAA,CAAO,OAAA,CAAQ,OAAO,CAAA,GAAI,GAAA;AACpE,IAAA,MAAM,KAAA,GAAQ,MAAA,CAAO,KAAA,CAAM,IAAI,CAAA;AAC/B,IAAA,MAAM,SAAmB,EAAC;AAE1B,IAAA,IAAI,WAAA,GAAc,CAAA;AAClB,IAAA,IAAI,SAAA,GAAY,KAAA;AAChB,IAAA,IAAI,gBAAA,GAAmB,KAAA;AACvB,IAAA,IAAI,oBAAA,GAAuB,KAAA;AAE3B,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,KAAA,CAAM,QAAQ,CAAA,EAAA,EAAK;AACrC,MAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,EAAA;AACzB,MAAA,MAAM,OAAA,GAAU,KAAK,IAAA,EAAK;AAG1B,MAAA,IAAI,MAAA,CAAO,MAAA,KAAW,CAAA,IAAK,OAAA,KAAY,EAAA,EAAI;AACzC,QAAA;AAAA,MACF;AAGA,MAAA,IAAI,OAAA,CAAQ,UAAA,CAAW,IAAI,CAAA,EAAG,SAAA,GAAY,IAAA;AAC1C,MAAA,IAAI,OAAA,CAAQ,QAAA,CAAS,IAAI,CAAA,EAAG,SAAA,GAAY,KAAA;AAGxC,MAAA,IAAI,OAAA,CAAQ,WAAW,GAAG,CAAA,IAAK,QAAQ,UAAA,CAAW,IAAI,KAAK,SAAA,EAAW;AACpE,QAAA,MAAA,CAAO,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,WAAW,IAAI,OAAO,CAAA;AAChD,QAAA,gBAAA,GAAmB,KAAA;AACnB,QAAA,oBAAA,GAAuB,KAAA;AACvB,QAAA;AAAA,MACF;AAGA,MAAA,IAAI,OAAA,CAAQ,UAAA,CAAW,GAAG,CAAA,EAAG;AAC3B,QAAA,WAAA,GAAc,IAAA,CAAK,GAAA,CAAI,CAAA,EAAG,WAAA,GAAc,CAAC,CAAA;AAAA,MAC3C;AAGA,MAAA,IAAI,YAAY,EAAA,EAAI;AAClB,QAAA,IAAI,CAAC,gBAAA,IAAoB,CAAC,oBAAA,IAAwB,MAAA,CAAO,SAAS,CAAA,EAAG;AACnE,UAAA,MAAA,CAAO,KAAK,EAAE,CAAA;AACd,UAAA,gBAAA,GAAmB,IAAA;AAAA,QACrB;AACA,QAAA;AAAA,MACF;AAGA,MAAA,MAAM,UAAA,GAAa,IAAA,CAAK,qBAAA,CAAsB,OAAO,CAAA;AACrD,MAAA,IAAI,cAAc,MAAA,CAAO,MAAA,GAAS,KAAK,CAAC,gBAAA,IAAoB,eAAe,CAAA,EAAG;AAC5E,QAAA,MAAM,WAAW,MAAA,CAAO,MAAA,CAAO,SAAS,CAAC,CAAA,EAAG,MAAK,IAAK,EAAA;AACtD,QAAA,IAAI,QAAA,KAAa,MAAM,QAAA,KAAa,GAAA,IAAO,CAAC,QAAA,CAAS,UAAA,CAAW,GAAG,CAAA,EAAG;AACpE,UAAA,MAAA,CAAO,KAAK,EAAE,CAAA;AAAA,QAChB;AAAA,MACF;AAGA,MAAA,MAAM,aAAA,GAAgB,IAAA,CAAK,UAAA,CAAW,OAAA,EAAS,aAAa,MAAM,CAAA;AAClE,MAAA,MAAA,CAAO,KAAK,aAAa,CAAA;AAGzB,MAAA,IAAI,OAAA,CAAQ,QAAA,CAAS,GAAG,CAAA,EAAG;AACzB,QAAA,WAAA,EAAA;AACA,QAAA,oBAAA,GAAuB,IAAA;AAAA,MACzB,CAAA,MAAO;AACL,QAAA,oBAAA,GAAuB,KAAA;AAAA,MACzB;AAEA,MAAA,gBAAA,GAAmB,KAAA;AAAA,IACrB;AAGA,IAAA,OAAO,MAAA,CAAO,MAAA,GAAS,CAAA,IAAK,MAAA,CAAO,MAAA,CAAO,SAAS,CAAC,CAAA,EAAG,IAAA,EAAK,KAAM,EAAA,EAAI;AACpE,MAAA,MAAA,CAAO,GAAA,EAAI;AAAA,IACb;AAGA,IAAA,OAAO,MAAA,CAAO,IAAA,CAAK,IAAI,CAAA,GAAI,IAAA;AAAA,EAC7B;AAAA,EAEQ,sBAAsB,IAAA,EAAuB;AACnD,IAAA,OACE,KAAK,UAAA,CAAW,SAAS,CAAA,IACzB,IAAA,CAAK,WAAW,WAAW,CAAA,IAC3B,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA,IACvB,IAAA,CAAK,WAAW,OAAO,CAAA,IACvB,KAAK,UAAA,CAAW,aAAa,CAAA,IAC7B,IAAA,CAAK,WAAW,YAAY,CAAA,IAC5B,IAAA,CAAK,UAAA,CAAW,SAAS,CAAA,IACzB,IAAA,CAAK,UAAA,CAAW,OAAO,KACvB,IAAA,CAAK,UAAA,CAAW,YAAY,CAAA,IAC5B,IAAA,CAAK,WAAW,QAAQ,CAAA;AAAA,EAE5B;AAAA,EAEQ,UAAA,CAAW,IAAA,EAAc,WAAA,EAAqB,MAAA,EAAwB;AAE5E,IAAA,IAAI,SAAA,GAAY,MAAA,CAAO,MAAA,CAAO,WAAW,CAAA,GAAI,IAAA;AAG7C,IAAA,SAAA,GAAY,IAAA,CAAK,mBAAmB,SAAS,CAAA;AAG7C,IAAA,SAAA,GAAY,IAAA,CAAK,gBAAgB,SAAS,CAAA;AAG1C,IAAA,SAAA,GAAY,IAAA,CAAK,gBAAgB,SAAS,CAAA;AAG1C,IAAA,SAAA,GAAY,IAAA,CAAK,qBAAqB,SAAS,CAAA;AAE/C,IAAA,OAAO,SAAA;AAAA,EACT;AAAA,EAEQ,mBAAmB,IAAA,EAAsB;AAE/C,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA;AACjC,IAAA,MAAM,MAAA,GAAS,KAAA,GAAQ,KAAA,CAAM,CAAC,CAAA,GAAI,EAAA;AAClC,IAAA,IAAI,OAAA,GAAU,KAAK,IAAA,EAAK;AAGxB,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,MAAM,CAAA;AAC7C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,MAAM,CAAA;AAC7C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,MAAM,CAAA;AAC7C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,MAAM,CAAA;AAC7C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,UAAA,EAAY,KAAK,CAAA;AAC3C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,UAAA,EAAY,KAAK,CAAA;AAG3C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,YAAA,EAAc,OAAO,CAAA;AAC/C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,MAAM,CAAA;AAC7C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,gBAAA,EAAkB,WAAW,CAAA;AAGvD,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,KAAK,CAAA;AAC5C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,UAAA,EAAY,KAAK,CAAA;AAC3C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,KAAK,CAAA;AAC5C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,KAAK,CAAA;AAG5C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,KAAA,EAAO,GAAG,CAAA;AACpC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,KAAA,EAAO,GAAG,CAAA;AACpC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,KAAA,EAAO,IAAI,CAAA;AAGrC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,QAAA,EAAU,MAAM,CAAA;AAC1C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,UAAA,EAAY,MAAM,CAAA;AAE5C,IAAA,OAAO,MAAA,GAAS,OAAA;AAAA,EAClB;AAAA,EAEQ,gBAAgB,IAAA,EAAsB;AAC5C,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA;AACjC,IAAA,MAAM,MAAA,GAAS,KAAA,GAAQ,KAAA,CAAM,CAAC,CAAA,GAAI,EAAA;AAClC,IAAA,IAAI,OAAA,GAAU,KAAK,IAAA,EAAK;AAGxB,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,eAAA,EAAiB,MAAM,CAAA;AAKjD,IAAA,OAAO,MAAA,GAAS,OAAA;AAAA,EAClB;AAAA,EAEQ,gBAAgB,IAAA,EAAsB;AAC5C,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA;AACjC,IAAA,MAAM,MAAA,GAAS,KAAA,GAAQ,KAAA,CAAM,CAAC,CAAA,GAAI,EAAA;AAClC,IAAA,IAAI,OAAA,GAAU,KAAK,IAAA,EAAK;AAGxB,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,WAAA,EAAa,IAAI,CAAA;AAG3C,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,SAAA,EAAW,MAAM,CAAA;AAE3C,IAAA,OAAO,MAAA,GAAS,OAAA;AAAA,EAClB;AAAA,EAEQ,qBAAqB,IAAA,EAAsB;AACjD,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,QAAQ,CAAA;AACjC,IAAA,MAAM,MAAA,GAAS,KAAA,GAAQ,KAAA,CAAM,CAAC,CAAA,GAAI,EAAA;AAClC,IAAA,IAAI,OAAA,GAAU,KAAK,IAAA,EAAK;AAGxB,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,QAAA,EAAU,GAAG,CAAA;AACvC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,QAAA,EAAU,GAAG,CAAA;AAGvC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,IAAI,CAAA;AACvC,IAAA,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,SAAA,EAAW,GAAG,CAAA;AAExC,IAAA,OAAO,MAAA,GAAS,OAAA;AAAA,EAClB;AACF;AC5MA,IAAM,oBAAA,uBAA2B,GAAA,CAAI,CAAC,OAAO,MAAA,EAAQ,KAAA,EAAO,MAAM,CAAC,CAAA;AACnE,IAAM,WAAA,GAAc;AACpB,IAAM,kBAAA,GAAqB;AAM3B,SAAS,kBAAkB,IAAA,EAAgE;AACzF,EAAA,QAAQ,IAAA;AAAM,IACZ,KAAK,YAAA;AACH,MAAA,OAAOR,uCAAAA,CAAmB,KAAA;AAAA,IAC5B,KAAK,YAAA;AACH,MAAA,OAAOA,uCAAAA,CAAmB,OAAA;AAAA,IAC5B,KAAK,MAAA;AACH,MAAA,OAAOA,uCAAAA,CAAmB,WAAA;AAAA,IAC5B;AACE,MAAA,OAAOA,uCAAAA,CAAmB,OAAA;AAAA;AAEhC;AAEA,SAAS,cAAc,QAAA,EAAsE;AAC3F,EAAA,QAAQ,QAAA;AAAU,IAChB,KAAK,UAAA;AAAA,IACL,KAAK,MAAA;AACH,MAAA,OAAOA,uCAAAA,CAAmB,KAAA;AAAA,IAC5B,KAAK,QAAA;AACH,MAAA,OAAOA,uCAAAA,CAAmB,OAAA;AAAA,IAC5B,KAAK,KAAA;AACH,MAAA,OAAOA,uCAAAA,CAAmB,WAAA;AAAA,IAC5B;AACE,MAAA,OAAOA,uCAAAA,CAAmB,OAAA;AAAA;AAEhC;AAOA,SAAS,qBAAqB,KAAA,EAA8E;AAC1G,EAAA,MAAM,EAAE,IAAA,EAAM,MAAA,EAAQ,MAAA,KAAW,KAAA,CAAM,QAAA;AACvC,EAAA,OAAO;AAAA,IACL,KAAA,EAAO,EAAE,IAAA,EAAM,IAAA,GAAO,CAAA,EAAG,SAAA,EAAW,IAAA,CAAK,GAAA,CAAI,CAAA,EAAG,MAAA,GAAS,CAAC,CAAA,EAAE;AAAA,IAC5D,GAAA,EAAK,EAAE,IAAA,EAAM,IAAA,GAAO,CAAA,EAAG,SAAA,EAAW,IAAA,CAAK,GAAA,CAAI,CAAA,EAAG,MAAA,GAAS,CAAA,GAAI,MAAM,CAAA;AAAE,GACrE;AACF;AAGA,SAAS,aAAA,CAAc,UAAwB,OAAA,EAAwB;AACrE,EAAA,MAAM,KAAA,GAAQ,cAAA,CAAe,IAAA,CAAK,OAAO,CAAA;AACzC,EAAA,MAAM,OAAO,KAAA,GAAQ,QAAA,CAAS,MAAM,CAAC,CAAA,EAAG,EAAE,CAAA,GAAI,CAAA;AAC9C,EAAA,MAAM,SAAA,GAAY,IAAA,CAAK,GAAA,CAAI,CAAA,EAAG,OAAO,CAAC,CAAA;AACtC,EAAA,MAAM,OAAO,QAAA,CAAS,OAAA,GAAU,KAAA,CAAM,IAAI,EAAE,SAAS,CAAA;AACrD,EAAA,MAAM,OAAA,GAAU,IAAA,KAAS,MAAA,GAAY,IAAA,CAAK,MAAA,GAAS,CAAA;AACnD,EAAA,OAAO;AAAA,IACL,KAAA,EAAO,EAAE,IAAA,EAAM,SAAA,EAAW,WAAW,CAAA,EAAE;AAAA,IACvC,GAAA,EAAK,EAAE,IAAA,EAAM,SAAA,EAAW,WAAW,OAAA;AAAQ,GAC7C;AACF;AAeA,IAAM,eAAA,GAA6C;AAAA,EACjD,WAAA,EAAa,QAAQ,GAAA,EAAI;AAAA,EACzB,OAAA,EAAS,IAAA;AAAA,EACT,WAAA,EAAa,IAAA;AAAA,EACb,iBAAA,EAAmB;AACrB,CAAA;AAEO,IAAM,6BAAN,MAAiC;AAAA,EAC9B,OAAA;AAAA,EACA,gBAAA;AAAA,EAER,WAAA,CAAY,OAAA,GAA8C,EAAC,EAAG;AAC5D,IAAA,IAAA,CAAK,OAAA,GAAU,EAAE,GAAG,eAAA,EAAiB,GAAG,OAAA,EAAQ;AAChD,IAAA,IAAA,CAAK,mBAAmBS,iCAAA,CAAyB;AAAA,MAC/C,WAAA,EAAa,KAAK,OAAA,CAAQ,WAAA;AAAA,MAC1B,IAAA,EAAM;AAAA,KACP,CAAA;AAAA,EACH;AAAA,EAEA,UAAU,OAAA,EAAmD;AAC3D,IAAA,IAAA,CAAK,UAAU,EAAE,GAAG,IAAA,CAAK,OAAA,EAAS,GAAG,OAAA,EAAQ;AAC7C,IAAA,IAAA,CAAK,mBAAmBA,iCAAA,CAAyB;AAAA,MAC/C,WAAA,EAAa,KAAK,OAAA,CAAQ,WAAA;AAAA,MAC1B,IAAA,EAAM;AAAA,KACP,CAAA;AAAA,EACH;AAAA;AAAA,EAGA,YAAY,QAAA,EAAiC;AAC3C,IAAA,MAAMN,KAAAA,GAAO,aAAA,CAAc,QAAA,CAAS,GAAG,CAAA;AACvC,IAAA,MAAM,GAAA,GAAMA,KAAAA,CAAK,QAAA,CAAS,GAAG,CAAA,GAAIA,KAAAA,CAAK,KAAA,CAAMA,KAAAA,CAAK,WAAA,CAAY,GAAG,CAAC,CAAA,GAAI,EAAA;AACrE,IAAA,OAAO,oBAAA,CAAqB,GAAA,CAAI,GAAA,CAAI,WAAA,EAAa,CAAA;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,mBAAmB,QAAA,EAA+C;AACtE,IAAA,IAAI,CAAC,KAAK,OAAA,CAAQ,OAAA,IAAW,CAAC,IAAA,CAAK,WAAA,CAAY,QAAQ,CAAA,EAAG;AACxD,MAAA,OAAO,EAAC;AAAA,IACV;AAEA,IAAA,MAAM,QAAA,GAAW,aAAA,CAAc,QAAA,CAAS,GAAG,CAAA;AAC3C,IAAoB,IAAA,CAAK,OAAA,CAAQ,WAAA,IAAe,QAAA,CAAS,KAAA,CAAM,OAAO,CAAA,CAAE,KAAA,CAAM,CAAA,EAAG,EAAE,CAAA,CAAE,KAAK,GAAG;AAE7F,IAAA,IAAA,CAAK,gBAAA,CAAiB,QAAQ,SAAS,CAAA;AACvC,IAAA,MAAM,MAAA,GAA+B,MAAM,IAAA,CAAK,gBAAA,CAAiB,QAAA,CAAS;AAAA,MACxE,QAAA;AAAA,MACA,OAAA,EAAS,SAAS,OAAA;AAAQ,KAC3B,CAAA;AAED,IAAA,OAAO,IAAA,CAAK,sBAAA,CAAuB,QAAA,EAAU,MAAM,CAAA;AAAA,EACrD;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,sBAAA,CAAuB,UAAwB,MAAA,EAA4C;AACjG,IAAA,MAAM,cAA4B,EAAC;AACnC,IAAA,MAAM,SAAA,GAAY,IAAI,GAAA,CAAI,MAAA,CAAO,MAAA,CAAO,GAAA,CAAI,CAAA,CAAA,KAAK,CAAC,CAAA,CAAE,EAAA,EAAI,CAAC,CAAC,CAAC,CAAA;AAE3D,IAAA,KAAA,MAAW,CAAA,IAAK,OAAO,UAAA,EAAY;AACjC,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,iBAAA,CAAkB,QAAA,EAAU,GAAG,SAAS,CAAA;AAC3D,MAAA,MAAM,QAAA,GAAW,EAAE,QAAA,GACf,aAAA,CAAc,EAAE,QAAQ,CAAA,GACxB,iBAAA,CAAkB,CAAA,CAAE,IAAI,CAAA;AAE5B,MAAA,MAAM,MAAA,GAAS,eAAA,CAAgB,CAAA,CAAE,QAAQ,IAAI,WAAA,GAAc,kBAAA;AAE3D,MAAA,WAAA,CAAY,IAAA,CAAK;AAAA,QACf,KAAA;AAAA,QACA,SAAS,CAAA,CAAE,OAAA;AAAA,QACX,QAAA;AAAA,QACA,MAAM,CAAA,CAAE,QAAA;AAAA,QACR,MAAA;AAAA,QACA,IAAA,EAAM;AAAA,UACJ,YAAY,CAAA,CAAE,UAAA;AAAA,UACd,MAAM,CAAA,CAAE,IAAA;AAAA,UACR,YAAY,CAAA,CAAE;AAAA;AAChB,OACD,CAAA;AAAA,IACH;AAEA,IAAA,OAAO,WAAA;AAAA,EACT;AAAA,EAEQ,iBAAA,CACN,QAAA,EACA,CAAA,EACA,SAAA,EACO;AACP,IAAA,MAAM,KAAA,GAAQ,SAAA,CAAU,GAAA,CAAI,CAAA,CAAE,OAAO,CAAA;AACrC,IAAA,IAAI,OAAO,QAAA,EAAU;AACnB,MAAA,OAAO,qBAAqB,KAAK,CAAA;AAAA,IACnC;AACA,IAAA,OAAO,aAAA,CAAc,QAAA,EAAU,CAAA,CAAE,OAAO,CAAA;AAAA,EAC1C;AACF;AAGA,SAAS,gBAAgB,QAAA,EAA2B;AAClD,EAAA,OACE,aAAa,aAAA,IACb,QAAA,KAAa,WAAA,IACb,QAAA,KAAa,kBACb,QAAA,KAAa,YAAA;AAEjB;AAEA,SAAS,cAAc,GAAA,EAAqB;AAC1C,EAAA,IAAI,GAAA,CAAI,UAAA,CAAW,SAAS,CAAA,EAAG;AAC7B,IAAA,OAAO,GAAA,CAAI,KAAA,CAAM,CAAC,CAAA,CAAE,OAAA,CAAQ,SAAS,GAAG,CAAA,CAAE,OAAA,CAAQ,OAAA,EAAS,IAAI,CAAA;AAAA,EACjE;AACA,EAAA,OAAO,GAAA;AACT;ACpKO,IAAM,YAAN,MAAgB;AAAA,EACb,UAAA;AAAA,EACA,SAAA;AAAA,EACA,eAAA;AAAA,EACA,kBAAA;AAAA,EACA,aAAA;AAAA,EACA,mBAAA;AAAA,EACA,kBAAA;AAAA,EACA,cAAA;AAAA,EACA,sBAAA;AAAA,EACA,kBAAA;AAAA,EACA,kBAAA;AAAA,EACA,0BAAA;AAAA,EACA,gBAAA,uBAAuB,GAAA,EAA4B;AAAA,EACnD,sBAAA,uBAA6B,GAAA,EAA0B;AAAA,EACvD,eAAA,uBAAsB,GAAA,EAAoB;AAAA,EAElD,WAAA,GAAc;AACZ,IAAA,IAAA,CAAK,UAAA,GAAaO,wBAAA,CAAiBC,wBAAA,CAAiB,GAAG,CAAA;AACvD,IAAA,IAAA,CAAK,SAAA,GAAY,IAAIC,qBAAA,CAAcC,6CAAY,CAAA;AAC/C,IAAA,IAAA,CAAK,eAAA,GAAkB,IAAI,kBAAA,EAAmB;AAC9C,IAAA,IAAA,CAAK,kBAAA,GAAqB,IAAI,qBAAA,CAAsB,IAAA,CAAK,eAAe,CAAA;AACxE,IAAA,IAAA,CAAK,aAAA,GAAgB,IAAI,gBAAA,CAAiB,IAAA,CAAK,eAAe,CAAA;AAC9D,IAAA,IAAA,CAAK,mBAAA,GAAsB,IAAI,sBAAA,CAAuB,IAAA,CAAK,eAAe,CAAA;AAC1E,IAAA,IAAA,CAAK,kBAAA,GAAqB,IAAI,qBAAA,CAAsB,IAAA,CAAK,eAAe,CAAA;AACxE,IAAA,IAAA,CAAK,cAAA,GAAiB,IAAI,iBAAA,CAAkB,IAAA,CAAK,eAAe,CAAA;AAChE,IAAA,IAAA,CAAK,sBAAA,GAAyB,IAAI,yBAAA,CAA0B,IAAA,CAAK,eAAe,CAAA;AAChF,IAAA,IAAA,CAAK,kBAAA,GAAqB,IAAI,qBAAA,CAAsB,IAAA,CAAK,eAAe,CAAA;AACxE,IAAA,IAAA,CAAK,kBAAA,GAAqB,IAAI,qBAAA,EAAsB;AACpD,IAAA,IAAA,CAAK,0BAAA,GAA6B,IAAI,0BAAA,EAA2B;AAEjE,IAAA,IAAA,CAAK,aAAA,EAAc;AAAA,EACrB;AAAA,EAEQ,aAAA,GAAsB;AAE5B,IAAA,IAAA,CAAK,UAAA,CAAW,YAAA,CAAa,CAAC,MAAA,KAA+C;AAC3E,MAAA,OAAO;AAAA,QACL,YAAA,EAAc;AAAA,UACZ,kBAAkBC,4BAAA,CAAqB,WAAA;AAAA,UACvC,kBAAA,EAAoB;AAAA,YAClB,mBAAmB,CAAC,GAAA,EAAK,GAAA,EAAK,GAAA,EAAK,KAAK,GAAG,CAAA;AAAA,YAC3C,eAAA,EAAiB;AAAA,WACnB;AAAA,UACA,aAAA,EAAe,IAAA;AAAA,UACf,kBAAA,EAAoB,IAAA;AAAA,UACpB,sBAAA,EAAwB,IAAA;AAAA,UACxB,0BAAA,EAA4B,IAAA;AAAA,UAC5B,kBAAA,EAAoB;AAAA,YAClB,eAAA,EAAiB;AAAA,cACfP,sBAAAA,CAAe,QAAA;AAAA,cACfA,sBAAAA,CAAe,QAAA;AAAA,cACfA,sBAAAA,CAAe;AAAA;AACjB,WACF;AAAA,UACA,sBAAA,EAAwB;AAAA,YACtB,MAAA,EAAQ;AAAA,cACN,UAAA,EAAY,WAAA;AAAA,cACZ,cAAA,EAAgB;AAAA,aAClB;AAAA,YACA,IAAA,EAAM;AAAA,WACR;AAAA,UACA,SAAA,EAAW;AAAA,YACT,gBAAA,EAAkB;AAAA,cAChB,SAAA,EAAW;AAAA;AACb;AACF;AACF,OACF;AAAA,IACF,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAC,KAAA,KAAU;AAClC,MAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,KAAA,CAAM,QAAA,EAAU,IAAI,CAAA;AACxD,MAAA,IAAA,CAAK,gBAAA,CAAiB,MAAM,QAAQ,CAAA;AAAA,IACtC,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,SAAA,CAAU,kBAAA,CAAmB,CAAC,MAAA,KAAkD;AACnF,MAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,MAAA,CAAO,QAAA,EAAU,KAAK,CAAA;AAC1D,MAAA,IAAA,CAAK,kBAAA,CAAmB,OAAO,QAAQ,CAAA;AAAA,IACzC,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAC,KAAA,KAAU;AAClC,MAAA,MAAM,MAAM,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,KAAA,CAAM,SAAS,GAAG,CAAA;AACjD,MAAA,IAAI,GAAA,EAAK;AACP,QAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,GAAA,EAAK,IAAI,CAAA;AAC7C,QAAA,IAAA,CAAK,iBAAiB,GAAG,CAAA;AAAA,MAC3B;AAAA,IACF,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,SAAA,CAAU,UAAA,CAAW,CAAC,KAAA,KAAU;AACnC,MAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,KAAA,CAAM,QAAA,CAAS,GAAG,CAAA;AACtD,MAAA,IAAA,CAAK,gBAAA,CAAiB,KAAA,CAAM,QAAA,CAAS,GAAG,CAAA;AAAA,IAC1C,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,YAAA,CAAa,CAAC,MAAA,KAA2D;AACvF,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,QAAA,EAAU,OAAO,EAAC;AAEvB,MAAA,MAAM,QAAQ,IAAA,CAAK,kBAAA,CAAmB,kBAAA,CAAmB,QAAA,EAAU,OAAO,QAAQ,CAAA;AAClF,MAAA,OAAO,KAAA,CAAM,GAAA,CAAI,CAAC,IAAA,EAAM,KAAA,MAAW;AAAA,QACjC,OAAO,IAAA,CAAK,KAAA;AAAA,QACZ,IAAA,EAAM,IAAA,CAAK,iBAAA,CAAkB,IAAA,CAAK,IAAI,CAAA;AAAA,QACtC,QAAQ,IAAA,CAAK,MAAA;AAAA,QACb,eAAe,IAAA,CAAK,aAAA;AAAA,QACpB,YAAY,IAAA,CAAK,UAAA;AAAA,QACjB,gBAAA,EAAkB,IAAA,CAAK,gBAAA,KAAqB,SAAA,GAAY,CAAA,GAAI,CAAA;AAAA,QAC5D,UAAU,IAAA,CAAK,QAAA;AAAA,QACf,YAAY,IAAA,CAAK,UAAA;AAAA,QACjB,WAAW,IAAA,CAAK,SAAA;AAAA,QAChB,YAAY,IAAA,CAAK,UAAA;AAAA,QACjB,IAAA,EAAM;AAAA,OACR,CAAE,CAAA;AAAA,IACJ,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,OAAA,CAAQ,CAAC,MAAA,KAAqD;AAC5E,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,UAAU,OAAO,IAAA;AAGtB,MAAA,MAAM,eAAe,IAAA,CAAK,eAAA,CAAgB,OAAO,YAAA,CAAa,GAAA,EAAK,OAAO,QAAQ,CAAA;AAClF,MAAA,IAAI,cAAc,OAAO,YAAA;AAEzB,MAAA,MAAM,QAAQ,IAAA,CAAK,aAAA,CAAc,YAAA,CAAa,QAAA,EAAU,OAAO,QAAQ,CAAA;AACvE,MAAA,IAAI,CAAC,OAAO,OAAO,IAAA;AAEnB,MAAA,OAAO;AAAA,QACL,QAAA,EAAU;AAAA,UACR,IAAA,EAAM,UAAA;AAAA,UACN,OAAO,KAAA,CAAM;AAAA,SACf;AAAA,QACA,OAAO,KAAA,CAAM;AAAA,OACf;AAAA,IACF,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,YAAA,CAAa,CAAC,MAAA,KAA0D;AACtF,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,UAAU,OAAO,IAAA;AAEtB,MAAA,OAAO,IAAA,CAAK,kBAAA,CAAmB,iBAAA,CAAkB,QAAA,EAAU,OAAO,QAAQ,CAAA;AAAA,IAC5E,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,gBAAA,CAAiB,CAAC,MAAA,KAAmD;AACnF,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,QAAA,EAAU,OAAO,EAAC;AAEvB,MAAA,MAAM,OAAA,GAAU,IAAA,CAAK,cAAA,CAAe,cAAA,CAAe,QAAQ,CAAA;AAC3D,MAAA,OAAO,QAAQ,GAAA,CAAI,CAAC,QAAQ,IAAA,CAAK,SAAA,CAAU,GAAG,CAAC,CAAA;AAAA,IACjD,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,YAAA,CAAa,CAAC,MAAA,KAA2C;AACvE,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,QAAA,EAAU,OAAO,EAAC;AAEvB,MAAA,MAAM,OAAA,GAAU,KAAK,kBAAA,CAAmB,kBAAA,CAAmB,UAAU,MAAA,CAAO,KAAA,EAAO,OAAO,OAAO,CAAA;AAGjG,MAAA,KAAA,MAAW,IAAA,IAAQ,MAAA,CAAO,OAAA,CAAQ,WAAA,EAAa;AAC7C,QAAA,IAAI,IAAA,CAAK,MAAA,KAAW,WAAA,IAAe,IAAA,CAAK,WAAW,kBAAA,EAAoB;AAEvE,QAAA,MAAM,OAAO,IAAA,CAAK,IAAA;AAGlB,QAAA,MAAM,kBAAkB,IAAA,CAAK,MAAA,KAAW,cACpC,CAAA,kBAAA,CAAA,GACA,CAAA,oBAAA,EAAuB,KAAK,IAAI,CAAA,CAAA;AAEpC,QAAA,OAAA,CAAQ,IAAA,CAAK;AAAA,UACX,KAAA,EAAO,CAAA,SAAA,EAAY,IAAA,CAAK,IAAI,CAAA,cAAA,CAAA;AAAA,UAC5B,MAAMA,sBAAAA,CAAe,QAAA;AAAA,UACrB,WAAA,EAAa,CAAC,IAAI,CAAA;AAAA,UAClB,IAAA,EAAM;AAAA,YACJ,OAAA,EAAS;AAAA,cACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,gBACdC,gBAAAA,CAAS,MAAA;AAAA,kBACP,EAAE,IAAA,EAAM,IAAA,CAAK,MAAM,KAAA,CAAM,IAAA,EAAM,WAAW,CAAA,EAAE;AAAA,kBAC5C,eAAA,GAAkB;AAAA;AACpB;AACF;AACF;AACF,SACD,CAAA;AAGD,QAAA,IAAI,MAAM,UAAA,EAAY;AACpB,UAAA,KAAA,MAAW,GAAA,IAAO,KAAK,UAAA,EAAY;AACjC,YAAA,OAAA,CAAQ,IAAA,CAAK;AAAA,cACX,OAAO,GAAA,CAAI,KAAA;AAAA,cACX,MAAMD,sBAAAA,CAAe,QAAA;AAAA,cACrB,WAAA,EAAa,CAAC,IAAI,CAAA;AAAA,cAClB,IAAA,EAAM;AAAA,gBACJ,OAAA,EAAS;AAAA,kBACP,CAAC,QAAA,CAAS,GAAG,GAAG;AAAA,oBACdC,gBAAAA,CAAS,OAAA,CAAQ,IAAA,CAAK,KAAA,EAAO,IAAI,IAAI;AAAA;AACvC;AACF;AACF,aACD,CAAA;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAEA,MAAA,OAAO,OAAA;AAAA,IACT,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,oBAAA,CAAqB,CAAC,MAAA,KAAiD;AACrF,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,QAAA,EAAU,OAAO,EAAC;AAEvB,MAAA,OAAO,IAAA,CAAK,kBAAA,CAAmB,MAAA,CAAO,QAAA,EAAU,OAAO,OAAO,CAAA;AAAA,IAChE,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,SAAA,CAAU,cAAA,CAAe,EAAA,CAAG,CAAC,MAAA,KAAiC;AAC5E,MAAA,MAAM,WAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,MAAA,CAAO,aAAa,GAAG,CAAA;AAC3D,MAAA,IAAI,CAAC,QAAA,EAAU,OAAO,EAAE,IAAA,EAAM,EAAC,EAAE;AAEjC,MAAA,MAAM,MAAA,GAAS,IAAA,CAAK,sBAAA,CAAuB,aAAA,CAAc,QAAQ,CAAA;AACjE,MAAA,MAAM,OAAA,GAAU,IAAIO,6BAAA,EAAsB;AAE1C,MAAA,KAAA,MAAW,SAAS,MAAA,EAAQ;AAC1B,QAAA,OAAA,CAAQ,IAAA;AAAA,UACN,KAAA,CAAM,IAAA;AAAA,UACN,KAAA,CAAM,SAAA;AAAA,UACN,KAAA,CAAM,MAAA;AAAA,UACN,WAAA,CAAY,OAAA,CAAQ,KAAA,CAAM,SAAS,CAAA;AAAA,UACnC,IAAA,CAAK,eAAA,CAAgB,KAAA,CAAM,cAAc;AAAA,SAC3C;AAAA,MACF;AAEA,MAAA,OAAO,QAAQ,KAAA,EAAM;AAAA,IACvB,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,UAAA,CAAW,SAAA,CAAU,cAAA,EAAgB,CAAC,MAAA,KAA4B;AACrE,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,OAAO,GAAG,CAAA;AAC9C,MAAA,IAAI,CAAC,QAAA,EAAU;AACb,QAAA,OAAO,EAAE,KAAA,EAAO,KAAA,EAAO,MAAA,EAAQ,CAAC,oBAAoB,CAAA,EAAE;AAAA,MACxD;AAGA,MAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,QAAA,EAAU,IAAI,CAAA;AAClD,MAAA,MAAM,WAAA,GAAc,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,OAAO,GAAG,CAAA;AAClE,MAAA,MAAM,MAAA,GAAS,WAAA,CACZ,MAAA,CAAO,CAAA,CAAA,KAAK,CAAA,CAAE,QAAA,KAAaf,0BAAAA,CAAmB,KAAK,CAAA,CACnD,GAAA,CAAI,CAAA,CAAA,KAAK,CAAA,CAAE,OAAO,CAAA;AAErB,MAAA,OAAO,EAAE,KAAA,EAAO,MAAA,CAAO,MAAA,KAAW,GAAG,MAAA,EAAO;AAAA,IAC9C,CAAC,CAAA;AAGD,IAAA,IAAA,CAAK,SAAA,CAAU,MAAA,CAAO,IAAA,CAAK,UAAU,CAAA;AAAA,EACvC;AAAA,EAEQ,mBAAmB,QAAA,EAA8B;AACvD,IAAA,MAAM,MAAM,QAAA,CAAS,GAAA;AAGrB,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,gBAAA,CAAiB,GAAA,CAAI,GAAG,CAAA;AAC9C,IAAA,IAAI,QAAA,EAAU;AACZ,MAAA,YAAA,CAAa,QAAQ,CAAA;AAAA,IACvB;AAGA,IAAA,MAAM,KAAA,GAAQ,WAAW,MAAM;AAC7B,MAAA,IAAA,CAAK,gBAAA,CAAiB,OAAO,GAAG,CAAA;AAChC,MAAA,MAAM,GAAA,GAAM,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,GAAG,CAAA;AAClC,MAAA,IAAI,GAAA,EAAK;AACP,QAAA,IAAA,CAAK,iBAAiB,GAAG,CAAA;AAAA,MAC3B;AAAA,IACF,GAAG,GAAG,CAAA;AAEN,IAAA,IAAA,CAAK,gBAAA,CAAiB,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAAA,EACtC;AAAA,EAEQ,iBAAiB,QAAA,EAA8B;AAErD,IAAA,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,QAAA,EAAU,IAAI,CAAA;AAGlD,IAAA,MAAM,cAAA,GAAiB,IAAA,CAAK,eAAA,CAAgB,cAAA,CAAe,SAAS,GAAG,CAAA;AAEvE,IAAA,MAAM,iBAAA,GAAoB,cAAA,CAAe,GAAA,CAAI,CAAC,CAAA,MAAO;AAAA,MACnD,KAAA,EAAO,kBAAA,CAAmB,OAAA,CAAQ,CAAA,CAAE,QAAQ,CAAA;AAAA,MAC5C,SAAS,CAAA,CAAE,OAAA;AAAA,MACX,UAAU,CAAA,CAAE,QAAA;AAAA,MACZ,MAAM,CAAA,CAAE,IAAA;AAAA,MACR,QAAQ,CAAA,CAAE,MAAA;AAAA,MACV,kBAAA,EAAoB,CAAA,CAAE,WAAA,EAAa,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,QAC3C,QAAA,EAAU;AAAA,UACR,KAAK,QAAA,CAAS,GAAA;AAAA,UACd,KAAA,EAAO,kBAAA,CAAmB,OAAA,CAAQ,CAAA,CAAE,QAAQ;AAAA,SAC9C;AAAA,QACA,SAAS,CAAA,CAAE;AAAA,OACb,CAAE;AAAA,KACJ,CAAE,CAAA;AAGF,IAAA,IAAA,CAAK,WAAW,eAAA,CAAgB;AAAA,MAC9B,KAAK,QAAA,CAAS,GAAA;AAAA,MACd,WAAA,EAAa;AAAA,KACd,CAAA;AAGD,IAAA,IAAA,CAAK,qBAAA,CAAsB,UAAU,iBAAiB,CAAA;AAAA,EACxD;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,qBAAA,CACZ,QAAA,EACA,iBAAA,EACe;AACf,IAAA,IAAI;AACF,MAAA,IAAI,CAAC,IAAA,CAAK,0BAAA,CAA2B,WAAA,CAAY,QAAQ,CAAA,EAAG;AAE1D,QAAA,IAAA,CAAK,sBAAA,CAAuB,MAAA,CAAO,QAAA,CAAS,GAAG,CAAA;AAC/C,QAAA;AAAA,MACF;AAGA,MAAA,MAAM,iBAAiB,QAAA,CAAS,OAAA;AAChC,MAAA,IAAA,CAAK,eAAA,CAAgB,GAAA,CAAI,QAAA,CAAS,GAAA,EAAK,cAAc,CAAA;AAErD,MAAA,MAAM,YAAA,GAAe,MAAM,IAAA,CAAK,0BAAA,CAA2B,mBAAmB,QAAQ,CAAA;AAGtF,MAAA,IAAA,CAAK,KAAK,eAAA,CAAgB,GAAA,CAAI,SAAS,GAAG,CAAA,IAAK,KAAK,cAAA,EAAgB;AAClE,QAAA;AAAA,MACF;AAEA,MAAA,IAAA,CAAK,sBAAA,CAAuB,GAAA,CAAI,QAAA,CAAS,GAAA,EAAK,YAAY,CAAA;AAG1D,MAAA,MAAM,MAAA,GAAS,KAAK,sBAAA,CAAuB,CAAC,GAAG,iBAAA,EAAmB,GAAG,YAAY,CAAC,CAAA;AAGlF,MAAA,IAAA,CAAK,WAAW,eAAA,CAAgB;AAAA,QAC9B,KAAK,QAAA,CAAS,GAAA;AAAA,QACd,WAAA,EAAa;AAAA,OACd,CAAA;AAAA,IACH,SAAS,GAAA,EAAK;AAEZ,MAAA,OAAA,CAAQ,KAAA,CAAM,gCAAgC,GAAG,CAAA;AAAA,IACnD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,uBAAuB,WAAA,EAAyC;AACtE,IAAA,MAAM,KAAA,uBAAY,GAAA,EAAwB;AAC1C,IAAA,KAAA,MAAW,KAAK,WAAA,EAAa;AAC3B,MAAA,MAAM,GAAA,GAAM,CAAA,EAAG,CAAA,CAAE,IAAI,CAAA,CAAA,EAAI,CAAA,CAAE,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA,CAAA,EAAI,CAAA,CAAE,KAAA,CAAM,MAAM,SAAS,CAAA,CAAA;AACtE,MAAA,MAAM,QAAA,GAAW,KAAA,CAAM,GAAA,CAAI,GAAG,CAAA;AAC9B,MAAA,IAAI,CAAC,QAAA,EAAU;AACb,QAAA,KAAA,CAAM,GAAA,CAAI,KAAK,CAAC,CAAA;AAAA,MAClB,CAAA,MAAA,IAAW,CAAA,CAAE,IAAA,IAAQ,CAAC,SAAS,IAAA,EAAM;AACnC,QAAA,KAAA,CAAM,GAAA,CAAI,KAAK,CAAC,CAAA;AAAA,MAClB;AAAA,IACF;AACA,IAAA,OAAO,KAAA,CAAM,IAAA,CAAK,KAAA,CAAM,MAAA,EAAQ,CAAA;AAAA,EAClC;AAAA,EAEQ,iBAAiB,GAAA,EAAmB;AAC1C,IAAA,IAAA,CAAK,sBAAA,CAAuB,OAAO,GAAG,CAAA;AACtC,IAAA,IAAA,CAAK,eAAA,CAAgB,OAAO,GAAG,CAAA;AAC/B,IAAA,IAAA,CAAK,WAAW,eAAA,CAAgB,EAAE,KAAK,WAAA,EAAa,IAAI,CAAA;AAAA,EAC1D;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,eAAA,CAAgB,KAAa,QAAA,EAA6D;AAChG,IAAA,MAAM,YAAA,GAAe,IAAA,CAAK,sBAAA,CAAuB,GAAA,CAAI,GAAG,CAAA;AACxD,IAAA,IAAI,CAAC,YAAA,IAAgB,YAAA,CAAa,MAAA,KAAW,GAAG,OAAO,IAAA;AAGvD,IAAA,MAAM,QAAA,GAAW,YAAA,CAAa,MAAA,CAAO,CAAA,CAAA,KAAK;AACxC,MAAA,MAAM,IAAI,CAAA,CAAE,KAAA;AACZ,MAAA,IAAI,QAAA,CAAS,IAAA,GAAO,CAAA,CAAE,KAAA,CAAM,IAAA,IAAQ,SAAS,IAAA,GAAO,CAAA,CAAE,GAAA,CAAI,IAAA,EAAM,OAAO,KAAA;AACvE,MAAA,IAAI,QAAA,CAAS,IAAA,KAAS,CAAA,CAAE,KAAA,CAAM,IAAA,IAAQ,SAAS,SAAA,GAAY,CAAA,CAAE,KAAA,CAAM,SAAA,EAAW,OAAO,KAAA;AACrF,MAAA,IAAI,QAAA,CAAS,IAAA,KAAS,CAAA,CAAE,GAAA,CAAI,IAAA,IAAQ,SAAS,SAAA,GAAY,CAAA,CAAE,GAAA,CAAI,SAAA,EAAW,OAAO,KAAA;AACjF,MAAA,OAAO,IAAA;AAAA,IACT,CAAC,CAAA;AAED,IAAA,IAAI,QAAA,CAAS,MAAA,KAAW,CAAA,EAAG,OAAO,IAAA;AAElC,IAAA,MAAM,QAAkB,EAAC;AACzB,IAAA,KAAA,MAAW,KAAK,QAAA,EAAU;AACxB,MAAA,MAAM,OAAO,CAAA,CAAE,IAAA;AACf,MAAA,MAAM,SAAA,GAAY,MAAM,IAAA,KAAS,YAAA,GAAe,yBAC5C,IAAA,EAAM,IAAA,KAAS,eAAe,sBAAA,GAC9B,mBAAA;AACJ,MAAA,MAAM,WAAA,GAAc,CAAA,CAAE,MAAA,KAAW,WAAA,GAAc,cAAA,GAAiB,qBAAA;AAEhE,MAAA,IAAI,EAAA,GAAK,CAAA,EAAA,EAAK,WAAW,CAAA,UAAA,EAAQ,SAAS;;AAAA,CAAA;AAC1C,MAAA,EAAA,IAAM,CAAA,IAAA,EAAO,CAAA,CAAE,IAAI,CAAA,MAAA,EAAS,EAAE,OAAO;AAAA,CAAA;AACrC,MAAA,IAAI,MAAM,UAAA,EAAY;AACpB,QAAA,EAAA,IAAM;AAAA,0BAAA,EAAwB,KAAK,UAAU;AAAA,CAAA;AAAA,MAC/C;AACA,MAAA,KAAA,CAAM,KAAK,EAAE,CAAA;AAAA,IACf;AAEA,IAAA,OAAO;AAAA,MACL,QAAA,EAAU;AAAA,QACR,IAAA,EAAM,UAAA;AAAA,QACN,KAAA,EAAO,KAAA,CAAM,IAAA,CAAK,SAAS;AAAA,OAC7B;AAAA,MACA,KAAA,EAAO,QAAA,CAAS,CAAC,CAAA,CAAG;AAAA,KACtB;AAAA,EACF;AAAA,EAEQ,kBAAkB,IAAA,EAAkC;AAC1D,IAAA,QAAQ,IAAA;AAAM,MACZ,KAAK,SAAA;AAAW,QAAA,OAAOgB,0BAAA,CAAmB,OAAA;AAAA,MAC1C,KAAK,MAAA;AAAQ,QAAA,OAAOA,0BAAA,CAAmB,aAAA;AAAA,MACvC,KAAK,QAAA;AAAU,QAAA,OAAOA,0BAAA,CAAmB,KAAA;AAAA,MACzC,KAAK,UAAA;AAAY,QAAA,OAAOA,0BAAA,CAAmB,QAAA;AAAA,MAC3C,KAAK,OAAA;AAAS,QAAA,OAAOA,0BAAA,CAAmB,KAAA;AAAA,MACxC,KAAK,SAAA;AAAW,QAAA,OAAOA,0BAAA,CAAmB,OAAA;AAAA,MAC1C,KAAK,UAAA;AAAY,QAAA,OAAOA,0BAAA,CAAmB,QAAA;AAAA,MAC3C,KAAK,UAAA;AAAY,QAAA,OAAOA,0BAAA,CAAmB,QAAA;AAAA,MAC3C,KAAK,MAAA;AAAQ,QAAA,OAAOA,0BAAA,CAAmB,IAAA;AAAA,MACvC,KAAK,UAAA;AAAY,QAAA,OAAOA,0BAAA,CAAmB,QAAA;AAAA,MAC3C;AAAS,QAAA,OAAOA,0BAAA,CAAmB,IAAA;AAAA;AACrC,EACF;AAAA,EAEQ,UAAU,GAAA,EAAuS;AACvT,IAAA,OAAO;AAAA,MACL,MAAM,GAAA,CAAI,IAAA;AAAA,MACV,IAAA,EAAM,IAAA,CAAK,aAAA,CAAc,GAAA,CAAI,IAAI,CAAA;AAAA,MACjC,OAAO,GAAA,CAAI,KAAA;AAAA,MACX,gBAAgB,GAAA,CAAI,cAAA;AAAA,MACpB,QAAQ,GAAA,CAAI,MAAA;AAAA,MACZ,QAAA,EAAU,IAAI,QAAA,EAAU,GAAA,CAAI,CAAC,CAAA,KAAM,IAAA,CAAK,SAAA,CAAU,CAAe,CAAC;AAAA,KACpE;AAAA,EACF;AAAA,EAEQ,cAAc,IAAA,EAA0B;AAC9C,IAAA,QAAQ,IAAA;AAAM,MACZ,KAAK,QAAA;AAAU,QAAA,OAAOC,kBAAA,CAAW,SAAA;AAAA,MACjC,KAAK,QAAA;AAAU,QAAA,OAAOA,kBAAA,CAAW,KAAA;AAAA,MACjC,KAAK,UAAA;AAAY,QAAA,OAAOA,kBAAA,CAAW,QAAA;AAAA,MACnC,KAAK,MAAA;AAAQ,QAAA,OAAOA,kBAAA,CAAW,aAAA;AAAA,MAC/B,KAAK,MAAA;AAAQ,QAAA,OAAOA,kBAAA,CAAW,IAAA;AAAA,MAC/B,KAAK,WAAA;AAAa,QAAA,OAAOA,kBAAA,CAAW,SAAA;AAAA,MACpC,KAAK,QAAA;AAAU,QAAA,OAAOA,kBAAA,CAAW,SAAA;AAAA,MACjC,KAAK,MAAA;AAAQ,QAAA,OAAOA,kBAAA,CAAW,MAAA;AAAA,MAC/B,KAAK,OAAA;AAAS,QAAA,OAAOA,kBAAA,CAAW,KAAA;AAAA,MAChC,KAAK,OAAA;AAAS,QAAA,OAAOA,kBAAA,CAAW,QAAA;AAAA,MAChC,KAAK,QAAA;AAAU,QAAA,OAAOA,kBAAA,CAAW,QAAA;AAAA,MACjC,KAAK,OAAA;AAAS,QAAA,OAAOA,kBAAA,CAAW,UAAA;AAAA,MAChC,KAAK,iBAAA;AAAmB,QAAA,OAAOA,kBAAA,CAAW,UAAA;AAAA,MAC1C,KAAK,UAAA;AAAY,QAAA,OAAOA,kBAAA,CAAW,KAAA;AAAA,MACnC,KAAK,OAAA;AAAS,QAAA,OAAOA,kBAAA,CAAW,KAAA;AAAA,MAChC,KAAK,SAAA;AAAW,QAAA,OAAOA,kBAAA,CAAW,UAAA;AAAA,MAClC;AAAS,QAAA,OAAOA,kBAAA,CAAW,QAAA;AAAA;AAC7B,EACF;AAAA,EAEQ,gBAAgB,SAAA,EAA6B;AACnD,IAAA,IAAI,MAAA,GAAS,CAAA;AACb,IAAA,KAAA,MAAW,OAAO,SAAA,EAAW;AAC3B,MAAA,MAAM,KAAA,GAAQ,eAAA,CAAgB,OAAA,CAAQ,GAAqC,CAAA;AAC3E,MAAA,IAAI,SAAS,CAAA,EAAG;AACd,QAAA,MAAA,IAAW,CAAA,IAAK,KAAA;AAAA,MAClB;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA,EAEA,KAAA,GAAc;AACZ,IAAA,IAAA,CAAK,WAAW,MAAA,EAAO;AAAA,EACzB;AACF","file":"index.cjs","sourcesContent":["// ============================================================================\r\n// ISL Document Manager\r\n// Manages document state and integrates with the ISL analyzer\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Range, Position } from 'vscode-languageserver';\r\nimport {\r\n  IncrementalParser,\r\n  SymbolIndex,\r\n  type AnalysisResult,\r\n  type ISLSymbolInfo,\r\n  type ISLDiagnostic,\r\n  type IndexedSymbol,\r\n  type CompletionContext,\r\n  type ContextType,\r\n  type SourceLocation,\r\n  type Domain,\r\n} from '@isl-lang/lsp-core';\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\nexport interface ParsedDocument {\r\n  uri: string;\r\n  version: number;\r\n  analysisResult: AnalysisResult;\r\n  domain?: Domain;\r\n}\r\n\r\n// ============================================================================\r\n// Document Manager\r\n// ============================================================================\r\n\r\nexport class ISLDocumentManager {\r\n  private parser: IncrementalParser;\r\n  private symbolIndex: SymbolIndex;\r\n  private documents = new Map<string, ParsedDocument>();\r\n  private pendingUpdates = new Map<string, NodeJS.Timeout>();\r\n  private debounceMs = 150;\r\n\r\n  constructor() {\r\n    this.parser = new IncrementalParser();\r\n    this.symbolIndex = new SymbolIndex();\r\n  }\r\n\r\n  /**\r\n   * Update a document with debouncing\r\n   */\r\n  updateDocument(document: TextDocument, immediate = false): ParsedDocument | undefined {\r\n    const uri = document.uri;\r\n\r\n    // Clear any pending update\r\n    const pending = this.pendingUpdates.get(uri);\r\n    if (pending) {\r\n      clearTimeout(pending);\r\n      this.pendingUpdates.delete(uri);\r\n    }\r\n\r\n    if (immediate) {\r\n      return this.parseDocument(document);\r\n    }\r\n\r\n    // Schedule debounced update\r\n    const timeout = setTimeout(() => {\r\n      this.pendingUpdates.delete(uri);\r\n      this.parseDocument(document);\r\n    }, this.debounceMs);\r\n\r\n    this.pendingUpdates.set(uri, timeout);\r\n    return this.documents.get(uri);\r\n  }\r\n\r\n  /**\r\n   * Parse document immediately\r\n   */\r\n  private parseDocument(document: TextDocument): ParsedDocument {\r\n    const uri = document.uri;\r\n    const source = document.getText();\r\n\r\n    // Parse and analyze\r\n    const { result } = this.parser.parse(uri, source, document.version, {\r\n      typeCheck: true,\r\n    });\r\n\r\n    // Update symbol index\r\n    this.symbolIndex.indexSymbols(uri, result.symbols);\r\n\r\n    // Create parsed document\r\n    const parsed: ParsedDocument = {\r\n      uri,\r\n      version: document.version,\r\n      analysisResult: result,\r\n      domain: result.domain,\r\n    };\r\n\r\n    this.documents.set(uri, parsed);\r\n    return parsed;\r\n  }\r\n\r\n  /**\r\n   * Get cached document\r\n   */\r\n  getDocument(uri: string): ParsedDocument | undefined {\r\n    return this.documents.get(uri);\r\n  }\r\n\r\n  /**\r\n   * Remove document from cache\r\n   */\r\n  removeDocument(uri: string): void {\r\n    // Clear pending update\r\n    const pending = this.pendingUpdates.get(uri);\r\n    if (pending) {\r\n      clearTimeout(pending);\r\n      this.pendingUpdates.delete(uri);\r\n    }\r\n\r\n    // Remove from caches\r\n    this.documents.delete(uri);\r\n    this.parser.invalidate(uri);\r\n    this.symbolIndex.clearDocument(uri);\r\n  }\r\n\r\n  /**\r\n   * Get diagnostics for a document\r\n   */\r\n  getDiagnostics(uri: string): ISLDiagnostic[] {\r\n    const doc = this.documents.get(uri);\r\n    return doc?.analysisResult.diagnostics || [];\r\n  }\r\n\r\n  /**\r\n   * Get symbols for a document (for outline view)\r\n   */\r\n  getSymbols(uri: string): ISLSymbolInfo[] {\r\n    const doc = this.documents.get(uri);\r\n    return doc?.analysisResult.symbols || [];\r\n  }\r\n\r\n  // ============================================================================\r\n  // Symbol Lookup\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Find symbol by name\r\n   */\r\n  findSymbol(name: string, kind?: string): IndexedSymbol | undefined {\r\n    return this.symbolIndex.findDefinition(name, kind as IndexedSymbol['kind']);\r\n  }\r\n\r\n  /**\r\n   * Find symbol at position\r\n   */\r\n  getSymbolAtPosition(uri: string, position: Position): IndexedSymbol | undefined {\r\n    // First check the symbol index\r\n    const indexedSym = this.symbolIndex.findAtPosition(uri, position.line + 1, position.character + 1);\r\n    if (indexedSym) return indexedSym;\r\n\r\n    // Fallback: find by word at position\r\n    const doc = this.documents.get(uri);\r\n    if (!doc) return undefined;\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Get all symbols across all documents\r\n   */\r\n  getAllSymbols(): IndexedSymbol[] {\r\n    return this.symbolIndex.find({});\r\n  }\r\n\r\n  /**\r\n   * Get entity names\r\n   */\r\n  getEntityNames(): string[] {\r\n    return this.symbolIndex.getEntityNames();\r\n  }\r\n\r\n  /**\r\n   * Get behavior names\r\n   */\r\n  getBehaviorNames(): string[] {\r\n    return this.symbolIndex.getBehaviorNames();\r\n  }\r\n\r\n  /**\r\n   * Get type names\r\n   */\r\n  getTypeNames(): string[] {\r\n    return this.symbolIndex.getTypeNames();\r\n  }\r\n\r\n  /**\r\n   * Get fields for a parent symbol\r\n   */\r\n  getFields(parentName: string): IndexedSymbol[] {\r\n    return this.symbolIndex.getFields(parentName);\r\n  }\r\n\r\n  // ============================================================================\r\n  // Context Analysis\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Get completion context at position\r\n   */\r\n  getCompletionContext(document: TextDocument, position: Position): CompletionContext {\r\n    const text = document.getText();\r\n    const lines = text.split('\\n');\r\n    const line = lines[position.line] || '';\r\n    const linePrefix = line.substring(0, position.character);\r\n\r\n    // Find word prefix\r\n    const prefixMatch = linePrefix.match(/[\\w@.]*$/);\r\n    const prefix = prefixMatch ? prefixMatch[0] : '';\r\n\r\n    // Find trigger character\r\n    const triggerChar = prefix.length > 0 ? undefined : \r\n      linePrefix.length > 0 ? linePrefix[linePrefix.length - 1] : undefined;\r\n\r\n    // Determine context type\r\n    const contextType = this.determineContextType(lines, position);\r\n\r\n    return {\r\n      contextType,\r\n      triggerCharacter: triggerChar,\r\n      prefix,\r\n      line,\r\n      position: { line: position.line, character: position.character },\r\n      parentSymbol: this.findParentSymbol(lines, position),\r\n      inPostcondition: this.isInPostcondition(lines, position.line),\r\n    };\r\n  }\r\n\r\n  private determineContextType(lines: string[], position: Position): ContextType {\r\n    let braceDepth = 0;\r\n    let currentBlock = '';\r\n    let currentSection = '';\r\n\r\n    for (let i = 0; i <= position.line; i++) {\r\n      const line = lines[i] || '';\r\n      const trimmed = line.trim();\r\n\r\n      // Track brace depth\r\n      braceDepth += (line.match(/\\{/g) || []).length;\r\n      braceDepth -= (line.match(/\\}/g) || []).length;\r\n\r\n      // Track current block\r\n      if (trimmed.match(/^domain\\s+\\w+/)) {\r\n        currentBlock = 'domain';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^entity\\s+\\w+/)) {\r\n        currentBlock = 'entity';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^behavior\\s+\\w+/)) {\r\n        currentBlock = 'behavior';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^invariant\\s+\\w+/)) {\r\n        currentBlock = 'invariant';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^policy\\s+\\w+/)) {\r\n        currentBlock = 'policy';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^view\\s+\\w+/)) {\r\n        currentBlock = 'view';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^scenarios?\\s+\\w+/)) {\r\n        currentBlock = 'scenario';\r\n        currentSection = '';\r\n      } else if (trimmed.match(/^chaos\\s+\\w+/)) {\r\n        currentBlock = 'chaos';\r\n        currentSection = '';\r\n      }\r\n\r\n      // Track sections within blocks\r\n      if (trimmed === 'input {') currentSection = 'input';\r\n      else if (trimmed === 'output {') currentSection = 'output';\r\n      else if (trimmed.startsWith('preconditions {') || trimmed === 'pre {') currentSection = 'pre';\r\n      else if (trimmed.startsWith('postconditions {') || trimmed === 'post {') currentSection = 'post';\r\n      else if (trimmed === 'invariants {') currentSection = 'invariant';\r\n      else if (trimmed === 'temporal {') currentSection = 'temporal';\r\n      else if (trimmed === 'security {') currentSection = 'security';\r\n      else if (trimmed === 'lifecycle {') currentSection = 'lifecycle';\r\n    }\r\n\r\n    // Check current line for type annotation context\r\n    const currentLine = lines[position.line] || '';\r\n    const beforeCursor = currentLine.substring(0, position.character);\r\n    if (beforeCursor.match(/:\\s*$/)) {\r\n      return 'type-annotation';\r\n    }\r\n\r\n    // Return context based on tracking\r\n    if (braceDepth === 0) return 'top-level';\r\n    if (braceDepth === 1 && !currentBlock) return 'domain';\r\n\r\n    switch (currentBlock) {\r\n      case 'entity':\r\n        if (currentSection === 'invariant') return 'expression';\r\n        if (currentSection === 'lifecycle') return 'entity-field';\r\n        return 'entity-field';\r\n      case 'behavior':\r\n        switch (currentSection) {\r\n          case 'input': return 'behavior-input';\r\n          case 'output': return 'behavior-output';\r\n          case 'pre': return 'behavior-pre';\r\n          case 'post': return 'behavior-post';\r\n          case 'invariant': return 'behavior-invariant';\r\n          case 'temporal': return 'behavior-temporal';\r\n          case 'security': return 'behavior-security';\r\n          default: return 'behavior';\r\n        }\r\n      case 'invariant':\r\n        return 'invariant';\r\n      case 'policy':\r\n        return 'policy';\r\n      case 'view':\r\n        return 'view';\r\n      case 'scenario':\r\n        return 'scenario';\r\n      case 'chaos':\r\n        return 'chaos';\r\n      default:\r\n        return 'domain';\r\n    }\r\n  }\r\n\r\n  private findParentSymbol(lines: string[], position: Position): string | undefined {\r\n    for (let i = position.line; i >= 0; i--) {\r\n      const line = lines[i] || '';\r\n      const trimmed = line.trim();\r\n\r\n      const entityMatch = trimmed.match(/^entity\\s+(\\w+)/);\r\n      if (entityMatch) return entityMatch[1];\r\n\r\n      const behaviorMatch = trimmed.match(/^behavior\\s+(\\w+)/);\r\n      if (behaviorMatch) return behaviorMatch[1];\r\n\r\n      const domainMatch = trimmed.match(/^domain\\s+(\\w+)/);\r\n      if (domainMatch) return domainMatch[1];\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  private isInPostcondition(lines: string[], lineNum: number): boolean {\r\n    let braceDepth = 0;\r\n\r\n    for (let i = lineNum; i >= 0; i--) {\r\n      const line = lines[i]?.trim() || '';\r\n      braceDepth += (line.match(/\\}/g) || []).length;\r\n      braceDepth -= (line.match(/\\{/g) || []).length;\r\n\r\n      if ((line.startsWith('postconditions {') || line === 'post {') && braceDepth <= 0) {\r\n        return true;\r\n      }\r\n      if ((line.startsWith('preconditions {') || line === 'pre {') && braceDepth <= 0) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // ============================================================================\r\n  // Word at Position\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Get word at cursor position\r\n   */\r\n  getWordAtPosition(document: TextDocument, position: Position): string {\r\n    const text = document.getText();\r\n    const lines = text.split('\\n');\r\n    const line = lines[position.line];\r\n    if (!line) return '';\r\n\r\n    // Find word boundaries\r\n    let start = position.character;\r\n    let end = position.character;\r\n\r\n    while (start > 0 && /[\\w]/.test(line[start - 1] || '')) {\r\n      start--;\r\n    }\r\n    while (end < line.length && /[\\w]/.test(line[end] || '')) {\r\n      end++;\r\n    }\r\n\r\n    return line.substring(start, end);\r\n  }\r\n\r\n  /**\r\n   * Get word range at position\r\n   */\r\n  getWordRangeAtPosition(document: TextDocument, position: Position): Range | undefined {\r\n    const text = document.getText();\r\n    const lines = text.split('\\n');\r\n    const line = lines[position.line];\r\n    if (!line) return undefined;\r\n\r\n    let start = position.character;\r\n    let end = position.character;\r\n\r\n    while (start > 0 && /[\\w]/.test(line[start - 1] || '')) {\r\n      start--;\r\n    }\r\n    while (end < line.length && /[\\w]/.test(line[end] || '')) {\r\n      end++;\r\n    }\r\n\r\n    if (start === end) return undefined;\r\n\r\n    return {\r\n      start: { line: position.line, character: start },\r\n      end: { line: position.line, character: end },\r\n    };\r\n  }\r\n\r\n  // ============================================================================\r\n  // Utilities\r\n  // ============================================================================\r\n\r\n  /**\r\n   * Convert ISL SourceLocation to LSP Range\r\n   */\r\n  static toRange(loc: SourceLocation): Range {\r\n    return {\r\n      start: { line: loc.line - 1, character: loc.column - 1 },\r\n      end: { line: loc.endLine - 1, character: loc.endColumn - 1 },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Convert LSP Position to ISL line/column (1-based)\r\n   */\r\n  static toISLPosition(position: Position): { line: number; column: number } {\r\n    return {\r\n      line: position.line + 1,\r\n      column: position.character + 1,\r\n    };\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Completion Provider\r\n// Context-aware completion suggestions\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Position } from 'vscode-languageserver';\r\nimport type { ISLDocumentManager } from '../documents';\r\nimport type { ISLCompletionInfo, ContextType } from '@isl-lang/lsp-core';\r\n\r\n// ============================================================================\r\n// ISL Keywords by Context\r\n// ============================================================================\r\n\r\nconst TOP_LEVEL_KEYWORDS = [\r\n  { label: 'domain', doc: 'Define a new domain' },\r\n];\r\n\r\nconst DOMAIN_KEYWORDS = [\r\n  { label: 'entity', doc: 'Define a persistent entity' },\r\n  { label: 'behavior', doc: 'Define a behavior/operation' },\r\n  { label: 'type', doc: 'Define a custom type' },\r\n  { label: 'enum', doc: 'Define an enumeration' },\r\n  { label: 'invariants', doc: 'Define global invariants' },\r\n  { label: 'policy', doc: 'Define a policy' },\r\n  { label: 'view', doc: 'Define a view/projection' },\r\n  { label: 'scenarios', doc: 'Define test scenarios' },\r\n  { label: 'chaos', doc: 'Define chaos tests' },\r\n  { label: 'version', doc: 'Domain version' },\r\n  { label: 'owner', doc: 'Domain owner' },\r\n  { label: 'imports', doc: 'Import from other domains' },\r\n];\r\n\r\nconst ENTITY_KEYWORDS = [\r\n  { label: 'invariants', doc: 'Entity invariants' },\r\n  { label: 'lifecycle', doc: 'Entity lifecycle states' },\r\n];\r\n\r\nconst BEHAVIOR_KEYWORDS = [\r\n  { label: 'description', doc: 'Behavior description' },\r\n  { label: 'actors', doc: 'Authorized actors' },\r\n  { label: 'input', doc: 'Input parameters' },\r\n  { label: 'output', doc: 'Output specification' },\r\n  { label: 'preconditions', doc: 'Preconditions' },\r\n  { label: 'postconditions', doc: 'Postconditions' },\r\n  { label: 'invariants', doc: 'Behavior invariants' },\r\n  { label: 'temporal', doc: 'Temporal constraints' },\r\n  { label: 'security', doc: 'Security requirements' },\r\n  { label: 'compliance', doc: 'Compliance requirements' },\r\n  { label: 'observability', doc: 'Observability settings' },\r\n];\r\n\r\nconst OUTPUT_KEYWORDS = [\r\n  { label: 'success', doc: 'Success return type' },\r\n  { label: 'errors', doc: 'Error cases' },\r\n];\r\n\r\nconst ERROR_KEYWORDS = [\r\n  { label: 'when', doc: 'Error condition description' },\r\n  { label: 'retriable', doc: 'Whether error is retriable' },\r\n  { label: 'retry_after', doc: 'Retry delay' },\r\n  { label: 'returns', doc: 'Error return type' },\r\n];\r\n\r\nconst TEMPORAL_KEYWORDS = [\r\n  { label: 'response', doc: 'Response time constraint' },\r\n  { label: 'eventually', doc: 'Eventually happens' },\r\n  { label: 'always', doc: 'Always true' },\r\n  { label: 'never', doc: 'Never happens' },\r\n  { label: 'within', doc: 'Within time constraint' },\r\n  { label: 'immediately', doc: 'Immediate effect' },\r\n];\r\n\r\nconst SECURITY_KEYWORDS = [\r\n  { label: 'requires', doc: 'Required permission/capability' },\r\n  { label: 'rate_limit', doc: 'Rate limiting' },\r\n  { label: 'brute_force_protection', doc: 'Brute force protection' },\r\n];\r\n\r\nconst EXPRESSION_KEYWORDS = [\r\n  { label: 'forall', doc: 'Universal quantifier' },\r\n  { label: 'exists', doc: 'Existential quantifier' },\r\n  { label: 'implies', doc: 'Logical implication' },\r\n  { label: 'and', doc: 'Logical and' },\r\n  { label: 'or', doc: 'Logical or' },\r\n  { label: 'not', doc: 'Logical negation' },\r\n  { label: 'true', doc: 'Boolean true' },\r\n  { label: 'false', doc: 'Boolean false' },\r\n  { label: 'null', doc: 'Null value' },\r\n];\r\n\r\nconst POSTCONDITION_KEYWORDS = [\r\n  { label: 'old', doc: 'Reference to pre-state value' },\r\n  { label: 'result', doc: 'Reference to operation result' },\r\n  { label: 'success', doc: 'Success postcondition block' },\r\n  { label: 'failure', doc: 'Failure postcondition block' },\r\n  ...EXPRESSION_KEYWORDS,\r\n];\r\n\r\nconst SCENARIO_KEYWORDS = [\r\n  { label: 'scenario', doc: 'Define a test scenario' },\r\n  { label: 'given', doc: 'Setup state' },\r\n  { label: 'when', doc: 'Action to test' },\r\n  { label: 'then', doc: 'Expected outcome' },\r\n];\r\n\r\n// ============================================================================\r\n// Built-in Types\r\n// ============================================================================\r\n\r\nconst BUILTIN_TYPES: ISLCompletionInfo[] = [\r\n  { label: 'String', kind: 'type', detail: 'UTF-8 text value', documentation: 'A sequence of Unicode characters' },\r\n  { label: 'Int', kind: 'type', detail: 'Integer value', documentation: '64-bit signed integer' },\r\n  { label: 'Decimal', kind: 'type', detail: 'Decimal number', documentation: 'Arbitrary precision decimal' },\r\n  { label: 'Boolean', kind: 'type', detail: 'Boolean value', documentation: 'true or false' },\r\n  { label: 'UUID', kind: 'type', detail: 'Universally unique identifier', documentation: '128-bit identifier' },\r\n  { label: 'Timestamp', kind: 'type', detail: 'Date and time with timezone', documentation: 'Instant in time' },\r\n  { label: 'Duration', kind: 'type', detail: 'Time duration', documentation: 'Length of time (ms, seconds, minutes, hours, days)' },\r\n  { label: 'Date', kind: 'type', detail: 'Calendar date', documentation: 'Date without time' },\r\n  { label: 'Time', kind: 'type', detail: 'Time of day', documentation: 'Time without date' },\r\n  { label: 'List', kind: 'type', detail: 'Ordered collection', documentation: 'List<T> - ordered sequence of elements', insertText: 'List<${1:T}>', insertTextFormat: 'snippet' },\r\n  { label: 'Map', kind: 'type', detail: 'Key-value collection', documentation: 'Map<K, V> - key-value pairs', insertText: 'Map<${1:K}, ${2:V}>', insertTextFormat: 'snippet' },\r\n  { label: 'Set', kind: 'type', detail: 'Unique collection', documentation: 'Set<T> - unique elements', insertText: 'Set<${1:T}>', insertTextFormat: 'snippet' },\r\n  { label: 'Optional', kind: 'type', detail: 'Nullable value', documentation: 'Optional<T> - may be null', insertText: 'Optional<${1:T}>', insertTextFormat: 'snippet' },\r\n];\r\n\r\n// ============================================================================\r\n// Built-in Functions\r\n// ============================================================================\r\n\r\nconst BUILTIN_FUNCTIONS: ISLCompletionInfo[] = [\r\n  { label: 'old', kind: 'function', detail: 'Previous value', documentation: 'Reference to value before operation', insertText: 'old(${1:expr})', insertTextFormat: 'snippet' },\r\n  { label: 'len', kind: 'function', detail: 'Length of collection', documentation: 'Returns the number of elements', insertText: 'len(${1:collection})', insertTextFormat: 'snippet' },\r\n  { label: 'sum', kind: 'function', detail: 'Sum of collection', documentation: 'Sum all numeric elements', insertText: 'sum(${1:collection})', insertTextFormat: 'snippet' },\r\n  { label: 'count', kind: 'function', detail: 'Count elements', documentation: 'Count matching elements', insertText: 'count(${1:collection}, ${2:predicate})', insertTextFormat: 'snippet' },\r\n  { label: 'filter', kind: 'function', detail: 'Filter collection', documentation: 'Filter elements by predicate', insertText: 'filter(${1:collection}, ${2:predicate})', insertTextFormat: 'snippet' },\r\n  { label: 'all', kind: 'function', detail: 'All match', documentation: 'Check if all elements match predicate', insertText: 'all(${1:collection}, ${2:item} => ${3:predicate})', insertTextFormat: 'snippet' },\r\n  { label: 'any', kind: 'function', detail: 'Any match', documentation: 'Check if any element matches predicate', insertText: 'any(${1:collection}, ${2:item} => ${3:predicate})', insertTextFormat: 'snippet' },\r\n  { label: 'none', kind: 'function', detail: 'None match', documentation: 'Check if no elements match predicate', insertText: 'none(${1:collection}, ${2:item} => ${3:predicate})', insertTextFormat: 'snippet' },\r\n  { label: 'now', kind: 'function', detail: 'Current timestamp', documentation: 'Returns the current timestamp', insertText: 'now()' },\r\n  { label: 'exists', kind: 'function', detail: 'Entity exists', documentation: 'Check if entity exists', insertText: 'exists(${1:id})', insertTextFormat: 'snippet' },\r\n  { label: 'lookup', kind: 'function', detail: 'Lookup entity', documentation: 'Find entity by ID or field', insertText: 'lookup(${1:id})', insertTextFormat: 'snippet' },\r\n];\r\n\r\n// ============================================================================\r\n// Snippets\r\n// ============================================================================\r\n\r\nconst DOMAIN_SNIPPET: ISLCompletionInfo = {\r\n  label: 'domain',\r\n  kind: 'snippet',\r\n  detail: 'Create a new domain',\r\n  insertText: `domain \\${1:Name} {\r\n  version: \"\\${2:1.0.0}\"\r\n\r\n  $0\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n  preselect: true,\r\n};\r\n\r\nconst ENTITY_SNIPPET: ISLCompletionInfo = {\r\n  label: 'entity',\r\n  kind: 'snippet',\r\n  detail: 'Create a new entity',\r\n  insertText: `entity \\${1:Name} {\r\n  id: UUID [immutable, unique]\r\n  \\${2:field}: \\${3:String}\r\n\r\n  invariants {\r\n    $0\r\n  }\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\nconst BEHAVIOR_SNIPPET: ISLCompletionInfo = {\r\n  label: 'behavior',\r\n  kind: 'snippet',\r\n  detail: 'Create a new behavior',\r\n  insertText: `behavior \\${1:Name} {\r\n  description: \"\\${2:Description}\"\r\n\r\n  input {\r\n    \\${3:param}: \\${4:String}\r\n  }\r\n\r\n  output {\r\n    success: \\${5:Boolean}\r\n\r\n    errors {\r\n      \\${6:ERROR_NAME} {\r\n        when: \"\\${7:Error description}\"\r\n        retriable: \\${8|true,false|}\r\n      }\r\n    }\r\n  }\r\n\r\n  preconditions {\r\n    \\${9:input.param != null}\r\n  }\r\n\r\n  postconditions {\r\n    success implies {\r\n      $0\r\n    }\r\n  }\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\nconst TYPE_SNIPPET: ISLCompletionInfo = {\r\n  label: 'type',\r\n  kind: 'snippet',\r\n  detail: 'Create a custom type',\r\n  insertText: `type \\${1:Name} = \\${2:String} {\r\n  \\${3:constraint}: \\${4:value}\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\nconst ENUM_SNIPPET: ISLCompletionInfo = {\r\n  label: 'enum',\r\n  kind: 'snippet',\r\n  detail: 'Create an enumeration',\r\n  insertText: `enum \\${1:Name} {\r\n  \\${2:VARIANT1}\r\n  \\${3:VARIANT2}\r\n  $0\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\nconst INVARIANT_SNIPPET: ISLCompletionInfo = {\r\n  label: 'invariants',\r\n  kind: 'snippet',\r\n  detail: 'Create an invariant block',\r\n  insertText: `invariants \\${1:Name} {\r\n  description: \"\\${2:Description}\"\r\n  scope: \\${3|global,transaction|}\r\n\r\n  always {\r\n    $0\r\n  }\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\nconst SCENARIO_SNIPPET: ISLCompletionInfo = {\r\n  label: 'scenario',\r\n  kind: 'snippet',\r\n  detail: 'Create a test scenario',\r\n  insertText: `scenario \"\\${1:Test scenario}\" {\r\n  given {\r\n    \\${2:setup}\r\n  }\r\n\r\n  when {\r\n    \\${3:action}\r\n  }\r\n\r\n  then {\r\n    $0\r\n  }\r\n}`,\r\n  insertTextFormat: 'snippet',\r\n};\r\n\r\n// ============================================================================\r\n// Completion Provider\r\n// ============================================================================\r\n\r\nexport class ISLCompletionProvider {\r\n  constructor(private documentManager: ISLDocumentManager) {}\r\n\r\n  provideCompletions(document: TextDocument, position: Position): ISLCompletionInfo[] {\r\n    const context = this.documentManager.getCompletionContext(document, position);\r\n    const items: ISLCompletionInfo[] = [];\r\n\r\n    // Get context-appropriate completions\r\n    switch (context.contextType) {\r\n      case 'top-level':\r\n        items.push(DOMAIN_SNIPPET);\r\n        items.push(...TOP_LEVEL_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'domain':\r\n        items.push(ENTITY_SNIPPET);\r\n        items.push(BEHAVIOR_SNIPPET);\r\n        items.push(TYPE_SNIPPET);\r\n        items.push(ENUM_SNIPPET);\r\n        items.push(INVARIANT_SNIPPET);\r\n        items.push(...DOMAIN_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'entity':\r\n      case 'entity-field':\r\n        items.push(...ENTITY_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'behavior':\r\n        items.push(...BEHAVIOR_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'behavior-input':\r\n      case 'behavior-output':\r\n        // Type completions for field declarations\r\n        break;\r\n\r\n      case 'behavior-pre':\r\n        items.push(...EXPRESSION_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        items.push(...BUILTIN_FUNCTIONS.filter(f => f.label !== 'old' && f.label !== 'result'));\r\n        break;\r\n\r\n      case 'behavior-post':\r\n        items.push(...POSTCONDITION_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        items.push(...BUILTIN_FUNCTIONS);\r\n        break;\r\n\r\n      case 'behavior-temporal':\r\n        items.push(...TEMPORAL_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'behavior-security':\r\n        items.push(...SECURITY_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'scenario':\r\n        items.push(SCENARIO_SNIPPET);\r\n        items.push(...SCENARIO_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        break;\r\n\r\n      case 'type-annotation':\r\n        items.push(...BUILTIN_TYPES);\r\n        items.push(...this.getCustomTypeCompletions());\r\n        items.push(...this.getEntityCompletions());\r\n        break;\r\n\r\n      case 'expression':\r\n      case 'invariant':\r\n      case 'policy':\r\n        items.push(...EXPRESSION_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n        items.push(...BUILTIN_FUNCTIONS);\r\n        break;\r\n\r\n      default:\r\n        // Default: mix of keywords and types\r\n        items.push(...EXPRESSION_KEYWORDS.map(k => ({ \r\n          label: k.label, \r\n          kind: 'keyword' as const, \r\n          detail: k.doc \r\n        })));\r\n    }\r\n\r\n    // Add trigger-specific completions\r\n    if (context.triggerCharacter === ':') {\r\n      items.push(...BUILTIN_TYPES);\r\n      items.push(...this.getCustomTypeCompletions());\r\n      items.push(...this.getEntityCompletions());\r\n    }\r\n\r\n    if (context.triggerCharacter === '.') {\r\n      items.push(...this.getMemberCompletions(context));\r\n    }\r\n\r\n    if (context.triggerCharacter === '@') {\r\n      items.push(...this.getAnnotationCompletions());\r\n    }\r\n\r\n    // Add entity/behavior references if in expression context\r\n    if (['expression', 'behavior-pre', 'behavior-post', 'invariant'].includes(context.contextType)) {\r\n      items.push(...this.getEntityCompletions());\r\n      items.push(...this.getBehaviorCompletions());\r\n    }\r\n\r\n    // Filter by prefix\r\n    if (context.prefix) {\r\n      const prefix = context.prefix.toLowerCase();\r\n      return items.filter(item => \r\n        item.label.toLowerCase().startsWith(prefix) ||\r\n        item.filterText?.toLowerCase().startsWith(prefix)\r\n      );\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  private getCustomTypeCompletions(): ISLCompletionInfo[] {\r\n    const types = this.documentManager.getTypeNames();\r\n    return types.map(name => ({\r\n      label: name,\r\n      kind: 'type' as const,\r\n      detail: 'Custom type',\r\n    }));\r\n  }\r\n\r\n  private getEntityCompletions(): ISLCompletionInfo[] {\r\n    const entities = this.documentManager.getEntityNames();\r\n    return entities.map(name => ({\r\n      label: name,\r\n      kind: 'entity' as const,\r\n      detail: 'Entity',\r\n    }));\r\n  }\r\n\r\n  private getBehaviorCompletions(): ISLCompletionInfo[] {\r\n    const behaviors = this.documentManager.getBehaviorNames();\r\n    return behaviors.map(name => ({\r\n      label: name,\r\n      kind: 'behavior' as const,\r\n      detail: 'Behavior',\r\n    }));\r\n  }\r\n\r\n  private getMemberCompletions(context: { prefix: string; parentSymbol?: string }): ISLCompletionInfo[] {\r\n    const items: ISLCompletionInfo[] = [];\r\n\r\n    // Common entity methods\r\n    items.push(\r\n      { label: 'lookup', kind: 'function', detail: 'Find by ID', insertText: 'lookup(${1:id})', insertTextFormat: 'snippet' },\r\n      { label: 'exists', kind: 'function', detail: 'Check existence', insertText: 'exists(${1:id})', insertTextFormat: 'snippet' },\r\n      { label: 'all', kind: 'function', detail: 'Get all entities' },\r\n      { label: 'count', kind: 'function', detail: 'Count entities' },\r\n      { label: 'filter', kind: 'function', detail: 'Filter entities', insertText: 'filter(${1:predicate})', insertTextFormat: 'snippet' },\r\n    );\r\n\r\n    // Duration units\r\n    items.push(\r\n      { label: 'ms', kind: 'property', detail: 'Milliseconds' },\r\n      { label: 'seconds', kind: 'property', detail: 'Seconds' },\r\n      { label: 'minutes', kind: 'property', detail: 'Minutes' },\r\n      { label: 'hours', kind: 'property', detail: 'Hours' },\r\n      { label: 'days', kind: 'property', detail: 'Days' },\r\n    );\r\n\r\n    // String methods\r\n    items.push(\r\n      { label: 'length', kind: 'property', detail: 'String length' },\r\n      { label: 'is_valid', kind: 'function', detail: 'Validate format' },\r\n      { label: 'is_empty', kind: 'function', detail: 'Check if empty' },\r\n    );\r\n\r\n    // If we know the parent, add its fields\r\n    if (context.parentSymbol) {\r\n      const fields = this.documentManager.getFields(context.parentSymbol);\r\n      for (const field of fields) {\r\n        items.push({\r\n          label: field.name,\r\n          kind: 'field',\r\n          detail: field.detail || field.type,\r\n        });\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  private getAnnotationCompletions(): ISLCompletionInfo[] {\r\n    return [\r\n      { label: 'unique', kind: 'keyword', detail: 'Field must be unique' },\r\n      { label: 'immutable', kind: 'keyword', detail: 'Field cannot be changed' },\r\n      { label: 'indexed', kind: 'keyword', detail: 'Field is indexed' },\r\n      { label: 'sensitive', kind: 'keyword', detail: 'Contains sensitive data' },\r\n      { label: 'secret', kind: 'keyword', detail: 'Contains secret data' },\r\n      { label: 'pii', kind: 'keyword', detail: 'Personally identifiable information' },\r\n      { label: 'computed', kind: 'keyword', detail: 'Derived from other fields' },\r\n      { label: 'deprecated', kind: 'keyword', detail: 'Mark as deprecated' },\r\n      { label: 'default', kind: 'keyword', detail: 'Default value', insertText: 'default: ${1:value}', insertTextFormat: 'snippet' },\r\n    ];\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Hover Provider\r\n// Provides hover information for ISL elements\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Position, Range } from 'vscode-languageserver';\r\nimport type { ISLDocumentManager } from '../documents';\r\n\r\nexport interface HoverResult {\r\n  contents: string;\r\n  range?: Range;\r\n}\r\n\r\n// ============================================================================\r\n// Built-in Type Documentation\r\n// ============================================================================\r\n\r\nconst BUILTIN_DOCS: Record<string, string> = {\r\n  String: `**String** - UTF-8 text value\r\n\r\nA sequence of Unicode characters. Supports common string operations.\r\n\r\n\\`\\`\\`isl\r\nusername: String\r\n\\`\\`\\``,\r\n\r\n  Int: `**Int** - Integer value\r\n\r\nA 64-bit signed integer. Range: -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807\r\n\r\n\\`\\`\\`isl\r\ncount: Int\r\n\\`\\`\\``,\r\n\r\n  Decimal: `**Decimal** - Arbitrary precision decimal\r\n\r\nUse for monetary values and other precise calculations.\r\n\r\n\\`\\`\\`isl\r\nprice: Decimal\r\n\\`\\`\\``,\r\n\r\n  Boolean: `**Boolean** - Logical value\r\n\r\nEither \\`true\\` or \\`false\\`.\r\n\r\n\\`\\`\\`isl\r\nisActive: Boolean\r\n\\`\\`\\``,\r\n\r\n  UUID: `**UUID** - Universally Unique Identifier\r\n\r\nA 128-bit identifier, typically used for entity IDs.\r\n\r\n\\`\\`\\`isl\r\nid: UUID @unique\r\n\\`\\`\\``,\r\n\r\n  Timestamp: `**Timestamp** - Date and time with timezone\r\n\r\nAn instant in time with nanosecond precision.\r\n\r\n\\`\\`\\`isl\r\ncreatedAt: Timestamp\r\n\\`\\`\\``,\r\n\r\n  Duration: `**Duration** - Time duration\r\n\r\nA length of time. Can be specified in ms, seconds, minutes, hours, days.\r\n\r\n\\`\\`\\`isl\r\ntimeout: Duration = 30.seconds\r\n\\`\\`\\``,\r\n\r\n  Date: `**Date** - Calendar date\r\n\r\nA date without time component.\r\n\r\n\\`\\`\\`isl\r\nbirthDate: Date\r\n\\`\\`\\``,\r\n\r\n  Time: `**Time** - Time of day\r\n\r\nA time without date component.\r\n\r\n\\`\\`\\`isl\r\nstartTime: Time\r\n\\`\\`\\``,\r\n\r\n  List: `**List<T>** - Ordered collection\r\n\r\nAn ordered sequence of elements of type T.\r\n\r\n\\`\\`\\`isl\r\ntags: List<String>\r\norders: List<Order>\r\n\\`\\`\\``,\r\n\r\n  Map: `**Map<K, V>** - Key-value collection\r\n\r\nA collection of key-value pairs with unique keys.\r\n\r\n\\`\\`\\`isl\r\nmetadata: Map<String, String>\r\n\\`\\`\\``,\r\n\r\n  Set: `**Set<T>** - Unique collection\r\n\r\nA collection of unique elements.\r\n\r\n\\`\\`\\`isl\r\ncategories: Set<String>\r\n\\`\\`\\``,\r\n\r\n  Optional: `**Optional<T>** - Nullable value\r\n\r\nA value that may or may not be present. Can also use \\`?\\` suffix.\r\n\r\n\\`\\`\\`isl\r\nmiddleName: Optional<String>\r\n// or\r\nmiddleName: String?\r\n\\`\\`\\``,\r\n};\r\n\r\n// ============================================================================\r\n// Keyword Documentation\r\n// ============================================================================\r\n\r\nconst KEYWORD_DOCS: Record<string, string> = {\r\n  domain: `**domain** - Root container for ISL specification\r\n\r\nA domain defines a bounded context containing entities, behaviors, types, and policies.\r\n\r\n\\`\\`\\`isl\r\ndomain Ecommerce {\r\n  version: \"1.0.0\"\r\n  // ... declarations\r\n}\r\n\\`\\`\\``,\r\n\r\n  entity: `**entity** - Persistent data model\r\n\r\nEntities represent core data structures with identity, state, and behavior.\r\n\r\n\\`\\`\\`isl\r\nentity User {\r\n  id: UUID @unique\r\n  email: Email\r\n  status: UserStatus\r\n  \r\n  invariants {\r\n    email.is_valid()\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  behavior: `**behavior** - Operation with contracts\r\n\r\nBehaviors define operations with input/output types, preconditions, and postconditions.\r\n\r\n\\`\\`\\`isl\r\nbehavior CreateUser {\r\n  input {\r\n    email: Email\r\n    username: String\r\n  }\r\n  \r\n  output {\r\n    success: User\r\n    errors { ... }\r\n  }\r\n  \r\n  preconditions {\r\n    not User.exists_by_email(input.email)\r\n  }\r\n  \r\n  postconditions {\r\n    success implies {\r\n      User.exists(result.id)\r\n    }\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  type: `**type** - Custom type definition\r\n\r\nDefine constrained or aliased types.\r\n\r\n\\`\\`\\`isl\r\ntype Email = String { format: \"email\", max_length: 254 }\r\ntype Money = Decimal { min: 0 }\r\n\\`\\`\\``,\r\n\r\n  enum: `**enum** - Enumeration type\r\n\r\nDefine a set of named values.\r\n\r\n\\`\\`\\`isl\r\nenum UserStatus {\r\n  ACTIVE\r\n  INACTIVE\r\n  SUSPENDED\r\n}\r\n\\`\\`\\``,\r\n\r\n  invariants: `**invariants** - Constraints that must always hold\r\n\r\nDefine business rules that must be maintained across all operations.\r\n\r\n\\`\\`\\`isl\r\ninvariants PositiveBalance {\r\n  scope: global\r\n  \r\n  always {\r\n    forall account: Account =>\r\n      account.balance >= 0\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  preconditions: `**preconditions** - Conditions before operation\r\n\r\nConditions that must be true before the operation executes.\r\n\r\n\\`\\`\\`isl\r\npreconditions {\r\n  User.exists(input.userId)\r\n  input.amount > 0\r\n}\r\n\\`\\`\\``,\r\n\r\n  postconditions: `**postconditions** - Conditions after operation\r\n\r\nConditions guaranteed to be true after successful execution.\r\n\r\n\\`\\`\\`isl\r\npostconditions {\r\n  success implies {\r\n    result.status == Active\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  old: `**old(expr)** - Previous value\r\n\r\nReferences the value of an expression before the operation. Only valid in postconditions.\r\n\r\n\\`\\`\\`isl\r\npostconditions {\r\n  success implies {\r\n    account.balance == old(account.balance) - input.amount\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  result: `**result** - Operation output\r\n\r\nReferences the return value of a successful operation. Only valid in postconditions.\r\n\r\n\\`\\`\\`isl\r\npostconditions {\r\n  success implies {\r\n    result.id != null\r\n    result.createdAt <= now()\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  forall: `**forall** - Universal quantifier\r\n\r\nAsserts a condition holds for all elements in a collection.\r\n\r\n\\`\\`\\`isl\r\nforall user: User => user.email.is_valid()\r\n\\`\\`\\``,\r\n\r\n  exists: `**exists** - Existential quantifier\r\n\r\nAsserts at least one element satisfies a condition.\r\n\r\n\\`\\`\\`isl\r\nexists order: Order => order.status == Pending\r\n\\`\\`\\``,\r\n\r\n  implies: `**implies** - Logical implication\r\n\r\nIf the left side is true, the right side must also be true.\r\n\r\n\\`\\`\\`isl\r\nuser.isAdmin implies user.verified\r\n\\`\\`\\``,\r\n\r\n  temporal: `**temporal** - Timing constraints\r\n\r\nDefine response time and timing requirements.\r\n\r\n\\`\\`\\`isl\r\ntemporal {\r\n  response within 200.ms (p50)\r\n  response within 500.ms (p99)\r\n  eventually within 5.minutes: audit_logged\r\n}\r\n\\`\\`\\``,\r\n\r\n  security: `**security** - Security requirements\r\n\r\nDefine access control, rate limiting, and security constraints.\r\n\r\n\\`\\`\\`isl\r\nsecurity {\r\n  requires: authenticated\r\n  rate_limit 100 per hour per ip_address\r\n}\r\n\\`\\`\\``,\r\n\r\n  scenario: `**scenario** - Test scenario\r\n\r\nDefine test cases using given/when/then structure.\r\n\r\n\\`\\`\\`isl\r\nscenario \"Successful login\" {\r\n  given {\r\n    user = User.create(email: \"test@example.com\")\r\n  }\r\n  when {\r\n    result = Login(email: user.email, password: \"secret\")\r\n  }\r\n  then {\r\n    result.success\r\n    Session.exists(result.sessionId)\r\n  }\r\n}\r\n\\`\\`\\``,\r\n\r\n  lifecycle: `**lifecycle** - Entity state machine\r\n\r\nDefine valid state transitions for an entity.\r\n\r\n\\`\\`\\`isl\r\nlifecycle {\r\n  Created -> Active\r\n  Active -> Suspended\r\n  Suspended -> Active\r\n  Active -> Archived\r\n}\r\n\\`\\`\\``,\r\n};\r\n\r\n// ============================================================================\r\n// Hover Provider\r\n// ============================================================================\r\n\r\nexport class ISLHoverProvider {\r\n  constructor(private documentManager: ISLDocumentManager) {}\r\n\r\n  provideHover(document: TextDocument, position: Position): HoverResult | null {\r\n    const word = this.documentManager.getWordAtPosition(document, position);\r\n    if (!word) return null;\r\n\r\n    const range = this.documentManager.getWordRangeAtPosition(document, position);\r\n\r\n    // Check for built-in type\r\n    if (BUILTIN_DOCS[word]) {\r\n      return { contents: BUILTIN_DOCS[word], range };\r\n    }\r\n\r\n    // Check for keyword\r\n    if (KEYWORD_DOCS[word]) {\r\n      return { contents: KEYWORD_DOCS[word], range };\r\n    }\r\n\r\n    // Check for user-defined symbol\r\n    const symbol = this.documentManager.findSymbol(word);\r\n    if (symbol) {\r\n      return { contents: this.formatSymbolHover(symbol), range };\r\n    }\r\n\r\n    // Check for symbol in current document with more context\r\n    const docSymbols = this.documentManager.getSymbols(document.uri);\r\n    const foundSymbol = this.findSymbolByName(docSymbols, word);\r\n    if (foundSymbol) {\r\n      return { contents: this.formatSymbolInfoHover(foundSymbol), range };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private findSymbolByName(\r\n    symbols: Array<{ name: string; kind: string; detail?: string; documentation?: string; children?: unknown[] }>,\r\n    name: string\r\n  ): { name: string; kind: string; detail?: string; documentation?: string; children?: unknown[] } | undefined {\r\n    for (const sym of symbols) {\r\n      if (sym.name === name) return sym;\r\n      if (sym.children) {\r\n        const found = this.findSymbolByName(sym.children as typeof symbols, name);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  private formatSymbolHover(symbol: { name: string; kind: string; detail?: string; type?: string }): string {\r\n    let md = `**${symbol.kind}** \\`${symbol.name}\\`\\n\\n`;\r\n\r\n    if (symbol.type) {\r\n      md += `**Type:** \\`${symbol.type}\\`\\n\\n`;\r\n    }\r\n\r\n    if (symbol.detail) {\r\n      md += `${symbol.detail}\\n`;\r\n    }\r\n\r\n    return md;\r\n  }\r\n\r\n  private formatSymbolInfoHover(\r\n    symbol: { name: string; kind: string; detail?: string; documentation?: string; children?: unknown[] }\r\n  ): string {\r\n    let md = `**${symbol.kind}** \\`${symbol.name}\\`\\n\\n`;\r\n\r\n    if (symbol.detail) {\r\n      md += `${symbol.detail}\\n\\n`;\r\n    }\r\n\r\n    if (symbol.documentation) {\r\n      md += `${symbol.documentation}\\n\\n`;\r\n    }\r\n\r\n    if (symbol.children && symbol.children.length > 0) {\r\n      const childSymbols = symbol.children as Array<{ name: string; kind: string; detail?: string }>;\r\n      \r\n      // Group children by kind\r\n      const fields = childSymbols.filter(c => c.kind === 'field' || c.kind === 'input' || c.kind === 'output');\r\n      const errors = childSymbols.filter(c => c.kind === 'error');\r\n      const states = childSymbols.filter(c => c.kind === 'lifecycle-state');\r\n\r\n      if (fields.length > 0) {\r\n        md += '**Fields:**\\n';\r\n        for (const field of fields) {\r\n          const typeInfo = field.detail ? `: ${field.detail}` : '';\r\n          md += `- \\`${field.name}\\`${typeInfo}\\n`;\r\n        }\r\n        md += '\\n';\r\n      }\r\n\r\n      if (errors.length > 0) {\r\n        md += '**Errors:**\\n';\r\n        for (const error of errors) {\r\n          md += `- \\`${error.name}\\`${error.detail ? ` - ${error.detail}` : ''}\\n`;\r\n        }\r\n        md += '\\n';\r\n      }\r\n\r\n      if (states.length > 0) {\r\n        md += '**Lifecycle States:**\\n';\r\n        md += states.map(s => `\\`${s.name}\\``).join('  ') + '\\n';\r\n      }\r\n    }\r\n\r\n    return md;\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Import Resolver\r\n// Resolves imports across multiple ISL files\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { SourceLocation, Domain, Import, ImportItem } from '@isl-lang/parser';\r\nimport type { ISLDiagnostic } from '@isl-lang/lsp-core';\r\nimport { DiagnosticSeverity } from '@isl-lang/lsp-core';\r\nimport { URI } from 'vscode-uri';\r\nimport * as path from 'path';\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\nexport interface ResolvedImport {\r\n  /** The import statement in the source file */\r\n  importStatement: Import;\r\n  /** The resolved URI of the imported file */\r\n  resolvedUri: string;\r\n  /** Whether the import was successfully resolved */\r\n  resolved: boolean;\r\n  /** The imported items with their resolution status */\r\n  items: ResolvedImportItem[];\r\n  /** Diagnostics related to this import */\r\n  diagnostics: ISLDiagnostic[];\r\n}\r\n\r\nexport interface ResolvedImportItem {\r\n  /** The import item from the AST */\r\n  item: ImportItem;\r\n  /** Whether the item exists in the imported file */\r\n  exists: boolean;\r\n  /** The kind of the exported symbol (entity, type, behavior, etc.) */\r\n  kind?: string;\r\n  /** Location of the definition in the source file */\r\n  definitionLocation?: SourceLocation;\r\n}\r\n\r\nexport interface ExportedSymbol {\r\n  name: string;\r\n  kind: 'entity' | 'type' | 'behavior' | 'invariant' | 'policy' | 'view' | 'enum';\r\n  location: SourceLocation;\r\n  uri: string;\r\n}\r\n\r\nexport interface ImportResolutionResult {\r\n  /** All resolved imports for a document */\r\n  imports: ResolvedImport[];\r\n  /** All diagnostics from import resolution */\r\n  diagnostics: ISLDiagnostic[];\r\n  /** Map of imported names to their source definitions */\r\n  importedSymbols: Map<string, ExportedSymbol>;\r\n}\r\n\r\n// ============================================================================\r\n// Import Resolver\r\n// ============================================================================\r\n\r\nexport class ISLImportResolver {\r\n  /** Cache of exported symbols per file URI */\r\n  private exportCache = new Map<string, Map<string, ExportedSymbol>>();\r\n\r\n  /** File content provider - allows testing without filesystem */\r\n  private fileProvider: (uri: string) => Promise<string | undefined>;\r\n\r\n  /** Domain cache for resolved files */\r\n  private domainCache = new Map<string, Domain | undefined>();\r\n\r\n  constructor(fileProvider?: (uri: string) => Promise<string | undefined>) {\r\n    this.fileProvider = fileProvider || this.defaultFileProvider;\r\n  }\r\n\r\n  /**\r\n   * Resolve all imports in a document\r\n   */\r\n  async resolveImports(\r\n    documentUri: string,\r\n    domain: Domain\r\n  ): Promise<ImportResolutionResult> {\r\n    const result: ImportResolutionResult = {\r\n      imports: [],\r\n      diagnostics: [],\r\n      importedSymbols: new Map(),\r\n    };\r\n\r\n    if (!domain.imports || domain.imports.length === 0) {\r\n      return result;\r\n    }\r\n\r\n    for (const importStmt of domain.imports) {\r\n      const resolvedImport = await this.resolveImport(documentUri, importStmt);\r\n      result.imports.push(resolvedImport);\r\n      result.diagnostics.push(...resolvedImport.diagnostics);\r\n\r\n      // Add successfully imported symbols to the map\r\n      for (const item of resolvedImport.items) {\r\n        if (item.exists && item.definitionLocation) {\r\n          const name = item.item.alias?.name || item.item.name.name;\r\n          result.importedSymbols.set(name, {\r\n            name: item.item.name.name,\r\n            kind: item.kind as ExportedSymbol['kind'],\r\n            location: item.definitionLocation,\r\n            uri: resolvedImport.resolvedUri,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Resolve a single import statement\r\n   */\r\n  private async resolveImport(\r\n    documentUri: string,\r\n    importStmt: Import\r\n  ): Promise<ResolvedImport> {\r\n    const diagnostics: ISLDiagnostic[] = [];\r\n    const resolvedUri = this.resolveImportPath(documentUri, importStmt.from.value);\r\n\r\n    const result: ResolvedImport = {\r\n      importStatement: importStmt,\r\n      resolvedUri,\r\n      resolved: false,\r\n      items: [],\r\n      diagnostics,\r\n    };\r\n\r\n    // Try to load the imported file\r\n    const importedDomain = await this.loadDomain(resolvedUri);\r\n\r\n    if (!importedDomain) {\r\n      // File not found or parse error\r\n      diagnostics.push({\r\n        message: `Cannot resolve import '${importStmt.from.value}'`,\r\n        severity: DiagnosticSeverity.Error,\r\n        location: importStmt.from.location,\r\n        code: 'ISL2001',\r\n        source: 'isl-import-resolver',\r\n        data: {\r\n          type: 'unresolved-import',\r\n          importPath: importStmt.from.value,\r\n          resolvedUri,\r\n        },\r\n      });\r\n      return result;\r\n    }\r\n\r\n    result.resolved = true;\r\n\r\n    // Get exported symbols from the imported file\r\n    const exports = this.getExports(resolvedUri, importedDomain);\r\n\r\n    // Resolve each imported item\r\n    for (const item of importStmt.items) {\r\n      const exportedSymbol = exports.get(item.name.name);\r\n\r\n      if (!exportedSymbol) {\r\n        // Symbol not found in imported file\r\n        diagnostics.push({\r\n          message: `'${item.name.name}' is not exported from '${importStmt.from.value}'`,\r\n          severity: DiagnosticSeverity.Error,\r\n          location: item.name.location,\r\n          code: 'ISL2002',\r\n          source: 'isl-import-resolver',\r\n          relatedInfo: [\r\n            {\r\n              message: `File '${importStmt.from.value}' exports: ${Array.from(exports.keys()).join(', ') || 'nothing'}`,\r\n              location: importStmt.from.location,\r\n            },\r\n          ],\r\n          data: {\r\n            type: 'unknown-export',\r\n            symbolName: item.name.name,\r\n            availableExports: Array.from(exports.keys()),\r\n          },\r\n        });\r\n\r\n        result.items.push({\r\n          item,\r\n          exists: false,\r\n        });\r\n      } else {\r\n        result.items.push({\r\n          item,\r\n          exists: true,\r\n          kind: exportedSymbol.kind,\r\n          definitionLocation: exportedSymbol.location,\r\n        });\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get all exported symbols from a domain\r\n   */\r\n  getExports(uri: string, domain: Domain): Map<string, ExportedSymbol> {\r\n    // Check cache first\r\n    const cached = this.exportCache.get(uri);\r\n    if (cached) return cached;\r\n\r\n    const exports = new Map<string, ExportedSymbol>();\r\n\r\n    // Export entities\r\n    for (const entity of domain.entities) {\r\n      exports.set(entity.name.name, {\r\n        name: entity.name.name,\r\n        kind: 'entity',\r\n        location: entity.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Export types\r\n    for (const type of domain.types) {\r\n      const kind = type.definition.kind === 'EnumType' ? 'enum' : 'type';\r\n      exports.set(type.name.name, {\r\n        name: type.name.name,\r\n        kind,\r\n        location: type.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Export behaviors\r\n    for (const behavior of domain.behaviors) {\r\n      exports.set(behavior.name.name, {\r\n        name: behavior.name.name,\r\n        kind: 'behavior',\r\n        location: behavior.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Export invariants\r\n    for (const invariant of domain.invariants) {\r\n      exports.set(invariant.name.name, {\r\n        name: invariant.name.name,\r\n        kind: 'invariant',\r\n        location: invariant.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Export policies\r\n    for (const policy of domain.policies) {\r\n      exports.set(policy.name.name, {\r\n        name: policy.name.name,\r\n        kind: 'policy',\r\n        location: policy.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Export views\r\n    for (const view of domain.views) {\r\n      exports.set(view.name.name, {\r\n        name: view.name.name,\r\n        kind: 'view',\r\n        location: view.name.location,\r\n        uri,\r\n      });\r\n    }\r\n\r\n    // Cache the exports\r\n    this.exportCache.set(uri, exports);\r\n\r\n    return exports;\r\n  }\r\n\r\n  /**\r\n   * Resolve an import path relative to the importing file\r\n   */\r\n  resolveImportPath(documentUri: string, importPath: string): string {\r\n    // Handle different import path formats\r\n    if (importPath.startsWith('./') || importPath.startsWith('../')) {\r\n      // Relative import\r\n      const documentPath = URI.parse(documentUri).fsPath;\r\n      const documentDir = path.dirname(documentPath);\r\n      const resolved = path.resolve(documentDir, importPath);\r\n\r\n      // Add .isl extension if not present\r\n      const withExtension = resolved.endsWith('.isl') ? resolved : `${resolved}.isl`;\r\n      return URI.file(withExtension).toString();\r\n    }\r\n\r\n    // Absolute or package import - for now just treat as relative to workspace\r\n    // In a real implementation, this would look up in node_modules or similar\r\n    const withExtension = importPath.endsWith('.isl') ? importPath : `${importPath}.isl`;\r\n    return URI.file(withExtension).toString();\r\n  }\r\n\r\n  /**\r\n   * Load and parse a domain from a URI\r\n   */\r\n  private async loadDomain(uri: string): Promise<Domain | undefined> {\r\n    // Check cache\r\n    const cached = this.domainCache.get(uri);\r\n    if (cached !== undefined) return cached;\r\n\r\n    try {\r\n      const content = await this.fileProvider(uri);\r\n      if (!content) {\r\n        this.domainCache.set(uri, undefined);\r\n        return undefined;\r\n      }\r\n\r\n      // Use dynamic import to avoid circular dependencies\r\n      const { parse } = await import('@isl-lang/parser');\r\n      const result = parse(content, URI.parse(uri).fsPath);\r\n\r\n      if (result.success && result.domain) {\r\n        this.domainCache.set(uri, result.domain);\r\n        return result.domain;\r\n      }\r\n\r\n      this.domainCache.set(uri, undefined);\r\n      return undefined;\r\n    } catch {\r\n      this.domainCache.set(uri, undefined);\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Default file provider using filesystem\r\n   */\r\n  private async defaultFileProvider(uri: string): Promise<string | undefined> {\r\n    try {\r\n      const fs = await import('fs/promises');\r\n      const filePath = URI.parse(uri).fsPath;\r\n      return await fs.readFile(filePath, 'utf-8');\r\n    } catch {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear caches for a specific URI or all URIs\r\n   */\r\n  invalidate(uri?: string): void {\r\n    if (uri) {\r\n      this.exportCache.delete(uri);\r\n      this.domainCache.delete(uri);\r\n    } else {\r\n      this.exportCache.clear();\r\n      this.domainCache.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a custom file provider (useful for testing)\r\n   */\r\n  setFileProvider(provider: (uri: string) => Promise<string | undefined>): void {\r\n    this.fileProvider = provider;\r\n    // Clear caches when provider changes\r\n    this.invalidate();\r\n  }\r\n\r\n  /**\r\n   * Pre-populate domain cache (useful for testing)\r\n   */\r\n  setDomainCache(uri: string, domain: Domain | undefined): void {\r\n    this.domainCache.set(uri, domain);\r\n    if (domain) {\r\n      this.getExports(uri, domain); // Populate export cache too\r\n    }\r\n  }\r\n}\r\n","// ============================================================================\n// ISL Semantic Linter\n// Advanced semantic lint rules with quickfix suggestions\n// ============================================================================\n\nimport type { Domain, Behavior, Entity, TypeDeclaration, Expression } from '@isl-lang/parser';\nimport type { ISLDiagnostic, SourceLocation } from '@isl-lang/lsp-core';\nimport { DiagnosticSeverity } from '@isl-lang/lsp-core';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface LintRule {\n  id: string;\n  name: string;\n  description: string;\n  severity: DiagnosticSeverity;\n  category: 'correctness' | 'best-practice' | 'security' | 'performance' | 'style';\n}\n\nexport interface LintResult {\n  rule: LintRule;\n  diagnostic: ISLDiagnostic;\n}\n\nexport interface QuickfixData {\n  type: string;\n  [key: string]: unknown;\n}\n\n// ============================================================================\n// Lint Rules Registry\n// ============================================================================\n\nexport const LINT_RULES: Record<string, LintRule> = {\n  // Correctness rules\n  'ISL1001': {\n    id: 'ISL1001',\n    name: 'missing-postcondition',\n    description: 'Behavior should have postconditions to verify outcomes',\n    severity: DiagnosticSeverity.Warning,\n    category: 'correctness',\n  },\n  'ISL1002': {\n    id: 'ISL1002',\n    name: 'precondition-without-error',\n    description: 'Behavior has preconditions but no error cases defined',\n    severity: DiagnosticSeverity.Hint,\n    category: 'correctness',\n  },\n  'ISL1003': {\n    id: 'ISL1003',\n    name: 'unused-type',\n    description: 'Type is defined but never used',\n    severity: DiagnosticSeverity.Hint,\n    category: 'style',\n  },\n  'ISL1004': {\n    id: 'ISL1004',\n    name: 'undefined-behavior-reference',\n    description: 'Scenarios reference undefined behavior',\n    severity: DiagnosticSeverity.Error,\n    category: 'correctness',\n  },\n\n  // Best practice rules\n  'ISL1010': {\n    id: 'ISL1010',\n    name: 'missing-description',\n    description: 'Behavior should have a description',\n    severity: DiagnosticSeverity.Hint,\n    category: 'best-practice',\n  },\n  'ISL1011': {\n    id: 'ISL1011',\n    name: 'entity-without-id',\n    description: 'Entity should have an id field for identification',\n    severity: DiagnosticSeverity.Warning,\n    category: 'best-practice',\n  },\n  'ISL1012': {\n    id: 'ISL1012',\n    name: 'mutable-behavior-no-temporal',\n    description: 'State-modifying behavior should specify temporal constraints',\n    severity: DiagnosticSeverity.Hint,\n    category: 'best-practice',\n  },\n  'ISL1013': {\n    id: 'ISL1013',\n    name: 'no-scenarios',\n    description: 'Behavior has no test scenarios defined',\n    severity: DiagnosticSeverity.Hint,\n    category: 'best-practice',\n  },\n\n  // Security rules\n  'ISL1020': {\n    id: 'ISL1020',\n    name: 'sensitive-field-unprotected',\n    description: 'Potentially sensitive field should have constraints',\n    severity: DiagnosticSeverity.Warning,\n    category: 'security',\n  },\n  'ISL1021': {\n    id: 'ISL1021',\n    name: 'no-authentication',\n    description: 'State-modifying behavior has no security requirements',\n    severity: DiagnosticSeverity.Hint,\n    category: 'security',\n  },\n\n  // Performance rules\n  'ISL1030': {\n    id: 'ISL1030',\n    name: 'unbounded-list',\n    description: 'List type without size constraint may cause performance issues',\n    severity: DiagnosticSeverity.Hint,\n    category: 'performance',\n  },\n  'ISL1031': {\n    id: 'ISL1031',\n    name: 'missing-pagination',\n    description: 'Behavior returning a list should consider pagination',\n    severity: DiagnosticSeverity.Hint,\n    category: 'performance',\n  },\n};\n\n// ============================================================================\n// Semantic Linter\n// ============================================================================\n\nexport class ISLSemanticLinter {\n  private enabledRules: Set<string> = new Set(Object.keys(LINT_RULES));\n\n  /**\n   * Enable/disable specific rules\n   */\n  configureRules(enabled: string[], disabled: string[]): void {\n    for (const rule of enabled) {\n      this.enabledRules.add(rule);\n    }\n    for (const rule of disabled) {\n      this.enabledRules.delete(rule);\n    }\n  }\n\n  /**\n   * Lint a domain and return all diagnostics\n   */\n  lint(domain: Domain, filePath: string): ISLDiagnostic[] {\n    const diagnostics: ISLDiagnostic[] = [];\n\n    // Run all lint checks\n    diagnostics.push(...this.lintBehaviors(domain, filePath));\n    diagnostics.push(...this.lintEntities(domain, filePath));\n    diagnostics.push(...this.lintTypes(domain, filePath));\n    diagnostics.push(...this.lintScenarios(domain, filePath));\n    diagnostics.push(...this.lintSecurity(domain, filePath));\n\n    // Filter by enabled rules\n    return diagnostics.filter(d => this.enabledRules.has(d.code || ''));\n  }\n\n  // ============================================================================\n  // Behavior Linting\n  // ============================================================================\n\n  private lintBehaviors(domain: Domain, _filePath: string): ISLDiagnostic[] {\n    const diagnostics: ISLDiagnostic[] = [];\n    const behaviorsWithScenarios = new Set<string>();\n\n    // Collect behaviors that have scenarios\n    for (const scenarioBlock of domain.scenarios) {\n      behaviorsWithScenarios.add(scenarioBlock.behaviorName.name);\n    }\n\n    for (const behavior of domain.behaviors) {\n      // ISL1001: Missing postcondition\n      if (behavior.postconditions.length === 0) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1001']!,\n          `Behavior '${behavior.name.name}' has no postconditions`,\n          behavior.name.location,\n          {\n            type: 'missing-postcondition',\n            behaviorName: behavior.name.name,\n            behaviorLocation: behavior.location,\n          },\n        ));\n      }\n\n      // ISL1002: Precondition without error cases\n      if (behavior.preconditions.length > 0 && behavior.output.errors.length === 0) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1002']!,\n          `Behavior '${behavior.name.name}' has preconditions but no error cases defined`,\n          behavior.name.location,\n          {\n            type: 'precondition-without-error',\n            behaviorName: behavior.name.name,\n            preconditionCount: behavior.preconditions.length,\n          },\n        ));\n      }\n\n      // ISL1010: Missing description\n      if (!behavior.description) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1010']!,\n          `Behavior '${behavior.name.name}' should have a description`,\n          behavior.name.location,\n          {\n            type: 'missing-description',\n            behaviorName: behavior.name.name,\n          },\n        ));\n      }\n\n      // ISL1012: State-modifying behavior without temporal constraints\n      if (this.isStateMutating(behavior) && behavior.temporal.length === 0) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1012']!,\n          `Behavior '${behavior.name.name}' modifies state but has no temporal constraints`,\n          behavior.name.location,\n          {\n            type: 'mutable-behavior-no-temporal',\n            behaviorName: behavior.name.name,\n          },\n        ));\n      }\n\n      // ISL1013: No scenarios\n      if (!behaviorsWithScenarios.has(behavior.name.name)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1013']!,\n          `Behavior '${behavior.name.name}' has no test scenarios defined`,\n          behavior.name.location,\n          {\n            type: 'no-scenarios',\n            behaviorName: behavior.name.name,\n          },\n        ));\n      }\n\n      // ISL1021: No security for state-modifying behaviors\n      if (this.isStateMutating(behavior) && (!behavior.security || behavior.security.length === 0)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1021']!,\n          `Behavior '${behavior.name.name}' modifies state but has no security requirements`,\n          behavior.name.location,\n          {\n            type: 'no-authentication',\n            behaviorName: behavior.name.name,\n          },\n        ));\n      }\n\n      // ISL1031: List return without pagination\n      if (this.returnsList(behavior) && !this.hasPagination(behavior)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1031']!,\n          `Behavior '${behavior.name.name}' returns a list - consider adding pagination`,\n          behavior.output.location,\n          {\n            type: 'missing-pagination',\n            behaviorName: behavior.name.name,\n          },\n        ));\n      }\n    }\n\n    return diagnostics;\n  }\n\n  // ============================================================================\n  // Entity Linting\n  // ============================================================================\n\n  private lintEntities(domain: Domain, _filePath: string): ISLDiagnostic[] {\n    const diagnostics: ISLDiagnostic[] = [];\n\n    for (const entity of domain.entities) {\n      // ISL1011: Entity without id field\n      const hasId = entity.fields.some(f =>\n        f.name.name === 'id' ||\n        f.name.name.toLowerCase().endsWith('id')\n      );\n\n      if (!hasId) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1011']!,\n          `Entity '${entity.name.name}' should have an 'id' field for identification`,\n          entity.name.location,\n          {\n            type: 'entity-without-id',\n            entityName: entity.name.name,\n            fields: entity.fields.map(f => f.name.name),\n          },\n        ));\n      }\n\n      // ISL1020: Sensitive field detection\n      for (const field of entity.fields) {\n        if (this.isSensitiveFieldName(field.name.name)) {\n          const hasConstraints = this.fieldHasConstraints(field);\n          if (!hasConstraints) {\n            diagnostics.push(this.createDiagnostic(\n              LINT_RULES['ISL1020']!,\n              `Field '${field.name.name}' appears sensitive and should have constraints`,\n              field.name.location,\n              {\n                type: 'sensitive-field-unprotected',\n                fieldName: field.name.name,\n                entityName: entity.name.name,\n                suggestedConstraints: this.suggestConstraints(field.name.name),\n              },\n            ));\n          }\n        }\n      }\n    }\n\n    return diagnostics;\n  }\n\n  // ============================================================================\n  // Type Linting\n  // ============================================================================\n\n  private lintTypes(domain: Domain, _filePath: string): ISLDiagnostic[] {\n    const diagnostics: ISLDiagnostic[] = [];\n    const usedTypes = this.collectUsedTypes(domain);\n\n    for (const type of domain.types) {\n      // ISL1003: Unused type\n      if (!usedTypes.has(type.name.name)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1003']!,\n          `Type '${type.name.name}' is defined but never used`,\n          type.name.location,\n          {\n            type: 'unused-type',\n            typeName: type.name.name,\n          },\n        ));\n      }\n\n      // ISL1030: Unbounded list\n      if (this.isUnboundedList(type)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1030']!,\n          `Type '${type.name.name}' is an unbounded list - consider adding max_size constraint`,\n          type.name.location,\n          {\n            type: 'unbounded-list',\n            typeName: type.name.name,\n          },\n        ));\n      }\n    }\n\n    return diagnostics;\n  }\n\n  // ============================================================================\n  // Scenario Linting\n  // ============================================================================\n\n  private lintScenarios(domain: Domain, _filePath: string): ISLDiagnostic[] {\n    const diagnostics: ISLDiagnostic[] = [];\n    const behaviorNames = new Set(domain.behaviors.map(b => b.name.name));\n\n    for (const scenarioBlock of domain.scenarios) {\n      // ISL1004: Undefined behavior reference\n      if (!behaviorNames.has(scenarioBlock.behaviorName.name)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1004']!,\n          `Scenarios reference undefined behavior '${scenarioBlock.behaviorName.name}'`,\n          scenarioBlock.behaviorName.location,\n          {\n            type: 'undefined-behavior-reference',\n            behaviorName: scenarioBlock.behaviorName.name,\n            availableBehaviors: Array.from(behaviorNames),\n          },\n        ));\n      }\n    }\n\n    // Same for chaos scenarios\n    for (const chaosBlock of domain.chaos) {\n      if (!behaviorNames.has(chaosBlock.behaviorName.name)) {\n        diagnostics.push(this.createDiagnostic(\n          LINT_RULES['ISL1004']!,\n          `Chaos tests reference undefined behavior '${chaosBlock.behaviorName.name}'`,\n          chaosBlock.behaviorName.location,\n          {\n            type: 'undefined-behavior-reference',\n            behaviorName: chaosBlock.behaviorName.name,\n            availableBehaviors: Array.from(behaviorNames),\n          },\n        ));\n      }\n    }\n\n    return diagnostics;\n  }\n\n  // ============================================================================\n  // Security Linting\n  // ============================================================================\n\n  private lintSecurity(domain: Domain, _filePath: string): ISLDiagnostic[] {\n    // Security checks are included in behavior linting\n    // This method can be extended for domain-level security analysis\n    return [];\n  }\n\n  // ============================================================================\n  // Helper Methods\n  // ============================================================================\n\n  private createDiagnostic(\n    rule: LintRule,\n    message: string,\n    location: SourceLocation,\n    data: QuickfixData,\n    relatedInfo?: Array<{ message: string; location: SourceLocation }>\n  ): ISLDiagnostic {\n    return {\n      message,\n      severity: rule.severity,\n      location,\n      code: rule.id,\n      source: 'isl-semantic-linter',\n      data,\n      relatedInfo,\n    };\n  }\n\n  private isStateMutating(behavior: Behavior): boolean {\n    // Check if behavior creates, updates, or deletes\n    const name = behavior.name.name.toLowerCase();\n    const mutatingPatterns = [\n      'create', 'update', 'delete', 'remove', 'add', 'set',\n      'modify', 'change', 'assign', 'reset', 'clear',\n    ];\n\n    return mutatingPatterns.some(p => name.includes(p));\n  }\n\n  private returnsList(behavior: Behavior): boolean {\n    const output = behavior.output.success;\n    return output.kind === 'ListType';\n  }\n\n  private hasPagination(behavior: Behavior): boolean {\n    // Check if input has pagination-related fields\n    const paginationFields = ['page', 'limit', 'offset', 'cursor', 'pagesize', 'pagenumber'];\n    return behavior.input.fields.some(f =>\n      paginationFields.includes(f.name.name.toLowerCase())\n    );\n  }\n\n  private isSensitiveFieldName(name: string): boolean {\n    const sensitivePatterns = [\n      'password', 'secret', 'token', 'key', 'credential',\n      'ssn', 'social_security', 'credit_card', 'cc_number',\n      'api_key', 'auth', 'private',\n    ];\n    const lower = name.toLowerCase();\n    return sensitivePatterns.some(p => lower.includes(p));\n  }\n\n  private fieldHasConstraints(field: { type: unknown }): boolean {\n    const type = field.type as Record<string, unknown>;\n    return type?.kind === 'ConstrainedType';\n  }\n\n  private suggestConstraints(fieldName: string): string[] {\n    const lower = fieldName.toLowerCase();\n    if (lower.includes('password')) {\n      return ['min_length: 8', 'pattern: \"^(?=.*[A-Za-z])(?=.*\\\\d).+\"'];\n    }\n    if (lower.includes('email')) {\n      return ['format: \"email\"'];\n    }\n    if (lower.includes('token') || lower.includes('key')) {\n      return ['immutable: true'];\n    }\n    return ['encrypted: true'];\n  }\n\n  private collectUsedTypes(domain: Domain): Set<string> {\n    const usedTypes = new Set<string>();\n\n    const collectFromType = (typeDef: unknown) => {\n      if (!typeDef || typeof typeDef !== 'object') return;\n      const t = typeDef as Record<string, unknown>;\n\n      if (t.kind === 'ReferenceType' && t.name && typeof t.name === 'object') {\n        const name = t.name as { parts?: Array<{ name: string }> };\n        if (name.parts && name.parts.length > 0 && name.parts[0]) {\n          usedTypes.add(name.parts[0].name);\n        }\n      }\n\n      // Recurse into container types\n      if (t.element) collectFromType(t.element);\n      if (t.key) collectFromType(t.key);\n      if (t.value) collectFromType(t.value);\n      if (t.inner) collectFromType(t.inner);\n      if (t.base) collectFromType(t.base);\n    };\n\n    // Collect from entities\n    for (const entity of domain.entities) {\n      for (const field of entity.fields) {\n        collectFromType(field.type);\n      }\n    }\n\n    // Collect from behaviors\n    for (const behavior of domain.behaviors) {\n      for (const field of behavior.input.fields) {\n        collectFromType(field.type);\n      }\n      collectFromType(behavior.output.success);\n    }\n\n    // Collect from types\n    for (const type of domain.types) {\n      if (type.definition.kind === 'StructType') {\n        for (const field of type.definition.fields) {\n          collectFromType(field.type);\n        }\n      } else if (type.definition.kind === 'ConstrainedType') {\n        collectFromType(type.definition.base);\n      }\n    }\n\n    return usedTypes;\n  }\n\n  private isUnboundedList(type: TypeDeclaration): boolean {\n    const def = type.definition;\n    if (def.kind !== 'ConstrainedType') return false;\n\n    const base = def.base as unknown as Record<string, unknown>;\n    if (base.kind !== 'ListType') return false;\n\n    // Check if there's a max_size constraint\n    const hasMaxSize = def.constraints.some(c =>\n      c.name === 'max_size' || c.name === 'max_length'\n    );\n\n    return !hasMaxSize;\n  }\n}\n","// ============================================================================\r\n// ISL Diagnostics Provider\r\n// Provides diagnostics from the analyzer with import-aware and semantic lint support\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Diagnostic, Range, DiagnosticRelatedInformation } from 'vscode-languageserver';\r\nimport { DiagnosticSeverity as LSPDiagnosticSeverity } from 'vscode-languageserver';\r\nimport type { ISLDocumentManager } from '../documents';\r\nimport { ISLDocumentManager as DocManager } from '../documents';\r\nimport type { ISLDiagnostic, SourceLocation } from '@isl-lang/lsp-core';\r\nimport { ISLImportResolver, type ImportResolutionResult, type ExportedSymbol } from './import-resolver';\r\nimport { ISLSemanticLinter } from './semantic-linter';\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\nexport interface DiagnosticsResult {\r\n  /** Standard diagnostics from parser and type checker */\r\n  diagnostics: Diagnostic[];\r\n  /** Import resolution result with imported symbols */\r\n  importResolution?: ImportResolutionResult;\r\n}\r\n\r\nexport interface DiagnosticsOptions {\r\n  /** Enable import-aware diagnostics */\r\n  resolveImports?: boolean;\r\n  /** Enable semantic lint warnings */\r\n  semanticLinting?: boolean;\r\n  /** Disabled lint rules */\r\n  disabledRules?: string[];\r\n}\r\n\r\n// ============================================================================\r\n// Diagnostics Provider\r\n// ============================================================================\r\n\r\nexport class ISLDiagnosticsProvider {\r\n  private importResolver: ISLImportResolver;\r\n  private semanticLinter: ISLSemanticLinter;\r\n  private options: DiagnosticsOptions = {\r\n    resolveImports: true,\r\n    semanticLinting: true,\r\n    disabledRules: [],\r\n  };\r\n\r\n  constructor(private documentManager: ISLDocumentManager) {\r\n    this.importResolver = new ISLImportResolver();\r\n    this.semanticLinter = new ISLSemanticLinter();\r\n  }\r\n\r\n  /**\r\n   * Configure diagnostics options\r\n   */\r\n  configure(options: Partial<DiagnosticsOptions>): void {\r\n    this.options = { ...this.options, ...options };\r\n    if (options.disabledRules) {\r\n      this.semanticLinter.configureRules([], options.disabledRules);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get disabled rules\r\n   */\r\n  getDisabledRules(): string[] {\r\n    return this.options.disabledRules || [];\r\n  }\r\n\r\n  /**\r\n   * Get the import resolver (for testing)\r\n   */\r\n  getImportResolver(): ISLImportResolver {\r\n    return this.importResolver;\r\n  }\r\n\r\n  /**\r\n   * Get the semantic linter (for testing)\r\n   */\r\n  getSemanticLinter(): ISLSemanticLinter {\r\n    return this.semanticLinter;\r\n  }\r\n\r\n  /**\r\n   * Get diagnostics for a document\r\n   * This method returns LSP-compatible diagnostics\r\n   */\r\n  provideDiagnostics(document: TextDocument): Diagnostic[] {\r\n    // Ensure document is parsed\r\n    this.documentManager.updateDocument(document, true);\r\n\r\n    // Get diagnostics from the analyzer (lsp-core)\r\n    const islDiagnostics = this.documentManager.getDiagnostics(document.uri);\r\n\r\n    // Convert to LSP diagnostics\r\n    let diagnostics = islDiagnostics.map(d => this.convertDiagnostic(d, document.uri));\r\n\r\n    // Add semantic lint diagnostics if enabled\r\n    if (this.options.semanticLinting) {\r\n      const parsed = this.documentManager.getDocument(document.uri);\r\n      if (parsed?.domain) {\r\n        const lintDiagnostics = this.semanticLinter.lint(parsed.domain, document.uri);\r\n        const lintConverted = lintDiagnostics.map(d => this.convertDiagnostic(d, document.uri));\r\n        \r\n        // Merge diagnostics, preferring ones with data (from our linter)\r\n        diagnostics = this.deduplicateDiagnostics([...diagnostics, ...lintConverted]);\r\n      }\r\n    }\r\n\r\n    // Filter out disabled rules (applies to both lsp-core and our linter)\r\n    const disabledRules = this.options.disabledRules || [];\r\n    if (disabledRules.length > 0) {\r\n      diagnostics = diagnostics.filter(d => \r\n        !d.code || !disabledRules.includes(String(d.code))\r\n      );\r\n    }\r\n\r\n    return diagnostics;\r\n  }\r\n\r\n  /**\r\n   * Deduplicate diagnostics, preferring ones with data field\r\n   */\r\n  private deduplicateDiagnostics(diagnostics: Diagnostic[]): Diagnostic[] {\r\n    const byKey = new Map<string, Diagnostic>();\r\n    \r\n    for (const d of diagnostics) {\r\n      // Create a key based on code and start position\r\n      const key = `${d.code}:${d.range.start.line}:${d.range.start.character}`;\r\n      \r\n      const existing = byKey.get(key);\r\n      if (!existing) {\r\n        byKey.set(key, d);\r\n      } else {\r\n        // Prefer the one with data (more context for quick fixes)\r\n        if (d.data && !existing.data) {\r\n          byKey.set(key, d);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return Array.from(byKey.values());\r\n  }\r\n\r\n  /**\r\n   * Get diagnostics with import resolution (async)\r\n   * Returns both diagnostics and import resolution info\r\n   */\r\n  async provideDiagnosticsWithImports(document: TextDocument): Promise<DiagnosticsResult> {\r\n    // Get base diagnostics\r\n    const diagnostics = this.provideDiagnostics(document);\r\n\r\n    // Skip import resolution if disabled or no domain\r\n    if (!this.options.resolveImports) {\r\n      return { diagnostics };\r\n    }\r\n\r\n    const parsed = this.documentManager.getDocument(document.uri);\r\n    if (!parsed?.domain) {\r\n      return { diagnostics };\r\n    }\r\n\r\n    // Resolve imports\r\n    const importResolution = await this.importResolver.resolveImports(\r\n      document.uri,\r\n      parsed.domain\r\n    );\r\n\r\n    // Add import diagnostics\r\n    for (const importDiag of importResolution.diagnostics) {\r\n      diagnostics.push(this.convertDiagnostic(importDiag, document.uri));\r\n    }\r\n\r\n    return {\r\n      diagnostics,\r\n      importResolution,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate type references against imported symbols\r\n   * Returns diagnostics for types that reference imported symbols\r\n   */\r\n  validateImportedReferences(\r\n    document: TextDocument,\r\n    importedSymbols: Map<string, ExportedSymbol>\r\n  ): Diagnostic[] {\r\n    const diagnostics: Diagnostic[] = [];\r\n    const parsed = this.documentManager.getDocument(document.uri);\r\n    if (!parsed?.domain) return diagnostics;\r\n\r\n    // Track which imported symbols are actually used\r\n    const usedImports = new Set<string>();\r\n\r\n    // Check type references in entities\r\n    for (const entity of parsed.domain.entities) {\r\n      for (const field of entity.fields) {\r\n        this.checkTypeReference(field.type, importedSymbols, usedImports, diagnostics, document.uri);\r\n      }\r\n    }\r\n\r\n    // Check type references in behaviors\r\n    for (const behavior of parsed.domain.behaviors) {\r\n      for (const field of behavior.input.fields) {\r\n        this.checkTypeReference(field.type, importedSymbols, usedImports, diagnostics, document.uri);\r\n      }\r\n      this.checkTypeReference(behavior.output.success, importedSymbols, usedImports, diagnostics, document.uri);\r\n    }\r\n\r\n    // Warn about unused imports\r\n    for (const [name, symbol] of importedSymbols) {\r\n      if (!usedImports.has(name)) {\r\n        // Find the import location for this symbol\r\n        const importLocation = this.findImportLocation(parsed.domain, name);\r\n        if (importLocation) {\r\n          diagnostics.push({\r\n            range: DocManager.toRange(importLocation),\r\n            message: `Imported '${name}' is never used`,\r\n            severity: LSPDiagnosticSeverity.Hint,\r\n            code: 'ISL2003',\r\n            source: 'isl-import-resolver',\r\n            data: {\r\n              type: 'unused-import',\r\n              symbolName: name,\r\n              originalName: symbol.name,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return diagnostics;\r\n  }\r\n\r\n  /**\r\n   * Check a type reference for imported symbol usage\r\n   */\r\n  private checkTypeReference(\r\n    typeDef: unknown,\r\n    importedSymbols: Map<string, ExportedSymbol>,\r\n    usedImports: Set<string>,\r\n    _diagnostics: Diagnostic[],\r\n    _uri: string\r\n  ): void {\r\n    if (!typeDef || typeof typeDef !== 'object') return;\r\n    const t = typeDef as Record<string, unknown>;\r\n\r\n    if (t.kind === 'ReferenceType' && t.name && typeof t.name === 'object') {\r\n      const name = t.name as { parts?: Array<{ name: string; location: SourceLocation }> };\r\n      if (name.parts && name.parts.length > 0) {\r\n        const part = name.parts[0];\r\n        if (part && importedSymbols.has(part.name)) {\r\n          usedImports.add(part.name);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Recurse into container types\r\n    if (t.element) this.checkTypeReference(t.element, importedSymbols, usedImports, _diagnostics, _uri);\r\n    if (t.key) this.checkTypeReference(t.key, importedSymbols, usedImports, _diagnostics, _uri);\r\n    if (t.value) this.checkTypeReference(t.value, importedSymbols, usedImports, _diagnostics, _uri);\r\n    if (t.inner) this.checkTypeReference(t.inner, importedSymbols, usedImports, _diagnostics, _uri);\r\n    if (t.base) this.checkTypeReference(t.base, importedSymbols, usedImports, _diagnostics, _uri);\r\n  }\r\n\r\n  /**\r\n   * Find the import location for a symbol name\r\n   */\r\n  private findImportLocation(domain: { imports: Array<{ items: Array<{ name: { name: string; location: SourceLocation }; alias?: { name: string; location: SourceLocation } }> }> }, name: string): SourceLocation | undefined {\r\n    for (const imp of domain.imports) {\r\n      for (const item of imp.items) {\r\n        const importedName = item.alias?.name || item.name.name;\r\n        if (importedName === name) {\r\n          return item.alias?.location || item.name.location;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Convert ISL diagnostic to LSP diagnostic\r\n   */\r\n  private convertDiagnostic(d: ISLDiagnostic, documentUri: string): Diagnostic {\r\n    const relatedInfo: DiagnosticRelatedInformation[] | undefined = d.relatedInfo?.map(r => ({\r\n      location: {\r\n        uri: r.location.file !== d.location.file ? this.toFileUri(r.location.file) : documentUri,\r\n        range: DocManager.toRange(r.location),\r\n      },\r\n      message: r.message,\r\n    }));\r\n\r\n    return {\r\n      range: DocManager.toRange(d.location),\r\n      message: d.message,\r\n      severity: d.severity as 1 | 2 | 3 | 4,\r\n      code: d.code,\r\n      source: d.source,\r\n      relatedInformation: relatedInfo,\r\n      data: d.data,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Convert file path to URI if needed\r\n   */\r\n  private toFileUri(filePath: string): string {\r\n    if (filePath.startsWith('file://')) {\r\n      return filePath;\r\n    }\r\n    // Simple conversion - in production would use vscode-uri\r\n    return `file://${filePath.replace(/\\\\/g, '/')}`;\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Definition Provider (Go to Definition)\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Position, Location } from 'vscode-languageserver';\r\nimport type { ISLDocumentManager } from '../documents';\r\n\r\nexport class ISLDefinitionProvider {\r\n  constructor(private documentManager: ISLDocumentManager) {}\r\n\r\n  provideDefinition(document: TextDocument, position: Position): Location | null {\r\n    const word = this.documentManager.getWordAtPosition(document, position);\r\n    if (!word) return null;\r\n\r\n    // Skip built-in types\r\n    if (this.isBuiltinType(word)) {\r\n      return null;\r\n    }\r\n\r\n    // Find symbol definition in the index\r\n    const symbol = this.documentManager.findSymbol(word);\r\n    if (symbol) {\r\n      return {\r\n        uri: symbol.uri,\r\n        range: {\r\n          start: {\r\n            line: symbol.selectionLocation.line - 1,\r\n            character: symbol.selectionLocation.column - 1,\r\n          },\r\n          end: {\r\n            line: symbol.selectionLocation.endLine - 1,\r\n            character: symbol.selectionLocation.endColumn - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n\r\n    // Try to find in current document's symbols\r\n    const docSymbols = this.documentManager.getSymbols(document.uri);\r\n    const found = this.findSymbolByName(docSymbols, word);\r\n    if (found) {\r\n      return {\r\n        uri: document.uri,\r\n        range: {\r\n          start: {\r\n            line: found.selectionLocation.line - 1,\r\n            character: found.selectionLocation.column - 1,\r\n          },\r\n          end: {\r\n            line: found.selectionLocation.endLine - 1,\r\n            character: found.selectionLocation.endColumn - 1,\r\n          },\r\n        },\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private isBuiltinType(name: string): boolean {\r\n    const builtins = new Set([\r\n      'String', 'Int', 'Decimal', 'Boolean', 'UUID', 'Timestamp',\r\n      'Duration', 'Date', 'Time', 'List', 'Map', 'Set', 'Optional', 'Any',\r\n    ]);\r\n    return builtins.has(name);\r\n  }\r\n\r\n  private findSymbolByName(\r\n    symbols: Array<{\r\n      name: string;\r\n      location: { line: number; column: number; endLine: number; endColumn: number };\r\n      selectionLocation: { line: number; column: number; endLine: number; endColumn: number };\r\n      children?: unknown[];\r\n    }>,\r\n    name: string\r\n  ): { selectionLocation: { line: number; column: number; endLine: number; endColumn: number } } | undefined {\r\n    for (const sym of symbols) {\r\n      if (sym.name === name) return sym;\r\n      if (sym.children) {\r\n        const found = this.findSymbolByName(sym.children as typeof symbols, name);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Document Symbol Provider\r\n// Provides document outline/symbols for the editor\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Range } from 'vscode-languageserver';\r\nimport type { ISLDocumentManager } from '../documents';\r\nimport { ISLDocumentManager as DocManager } from '../documents';\r\nimport type { ISLSymbolInfo, SourceLocation } from '@isl-lang/lsp-core';\r\n\r\nexport interface DocumentSymbol {\r\n  name: string;\r\n  kind: string;\r\n  range: Range;\r\n  selectionRange: Range;\r\n  detail?: string;\r\n  children?: DocumentSymbol[];\r\n}\r\n\r\nexport class ISLSymbolProvider {\r\n  constructor(private documentManager: ISLDocumentManager) {}\r\n\r\n  provideSymbols(document: TextDocument): DocumentSymbol[] {\r\n    // Ensure document is parsed\r\n    this.documentManager.updateDocument(document, true);\r\n\r\n    // Get symbols from the analyzer\r\n    const symbols = this.documentManager.getSymbols(document.uri);\r\n\r\n    // Convert to document symbols\r\n    return symbols.map(sym => this.convertSymbol(sym));\r\n  }\r\n\r\n  private convertSymbol(sym: ISLSymbolInfo): DocumentSymbol {\r\n    return {\r\n      name: sym.name,\r\n      kind: sym.kind,\r\n      range: this.toRange(sym.location),\r\n      selectionRange: this.toRange(sym.selectionLocation),\r\n      detail: sym.detail,\r\n      children: sym.children?.map(child => this.convertSymbol(child)),\r\n    };\r\n  }\r\n\r\n  private toRange(loc: { line: number; column: number; endLine: number; endColumn: number }): Range {\r\n    return {\r\n      start: { line: loc.line - 1, character: loc.column - 1 },\r\n      end: { line: loc.endLine - 1, character: loc.endColumn - 1 },\r\n    };\r\n  }\r\n}\r\n","// ============================================================================\r\n// ISL Semantic Tokens Provider\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { ISLDocumentManager } from '../documents';\r\nimport type { SemanticToken, SemanticTokenType, SemanticTokenModifier } from '../types';\r\n\r\nexport const TOKEN_TYPES: SemanticTokenType[] = [\r\n  'namespace',\r\n  'type',\r\n  'class',\r\n  'enum',\r\n  'interface',\r\n  'struct',\r\n  'typeParameter',\r\n  'parameter',\r\n  'variable',\r\n  'property',\r\n  'enumMember',\r\n  'function',\r\n  'method',\r\n  'keyword',\r\n  'modifier',\r\n  'comment',\r\n  'string',\r\n  'number',\r\n  'regexp',\r\n  'operator',\r\n  'decorator',\r\n];\r\n\r\nexport const TOKEN_MODIFIERS: SemanticTokenModifier[] = [\r\n  'declaration',\r\n  'definition',\r\n  'readonly',\r\n  'static',\r\n  'deprecated',\r\n  'abstract',\r\n  'async',\r\n  'modification',\r\n  'documentation',\r\n  'defaultLibrary',\r\n];\r\n\r\nconst KEYWORDS = new Set([\r\n  'domain', 'entity', 'behavior', 'type', 'invariant', 'policy', 'view', 'scenario',\r\n  'input', 'output', 'pre', 'post', 'error', 'lifecycle', 'temporal', 'security',\r\n  'version', 'description', 'forall', 'exists', 'implies', 'and', 'or', 'not',\r\n  'old', 'result', 'true', 'false', 'null', 'given', 'when', 'then',\r\n]);\r\n\r\nconst BUILTIN_TYPES = new Set([\r\n  'String', 'Int', 'Boolean', 'UUID', 'Timestamp', 'Decimal', 'Duration',\r\n  'Date', 'Time', 'List', 'Map', 'Set', 'Optional',\r\n]);\r\n\r\nexport class ISLSemanticTokensProvider {\r\n  constructor(private documentManager: ISLDocumentManager) {}\r\n\r\n  provideTokens(document: TextDocument): SemanticToken[] {\r\n    const tokens: SemanticToken[] = [];\r\n    const text = document.getText();\r\n    const lines = text.split('\\n');\r\n\r\n    for (let lineNum = 0; lineNum < lines.length; lineNum++) {\r\n      const line = lines[lineNum];\r\n      this.tokenizeLine(line, lineNum, tokens);\r\n    }\r\n\r\n    return tokens;\r\n  }\r\n\r\n  private tokenizeLine(line: string, lineNum: number, tokens: SemanticToken[]): void {\r\n    // Comments\r\n    const commentMatch = line.match(/\\/\\/.*/);\r\n    if (commentMatch) {\r\n      const start = line.indexOf('//');\r\n      tokens.push({\r\n        line: lineNum,\r\n        startChar: start,\r\n        length: line.length - start,\r\n        tokenType: 'comment',\r\n        tokenModifiers: [],\r\n      });\r\n      return; // Don't process rest of line\r\n    }\r\n\r\n    // Strings\r\n    const stringRegex = /\"[^\"]*\"/g;\r\n    let stringMatch;\r\n    while ((stringMatch = stringRegex.exec(line)) !== null) {\r\n      tokens.push({\r\n        line: lineNum,\r\n        startChar: stringMatch.index,\r\n        length: stringMatch[0].length,\r\n        tokenType: 'string',\r\n        tokenModifiers: [],\r\n      });\r\n    }\r\n\r\n    // Numbers\r\n    const numberRegex = /\\b\\d+(\\.\\d+)?\\b/g;\r\n    let numberMatch;\r\n    while ((numberMatch = numberRegex.exec(line)) !== null) {\r\n      tokens.push({\r\n        line: lineNum,\r\n        startChar: numberMatch.index,\r\n        length: numberMatch[0].length,\r\n        tokenType: 'number',\r\n        tokenModifiers: [],\r\n      });\r\n    }\r\n\r\n    // Annotations\r\n    const annotationRegex = /@\\w+/g;\r\n    let annotationMatch;\r\n    while ((annotationMatch = annotationRegex.exec(line)) !== null) {\r\n      tokens.push({\r\n        line: lineNum,\r\n        startChar: annotationMatch.index,\r\n        length: annotationMatch[0].length,\r\n        tokenType: 'decorator',\r\n        tokenModifiers: [],\r\n      });\r\n    }\r\n\r\n    // Keywords and identifiers\r\n    const wordRegex = /\\b[a-zA-Z_]\\w*\\b/g;\r\n    let wordMatch;\r\n    while ((wordMatch = wordRegex.exec(line)) !== null) {\r\n      const word = wordMatch[0];\r\n      const startChar = wordMatch.index;\r\n\r\n      // Skip if already tokenized (in string)\r\n      if (this.isInString(line, startChar)) continue;\r\n\r\n      if (KEYWORDS.has(word)) {\r\n        tokens.push({\r\n          line: lineNum,\r\n          startChar,\r\n          length: word.length,\r\n          tokenType: 'keyword',\r\n          tokenModifiers: [],\r\n        });\r\n      } else if (BUILTIN_TYPES.has(word)) {\r\n        tokens.push({\r\n          line: lineNum,\r\n          startChar,\r\n          length: word.length,\r\n          tokenType: 'type',\r\n          tokenModifiers: ['defaultLibrary'],\r\n        });\r\n      } else if (/^[A-Z]/.test(word)) {\r\n        // Check context for type vs class\r\n        const beforeWord = line.substring(0, startChar).trim();\r\n        if (beforeWord.endsWith('entity') || beforeWord.endsWith('type')) {\r\n          tokens.push({\r\n            line: lineNum,\r\n            startChar,\r\n            length: word.length,\r\n            tokenType: 'class',\r\n            tokenModifiers: ['declaration'],\r\n          });\r\n        } else if (beforeWord.endsWith('behavior')) {\r\n          tokens.push({\r\n            line: lineNum,\r\n            startChar,\r\n            length: word.length,\r\n            tokenType: 'function',\r\n            tokenModifiers: ['declaration'],\r\n          });\r\n        } else if (beforeWord.endsWith(':') || beforeWord.endsWith('<') || beforeWord.endsWith(',')) {\r\n          tokens.push({\r\n            line: lineNum,\r\n            startChar,\r\n            length: word.length,\r\n            tokenType: 'type',\r\n            tokenModifiers: [],\r\n          });\r\n        } else {\r\n          tokens.push({\r\n            line: lineNum,\r\n            startChar,\r\n            length: word.length,\r\n            tokenType: 'class',\r\n            tokenModifiers: [],\r\n          });\r\n        }\r\n      } else if (line.includes(':') && startChar < line.indexOf(':')) {\r\n        // Field name (before colon)\r\n        tokens.push({\r\n          line: lineNum,\r\n          startChar,\r\n          length: word.length,\r\n          tokenType: 'property',\r\n          tokenModifiers: [],\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private isInString(line: string, position: number): boolean {\r\n    let inString = false;\r\n    for (let i = 0; i < position; i++) {\r\n      if (line[i] === '\"' && (i === 0 || line[i - 1] !== '\\\\')) {\r\n        inString = !inString;\r\n      }\r\n    }\r\n    return inString;\r\n  }\r\n}\r\n","// ============================================================================\n// ISL Code Action Provider\n// Quick fixes and refactoring actions with enhanced quickfix support\n// ============================================================================\n\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\nimport type { Range, CodeActionContext, Diagnostic } from 'vscode-languageserver';\nimport { CodeAction, CodeActionKind, TextEdit } from 'vscode-languageserver';\nimport type { ISLDocumentManager } from '../documents';\nimport { DiagnosticSeverity } from '@isl-lang/lsp-core';\n\n// ============================================================================\n// Quickfix Data Types (from semantic linter)\n// ============================================================================\n\ninterface QuickfixData {\n  type: string;\n  behaviorName?: string;\n  behaviorLocation?: { line: number; column: number; endLine: number; endColumn: number };\n  typeName?: string;\n  entityName?: string;\n  fieldName?: string;\n  symbolName?: string;\n  originalName?: string;\n  availableBehaviors?: string[];\n  availableExports?: string[];\n  suggestedConstraints?: string[];\n  preconditionCount?: number;\n  fields?: string[];\n  [key: string]: unknown;\n}\n\nexport class ISLCodeActionProvider {\n  constructor(private documentManager: ISLDocumentManager) {}\n\n  provideCodeActions(\n    document: TextDocument,\n    range: Range,\n    context: CodeActionContext\n  ): CodeAction[] {\n    const actions: CodeAction[] = [];\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Process diagnostics to generate quick fixes\n    for (const diagnostic of context.diagnostics) {\n      // Extract quickfix data if available\n      const data = diagnostic.data as QuickfixData | undefined;\n\n      // Missing postcondition (ISL1001)\n      if (diagnostic.code === 'ISL1001') {\n        const behaviorName = data?.behaviorName || this.extractBehaviorName(lines, diagnostic.range.start.line);\n        if (behaviorName) {\n          actions.push(this.createAddPostconditionAction(document, diagnostic.range, behaviorName));\n        }\n      }\n\n      // Precondition without error (ISL1002)\n      if (diagnostic.code === 'ISL1002' && data?.behaviorName) {\n        actions.push(this.createAddErrorCaseForPreconditionAction(document, diagnostic.range, data.behaviorName));\n      }\n\n      // Unused type (ISL1003)\n      if (diagnostic.code === 'ISL1003' && data?.typeName) {\n        actions.push(this.createRemoveUnusedTypeAction(document, diagnostic.range, data.typeName));\n      }\n\n      // Undefined behavior reference (ISL1004)\n      if (diagnostic.code === 'ISL1004' && data?.availableBehaviors) {\n        for (const behavior of data.availableBehaviors.slice(0, 3)) {\n          actions.push(this.createRenameToBehaviorAction(document, diagnostic.range, data.behaviorName || '', behavior));\n        }\n      }\n\n      // Missing description (ISL1010)\n      if (diagnostic.code === 'ISL1010' && data?.behaviorName) {\n        actions.push(this.createAddDescriptionAction(document, diagnostic.range, data.behaviorName));\n      }\n\n      // Entity without id (ISL1011)\n      if (diagnostic.code === 'ISL1011' && data?.entityName) {\n        actions.push(this.createAddIdFieldAction(document, diagnostic.range, data.entityName));\n      }\n\n      // No temporal constraints (ISL1012)\n      if (diagnostic.code === 'ISL1012' && data?.behaviorName) {\n        actions.push(this.createAddTemporalAction(document, diagnostic.range, data.behaviorName));\n      }\n\n      // No scenarios (ISL1013)\n      if (diagnostic.code === 'ISL1013' && data?.behaviorName) {\n        actions.push(this.createGenerateScenarioAction(document, data.behaviorName, diagnostic.range));\n      }\n\n      // Sensitive field unprotected (ISL1020)\n      if (diagnostic.code === 'ISL1020' && data?.suggestedConstraints) {\n        actions.push(this.createAddConstraintsAction(document, diagnostic.range, data.fieldName || '', data.suggestedConstraints));\n      }\n\n      // No authentication (ISL1021)\n      if (diagnostic.code === 'ISL1021' && data?.behaviorName) {\n        actions.push(this.createAddSecurityAction(document, diagnostic.range, data.behaviorName));\n      }\n\n      // Unbounded list (ISL1030)\n      if (diagnostic.code === 'ISL1030' && data?.typeName) {\n        actions.push(this.createAddMaxSizeAction(document, diagnostic.range, data.typeName));\n      }\n\n      // Missing pagination (ISL1031)\n      if (diagnostic.code === 'ISL1031' && data?.behaviorName) {\n        actions.push(this.createAddPaginationAction(document, diagnostic.range, data.behaviorName));\n      }\n\n      // Unresolved import (ISL2001)\n      if (diagnostic.code === 'ISL2001') {\n        // Suggest creating the file\n        actions.push(this.createFileAction(document, diagnostic));\n      }\n\n      // Unknown export (ISL2002)\n      if (diagnostic.code === 'ISL2002' && data?.availableExports) {\n        for (const exp of data.availableExports.slice(0, 3)) {\n          actions.push(this.createReplaceImportAction(document, diagnostic.range, data.symbolName || '', exp));\n        }\n      }\n\n      // Unused import (ISL2003)\n      if (diagnostic.code === 'ISL2003') {\n        actions.push(this.createRemoveImportAction(document, diagnostic.range, data?.symbolName || ''));\n      }\n\n      // Unknown type - suggest creating it (legacy)\n      if (diagnostic.code === 'ISL002' || diagnostic.message.includes('Unknown type')) {\n        const typeName = this.extractTypeName(diagnostic.message);\n        if (typeName) {\n          actions.push(this.createDefineTypeAction(document, typeName));\n        }\n      }\n\n      // Naming convention warning\n      if (diagnostic.code === 'ISL009') {\n        const name = this.getWordAtRange(lines, diagnostic.range);\n        if (name) {\n          actions.push(this.createRenameToUppercaseAction(document, diagnostic.range, name));\n        }\n      }\n\n      if (diagnostic.code === 'ISL010') {\n        const name = this.getWordAtRange(lines, diagnostic.range);\n        if (name) {\n          actions.push(this.createRenameToLowercaseAction(document, diagnostic.range, name));\n        }\n      }\n    }\n\n    // Context-based actions (not tied to diagnostics)\n    const lineText = lines[range.start.line] || '';\n    const trimmed = lineText.trim();\n\n    // In a behavior - offer to generate scenario\n    if (this.isInBehavior(lines, range.start.line)) {\n      const behaviorName = this.extractBehaviorName(lines, range.start.line);\n      if (behaviorName) {\n        actions.push(this.createGenerateScenarioAction(document, behaviorName, range));\n      }\n    }\n\n    // In a behavior without output errors - offer to add error case\n    if (trimmed.startsWith('output') || this.isInOutput(lines, range.start.line)) {\n      actions.push(this.createAddErrorCaseAction(document, range));\n    }\n\n    // On entity - offer to generate behavior\n    if (trimmed.match(/^entity\\s+\\w+/)) {\n      const entityName = trimmed.match(/^entity\\s+(\\w+)/)?.[1];\n      if (entityName) {\n        actions.push(this.createGenerateCrudBehaviorsAction(document, entityName, range));\n      }\n    }\n\n    // Generate skeleton from spec  available when cursor is inside a domain\n    if (this.isInDomain(lines, range.start.line)) {\n      const domainName = this.extractDomainName(lines);\n      if (domainName) {\n        actions.push(this.createGenerateSkeletonAction(document, domainName));\n      }\n    }\n\n    return actions;\n  }\n\n  // ============================================================================\n  // Quick Fix Actions\n  // ============================================================================\n\n  private createAddPostconditionAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the end of the behavior (before closing brace)\n    let insertLine = range.start.line;\n    let braceDepth = 0;\n    let foundBehavior = false;\n\n    for (let i = range.start.line; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes('behavior ' + behaviorName)) foundBehavior = true;\n      if (foundBehavior) {\n        braceDepth += (line.match(/\\{/g) || []).length;\n        braceDepth -= (line.match(/\\}/g) || []).length;\n        if (braceDepth === 0 && foundBehavior) {\n          insertLine = i;\n          break;\n        }\n      }\n    }\n\n    const indent = '  ';\n    const postconditionBlock = `\n${indent}postconditions {\n${indent}${indent}success implies {\n${indent}${indent}${indent}// Add postcondition assertions here\n${indent}${indent}}\n${indent}}\n`;\n\n    return {\n      title: 'Add postconditions block',\n      kind: CodeActionKind.QuickFix,\n      isPreferred: true,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert(\n              { line: insertLine, character: 0 },\n              postconditionBlock\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createDefineTypeAction(document: TextDocument, typeName: string): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find where to insert (after version, before entities/behaviors)\n    let insertLine = 2;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.trim().startsWith('entity ') || line.trim().startsWith('behavior ')) {\n        insertLine = i;\n        break;\n      }\n      if (line.trim().startsWith('type ') || line.trim().startsWith('enum ')) {\n        insertLine = i + 1;\n      }\n    }\n\n    const typeDefinition = `\n  type ${typeName} = String {\n    // Add constraints\n  }\n`;\n\n    return {\n      title: `Define type '${typeName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, typeDefinition),\n          ],\n        },\n      },\n    };\n  }\n\n  private createRenameToUppercaseAction(\n    document: TextDocument,\n    range: Range,\n    name: string\n  ): CodeAction {\n    const newName = name.charAt(0).toUpperCase() + name.slice(1);\n    return {\n      title: `Rename to '${newName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [TextEdit.replace(range, newName)],\n        },\n      },\n    };\n  }\n\n  private createRenameToLowercaseAction(\n    document: TextDocument,\n    range: Range,\n    name: string\n  ): CodeAction {\n    const newName = name.charAt(0).toLowerCase() + name.slice(1);\n    return {\n      title: `Rename to '${newName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [TextEdit.replace(range, newName)],\n        },\n      },\n    };\n  }\n\n  // ============================================================================\n  // Refactoring Actions\n  // ============================================================================\n\n  private createGenerateScenarioAction(\n    document: TextDocument,\n    behaviorName: string,\n    range: Range\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find end of domain\n    let insertLine = lines.length - 1;\n    for (let i = lines.length - 1; i >= 0; i--) {\n      const line = lines[i] || '';\n      if (line.trim() === '}') {\n        insertLine = i;\n        break;\n      }\n    }\n\n    const scenarioBlock = `\n  scenarios ${behaviorName} {\n    scenario \"Successful ${behaviorName}\" {\n      given {\n        // Setup initial state\n      }\n\n      when {\n        ${behaviorName}(/* params */)\n      }\n\n      then {\n        result != null\n      }\n    }\n\n    scenario \"${behaviorName} with invalid input\" {\n      given {\n        // Setup state for error case\n      }\n\n      when {\n        ${behaviorName}(/* invalid params */)\n      }\n\n      then {\n        // Error was returned\n      }\n    }\n  }\n`;\n\n    return {\n      title: `Generate test scenarios for ${behaviorName}`,\n      kind: CodeActionKind.Refactor,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, scenarioBlock),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddErrorCaseAction(document: TextDocument, range: Range): CodeAction {\n    const errorCase = `\n      ERROR_NAME {\n        when: \"Error description\"\n        retriable: false\n      }`;\n\n    return {\n      title: 'Add error case',\n      kind: CodeActionKind.Refactor,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert(\n              { line: range.start.line + 1, character: 0 },\n              errorCase\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createGenerateCrudBehaviorsAction(\n    document: TextDocument,\n    entityName: string,\n    range: Range\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find end of domain\n    let insertLine = lines.length - 1;\n    for (let i = lines.length - 1; i >= 0; i--) {\n      const line = lines[i] || '';\n      if (line.trim() === '}') {\n        insertLine = i;\n        break;\n      }\n    }\n\n    const crudBehaviors = `\n  behavior Create${entityName} {\n    description: \"Create a new ${entityName}\"\n\n    input {\n      // Add input fields from ${entityName}\n    }\n\n    output {\n      success: ${entityName}\n\n      errors {\n        VALIDATION_ERROR {\n          when: \"Input validation failed\"\n          retriable: true\n        }\n      }\n    }\n\n    preconditions {\n      // Add preconditions\n    }\n\n    postconditions {\n      success implies {\n        ${entityName}.exists(result.id)\n      }\n    }\n  }\n\n  behavior Get${entityName} {\n    description: \"Get ${entityName} by ID\"\n\n    input {\n      id: UUID\n    }\n\n    output {\n      success: ${entityName}\n\n      errors {\n        NOT_FOUND {\n          when: \"${entityName} does not exist\"\n          retriable: false\n        }\n      }\n    }\n\n    preconditions {\n      id != null\n    }\n\n    postconditions {\n      success implies {\n        result.id == input.id\n      }\n    }\n  }\n\n  behavior Update${entityName} {\n    description: \"Update an existing ${entityName}\"\n\n    input {\n      id: UUID\n      // Add updatable fields\n    }\n\n    output {\n      success: ${entityName}\n\n      errors {\n        NOT_FOUND {\n          when: \"${entityName} does not exist\"\n          retriable: false\n        }\n        VALIDATION_ERROR {\n          when: \"Input validation failed\"\n          retriable: true\n        }\n      }\n    }\n\n    preconditions {\n      ${entityName}.exists(input.id)\n    }\n\n    postconditions {\n      success implies {\n        ${entityName}.lookup(input.id) == result\n      }\n    }\n  }\n\n  behavior Delete${entityName} {\n    description: \"Delete a ${entityName}\"\n\n    input {\n      id: UUID\n    }\n\n    output {\n      success: Boolean\n\n      errors {\n        NOT_FOUND {\n          when: \"${entityName} does not exist\"\n          retriable: false\n        }\n      }\n    }\n\n    preconditions {\n      ${entityName}.exists(input.id)\n    }\n\n    postconditions {\n      success implies {\n        not ${entityName}.exists(input.id)\n      }\n    }\n  }\n`;\n\n    return {\n      title: `Generate CRUD behaviors for ${entityName}`,\n      kind: CodeActionKind.Refactor,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, crudBehaviors),\n          ],\n        },\n      },\n    };\n  }\n\n  // ============================================================================\n  // New Quick Fix Actions for Semantic Linter\n  // ============================================================================\n\n  private createAddErrorCaseForPreconditionAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the output block's errors section or end of output\n    let insertLine = range.start.line;\n    let inBehavior = false;\n    let inOutput = false;\n    let braceDepth = 0;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`behavior ${behaviorName}`)) inBehavior = true;\n      if (inBehavior) {\n        if (line.trim() === 'output {') inOutput = true;\n        if (inOutput) {\n          braceDepth += (line.match(/\\{/g) || []).length;\n          braceDepth -= (line.match(/\\}/g) || []).length;\n          if (braceDepth === 0) {\n            insertLine = i;\n            break;\n          }\n        }\n      }\n    }\n\n    const errorBlock = `\n      errors {\n        PRECONDITION_FAILED {\n          when: \"Precondition not met\"\n          retriable: false\n        }\n      }\n`;\n\n    return {\n      title: 'Add error case for precondition failure',\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, errorBlock),\n          ],\n        },\n      },\n    };\n  }\n\n  private createRemoveUnusedTypeAction(\n    document: TextDocument,\n    range: Range,\n    typeName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the full type declaration\n    let startLine = range.start.line;\n    let endLine = range.start.line;\n    let braceDepth = 0;\n    let found = false;\n\n    for (let i = startLine; i < lines.length; i++) {\n      const line = lines[i] || '';\n      braceDepth += (line.match(/\\{/g) || []).length;\n      braceDepth -= (line.match(/\\}/g) || []).length;\n      if (braceDepth === 0 && found) {\n        endLine = i;\n        break;\n      }\n      if (braceDepth > 0) found = true;\n    }\n\n    return {\n      title: `Remove unused type '${typeName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.del({\n              start: { line: startLine, character: 0 },\n              end: { line: endLine + 1, character: 0 },\n            }),\n          ],\n        },\n      },\n    };\n  }\n\n  private createRenameToBehaviorAction(\n    document: TextDocument,\n    range: Range,\n    currentName: string,\n    targetName: string\n  ): CodeAction {\n    return {\n      title: `Change to '${targetName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [TextEdit.replace(range, targetName)],\n        },\n      },\n    };\n  }\n\n  private createAddDescriptionAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the line after \"behavior X {\"\n    let insertLine = range.start.line + 1;\n    for (let i = range.start.line; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`behavior ${behaviorName}`) && line.includes('{')) {\n        insertLine = i + 1;\n        break;\n      }\n    }\n\n    return {\n      title: `Add description to '${behaviorName}'`,\n      kind: CodeActionKind.QuickFix,\n      isPreferred: true,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert(\n              { line: insertLine, character: 0 },\n              `    description: \"TODO: Add description for ${behaviorName}\"\\n\\n`\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddIdFieldAction(\n    document: TextDocument,\n    range: Range,\n    entityName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the line after \"entity X {\"\n    let insertLine = range.start.line + 1;\n    for (let i = range.start.line; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`entity ${entityName}`) && line.includes('{')) {\n        insertLine = i + 1;\n        break;\n      }\n    }\n\n    return {\n      title: `Add 'id' field to '${entityName}'`,\n      kind: CodeActionKind.QuickFix,\n      isPreferred: true,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert(\n              { line: insertLine, character: 0 },\n              `    id: UUID\\n`\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddTemporalAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the end of the behavior\n    let insertLine = range.start.line;\n    let braceDepth = 0;\n    let inBehavior = false;\n\n    for (let i = range.start.line; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`behavior ${behaviorName}`)) inBehavior = true;\n      if (inBehavior) {\n        braceDepth += (line.match(/\\{/g) || []).length;\n        braceDepth -= (line.match(/\\}/g) || []).length;\n        if (braceDepth === 0 && inBehavior) {\n          insertLine = i;\n          break;\n        }\n      }\n    }\n\n    const temporalBlock = `\n    temporal {\n      response within 500.ms (p99)\n    }\n`;\n\n    return {\n      title: `Add temporal constraints to '${behaviorName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, temporalBlock),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddConstraintsAction(\n    document: TextDocument,\n    range: Range,\n    fieldName: string,\n    suggestedConstraints: string[]\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n    const line = lines[range.start.line] || '';\n\n    // Find the type after the colon\n    const match = line.match(/:\\s*(\\w+)/);\n    if (!match) {\n      return {\n        title: `Add constraints to '${fieldName}'`,\n        kind: CodeActionKind.QuickFix,\n        edit: { changes: {} },\n      };\n    }\n\n    const constraints = suggestedConstraints.join(', ');\n    const newLine = line.replace(\n      /:\\s*(\\w+)/,\n      `: $1 { ${constraints} }`\n    );\n\n    return {\n      title: `Add security constraints to '${fieldName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.replace(\n              {\n                start: { line: range.start.line, character: 0 },\n                end: { line: range.start.line, character: line.length },\n              },\n              newLine\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddSecurityAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the end of the behavior\n    let insertLine = range.start.line;\n    let braceDepth = 0;\n    let inBehavior = false;\n\n    for (let i = range.start.line; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`behavior ${behaviorName}`)) inBehavior = true;\n      if (inBehavior) {\n        braceDepth += (line.match(/\\{/g) || []).length;\n        braceDepth -= (line.match(/\\}/g) || []).length;\n        if (braceDepth === 0 && inBehavior) {\n          insertLine = i;\n          break;\n        }\n      }\n    }\n\n    const securityBlock = `\n    security {\n      requires authentication\n    }\n`;\n\n    return {\n      title: `Add security requirements to '${behaviorName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, securityBlock),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddMaxSizeAction(\n    document: TextDocument,\n    range: Range,\n    typeName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n    const line = lines[range.start.line] || '';\n\n    // Add max_size constraint to list type\n    const newLine = line.replace(\n      /List<([^>]+)>/,\n      'List<$1> { max_size: 1000 }'\n    );\n\n    return {\n      title: `Add max_size constraint to '${typeName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.replace(\n              {\n                start: { line: range.start.line, character: 0 },\n                end: { line: range.start.line, character: line.length },\n              },\n              newLine\n            ),\n          ],\n        },\n      },\n    };\n  }\n\n  private createAddPaginationAction(\n    document: TextDocument,\n    range: Range,\n    behaviorName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n\n    // Find the input block\n    let insertLine = range.start.line;\n    let inBehavior = false;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i] || '';\n      if (line.includes(`behavior ${behaviorName}`)) inBehavior = true;\n      if (inBehavior && line.trim() === 'input {') {\n        insertLine = i + 1;\n        break;\n      }\n    }\n\n    const paginationFields = `      page: Int { min: 1, default: 1 }\n      pageSize: Int { min: 1, max: 100, default: 20 }\n`;\n\n    return {\n      title: `Add pagination to '${behaviorName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.insert({ line: insertLine, character: 0 }, paginationFields),\n          ],\n        },\n      },\n    };\n  }\n\n  private createFileAction(document: TextDocument, diagnostic: Diagnostic): CodeAction {\n    return {\n      title: 'Create missing file',\n      kind: CodeActionKind.QuickFix,\n      command: {\n        title: 'Create ISL File',\n        command: 'isl.createFile',\n        arguments: [diagnostic.data],\n      },\n    };\n  }\n\n  private createReplaceImportAction(\n    document: TextDocument,\n    range: Range,\n    currentName: string,\n    targetName: string\n  ): CodeAction {\n    return {\n      title: `Import '${targetName}' instead`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [TextEdit.replace(range, targetName)],\n        },\n      },\n    };\n  }\n\n  private createRemoveImportAction(\n    document: TextDocument,\n    range: Range,\n    symbolName: string\n  ): CodeAction {\n    const text = document.getText();\n    const lines = text.split('\\n');\n    const line = lines[range.start.line] || '';\n\n    // Check if this is the only import item on the line\n    const importMatch = line.match(/imports\\s*\\{([^}]+)\\}/);\n    if (importMatch) {\n      const items = importMatch[1]?.split(',').map(s => s.trim()) || [];\n      if (items.length === 1) {\n        // Remove the entire import line\n        return {\n          title: `Remove unused import '${symbolName}'`,\n          kind: CodeActionKind.QuickFix,\n          edit: {\n            changes: {\n              [document.uri]: [\n                TextEdit.del({\n                  start: { line: range.start.line, character: 0 },\n                  end: { line: range.start.line + 1, character: 0 },\n                }),\n              ],\n            },\n          },\n        };\n      }\n    }\n\n    // Just remove the import item\n    return {\n      title: `Remove unused import '${symbolName}'`,\n      kind: CodeActionKind.QuickFix,\n      edit: {\n        changes: {\n          [document.uri]: [\n            TextEdit.replace(range, ''),\n          ],\n        },\n      },\n    };\n  }\n\n  // ============================================================================\n  // Helper Methods\n  // ============================================================================\n\n  private extractBehaviorName(lines: string[], startLine: number): string | undefined {\n    for (let i = startLine; i >= 0; i--) {\n      const match = lines[i]?.match(/^(\\s*)behavior\\s+(\\w+)/);\n      if (match) return match[2];\n    }\n    return undefined;\n  }\n\n  private extractTypeName(message: string): string | undefined {\n    const match = message.match(/Unknown type '(\\w+)'/);\n    return match?.[1];\n  }\n\n  private getWordAtRange(lines: string[], range: Range): string | undefined {\n    const line = lines[range.start.line];\n    if (!line) return undefined;\n    return line.substring(range.start.character, range.end.character);\n  }\n\n  private isInBehavior(lines: string[], lineNum: number): boolean {\n    let braceDepth = 0;\n    for (let i = lineNum; i >= 0; i--) {\n      const line = lines[i] || '';\n      braceDepth += (line.match(/\\}/g) || []).length;\n      braceDepth -= (line.match(/\\{/g) || []).length;\n      if (line.match(/^(\\s*)behavior\\s+\\w+/) && braceDepth <= 0) {\n        return true;\n      }\n      if (line.match(/^(\\s*)entity\\s+\\w+/) && braceDepth <= 0) {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  private isInOutput(lines: string[], lineNum: number): boolean {\n    let braceDepth = 0;\n    for (let i = lineNum; i >= 0; i--) {\n      const line = lines[i] || '';\n      braceDepth += (line.match(/\\}/g) || []).length;\n      braceDepth -= (line.match(/\\{/g) || []).length;\n      if (line.trim() === 'output {' && braceDepth <= 0) {\n        return true;\n      }\n      if (line.trim() === 'input {' && braceDepth <= 0) {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  private isInDomain(lines: string[], lineNum: number): boolean {\n    for (let i = lineNum; i >= 0; i--) {\n      const line = lines[i] || '';\n      if (line.match(/^\\s*domain\\s+\\w+/)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private extractDomainName(lines: string[]): string | undefined {\n    for (const line of lines) {\n      const match = line.match(/^\\s*domain\\s+(\\w+)/);\n      if (match) return match[1];\n    }\n    return undefined;\n  }\n\n  private createGenerateSkeletonAction(\n    document: TextDocument,\n    domainName: string\n  ): CodeAction {\n    return {\n      title: `Generate implementation skeleton for ${domainName}`,\n      kind: CodeActionKind.Source,\n      command: {\n        title: 'Generate Skeleton from ISL Spec',\n        command: 'shipgate.isl.generateSkeleton',\n        arguments: [document.uri, domainName],\n      },\n    };\n  }\n}\n","// ============================================================================\r\n// ISL Document Formatting Provider\r\n// Consistent formatting for ISL files\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { FormattingOptions } from 'vscode-languageserver';\r\nimport { TextEdit } from 'vscode-languageserver';\r\n\r\nexport class ISLFormattingProvider {\r\n  format(document: TextDocument, options: FormattingOptions): TextEdit[] {\r\n    const text = document.getText();\r\n    const formatted = this.formatSource(text, options);\r\n\r\n    // Only return edit if there are changes\r\n    if (formatted === text) {\r\n      return [];\r\n    }\r\n\r\n    return [\r\n      TextEdit.replace(\r\n        {\r\n          start: { line: 0, character: 0 },\r\n          end: document.positionAt(text.length),\r\n        },\r\n        formatted\r\n      ),\r\n    ];\r\n  }\r\n\r\n  private formatSource(source: string, options: FormattingOptions): string {\r\n    const indent = options.insertSpaces ? ' '.repeat(options.tabSize) : '\\t';\r\n    const lines = source.split('\\n');\r\n    const result: string[] = [];\r\n\r\n    let indentLevel = 0;\r\n    let inComment = false;\r\n    let prevLineWasEmpty = false;\r\n    let prevLineWasOpenBrace = false;\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const line = lines[i] || '';\r\n      const trimmed = line.trim();\r\n\r\n      // Skip empty lines at start\r\n      if (result.length === 0 && trimmed === '') {\r\n        continue;\r\n      }\r\n\r\n      // Handle multi-line comments (if ISL supports them)\r\n      if (trimmed.startsWith('/*')) inComment = true;\r\n      if (trimmed.endsWith('*/')) inComment = false;\r\n\r\n      // Handle comments\r\n      if (trimmed.startsWith('#') || trimmed.startsWith('//') || inComment) {\r\n        result.push(indent.repeat(indentLevel) + trimmed);\r\n        prevLineWasEmpty = false;\r\n        prevLineWasOpenBrace = false;\r\n        continue;\r\n      }\r\n\r\n      // Decrease indent before closing brace\r\n      if (trimmed.startsWith('}')) {\r\n        indentLevel = Math.max(0, indentLevel - 1);\r\n      }\r\n\r\n      // Handle empty lines - max 1 consecutive\r\n      if (trimmed === '') {\r\n        if (!prevLineWasEmpty && !prevLineWasOpenBrace && result.length > 0) {\r\n          result.push('');\r\n          prevLineWasEmpty = true;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      // Add blank line before top-level declarations (except first)\r\n      const isTopLevel = this.isTopLevelDeclaration(trimmed);\r\n      if (isTopLevel && result.length > 0 && !prevLineWasEmpty && indentLevel <= 1) {\r\n        const prevLine = result[result.length - 1]?.trim() || '';\r\n        if (prevLine !== '' && prevLine !== '{' && !prevLine.startsWith('#')) {\r\n          result.push('');\r\n        }\r\n      }\r\n\r\n      // Format the line\r\n      const formattedLine = this.formatLine(trimmed, indentLevel, indent);\r\n      result.push(formattedLine);\r\n\r\n      // Increase indent after opening brace\r\n      if (trimmed.endsWith('{')) {\r\n        indentLevel++;\r\n        prevLineWasOpenBrace = true;\r\n      } else {\r\n        prevLineWasOpenBrace = false;\r\n      }\r\n\r\n      prevLineWasEmpty = false;\r\n    }\r\n\r\n    // Remove trailing empty lines\r\n    while (result.length > 0 && result[result.length - 1]?.trim() === '') {\r\n      result.pop();\r\n    }\r\n\r\n    // Ensure file ends with newline\r\n    return result.join('\\n') + '\\n';\r\n  }\r\n\r\n  private isTopLevelDeclaration(line: string): boolean {\r\n    return (\r\n      line.startsWith('entity ') ||\r\n      line.startsWith('behavior ') ||\r\n      line.startsWith('type ') ||\r\n      line.startsWith('enum ') ||\r\n      line.startsWith('invariants ') ||\r\n      line.startsWith('invariant ') ||\r\n      line.startsWith('policy ') ||\r\n      line.startsWith('view ') ||\r\n      line.startsWith('scenarios ') ||\r\n      line.startsWith('chaos ')\r\n    );\r\n  }\r\n\r\n  private formatLine(line: string, indentLevel: number, indent: string): string {\r\n    // Apply base indentation\r\n    let formatted = indent.repeat(indentLevel) + line;\r\n\r\n    // Normalize whitespace around operators\r\n    formatted = this.normalizeOperators(formatted);\r\n\r\n    // Normalize colons (field: Type, not field :Type)\r\n    formatted = this.normalizeColons(formatted);\r\n\r\n    // Normalize braces\r\n    formatted = this.normalizeBraces(formatted);\r\n\r\n    // Normalize annotations\r\n    formatted = this.normalizeAnnotations(formatted);\r\n\r\n    return formatted;\r\n  }\r\n\r\n  private normalizeOperators(line: string): string {\r\n    // Preserve indentation\r\n    const match = line.match(/^(\\s*)/);\r\n    const indent = match ? match[1] : '';\r\n    let content = line.trim();\r\n\r\n    // Normalize comparison operators\r\n    content = content.replace(/\\s*==\\s*/g, ' == ');\r\n    content = content.replace(/\\s*!=\\s*/g, ' != ');\r\n    content = content.replace(/\\s*<=\\s*/g, ' <= ');\r\n    content = content.replace(/\\s*>=\\s*/g, ' >= ');\r\n    content = content.replace(/\\s*<\\s*/g, ' < ');\r\n    content = content.replace(/\\s*>\\s*/g, ' > ');\r\n\r\n    // Normalize logical operators\r\n    content = content.replace(/\\s+and\\s+/g, ' and ');\r\n    content = content.replace(/\\s+or\\s+/g, ' or ');\r\n    content = content.replace(/\\s+implies\\s+/g, ' implies ');\r\n\r\n    // Normalize arithmetic operators\r\n    content = content.replace(/\\s*\\+\\s*/g, ' + ');\r\n    content = content.replace(/\\s*-\\s*/g, ' - ');\r\n    content = content.replace(/\\s*\\*\\s*/g, ' * ');\r\n    content = content.replace(/\\s*\\/\\s*/g, ' / ');\r\n\r\n    // Fix generic types (no spaces in <T>)\r\n    content = content.replace(/< /g, '<');\r\n    content = content.replace(/ >/g, '>');\r\n    content = content.replace(/, /g, ', ');\r\n\r\n    // Fix negative numbers and arrows\r\n    content = content.replace(/ - > /g, ' -> ');\r\n    content = content.replace(/ - (\\d)/g, ' -$1');\r\n\r\n    return indent + content;\r\n  }\r\n\r\n  private normalizeColons(line: string): string {\r\n    const match = line.match(/^(\\s*)/);\r\n    const indent = match ? match[1] : '';\r\n    let content = line.trim();\r\n\r\n    // Field declarations: name: Type\r\n    content = content.replace(/(\\w+)\\s*:\\s*/g, '$1: ');\r\n\r\n    // Version/description strings: key: \"value\"\r\n    // Already handled by above\r\n\r\n    return indent + content;\r\n  }\r\n\r\n  private normalizeBraces(line: string): string {\r\n    const match = line.match(/^(\\s*)/);\r\n    const indent = match ? match[1] : '';\r\n    let content = line.trim();\r\n\r\n    // Opening brace on same line as declaration\r\n    content = content.replace(/\\s*\\{\\s*$/, ' {');\r\n\r\n    // Space before opening brace\r\n    content = content.replace(/(\\S)\\{/g, '$1 {');\r\n\r\n    return indent + content;\r\n  }\r\n\r\n  private normalizeAnnotations(line: string): string {\r\n    const match = line.match(/^(\\s*)/);\r\n    const indent = match ? match[1] : '';\r\n    let content = line.trim();\r\n\r\n    // Normalize annotation brackets\r\n    content = content.replace(/\\[\\s+/g, '[');\r\n    content = content.replace(/\\s+\\]/g, ']');\r\n\r\n    // Normalize comma-separated annotations\r\n    content = content.replace(/,\\s*/g, ', ');\r\n    content = content.replace(/,\\s+\\]/g, ']');\r\n\r\n    return indent + content;\r\n  }\r\n}\r\n","// ============================================================================\r\n// Host & Reality-Gap Scanner Diagnostics\r\n// Maps firewall (ShipGate + ISL Studio) verdicts to LSP diagnostics.\r\n// Severity, codes, and messages match CLI output; suppressions/allowlists\r\n// are applied inside the firewall.\r\n// ============================================================================\r\n\r\nimport type { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport type { Diagnostic, Range } from 'vscode-languageserver';\r\nimport { DiagnosticSeverity } from 'vscode-languageserver';\r\nimport type { PolicyViolation } from '@isl-lang/firewall';\r\nimport type { IntegratedGateResult } from '@isl-lang/firewall';\r\nimport { createIntegratedFirewall } from '@isl-lang/firewall';\r\n\r\n// ============================================================================\r\n// Constants  match CLI severity/tier\r\n// ============================================================================\r\n\r\nconst SUPPORTED_EXTENSIONS = new Set(['.ts', '.tsx', '.js', '.jsx']);\r\nconst SOURCE_HOST = 'shipgate-host';\r\nconst SOURCE_REALITY_GAP = 'shipgate-reality-gap';\r\n\r\n// ============================================================================\r\n// Severity mapping: CLI tier/severity  LSP DiagnosticSeverity\r\n// ============================================================================\r\n\r\nfunction tierToLSPSeverity(tier: 'hard_block' | 'soft_block' | 'warn'): DiagnosticSeverity {\r\n  switch (tier) {\r\n    case 'hard_block':\r\n      return DiagnosticSeverity.Error;\r\n    case 'soft_block':\r\n      return DiagnosticSeverity.Warning;\r\n    case 'warn':\r\n      return DiagnosticSeverity.Information;\r\n    default:\r\n      return DiagnosticSeverity.Warning;\r\n  }\r\n}\r\n\r\nfunction severityToLSP(severity: 'critical' | 'high' | 'medium' | 'low'): DiagnosticSeverity {\r\n  switch (severity) {\r\n    case 'critical':\r\n    case 'high':\r\n      return DiagnosticSeverity.Error;\r\n    case 'medium':\r\n      return DiagnosticSeverity.Warning;\r\n    case 'low':\r\n      return DiagnosticSeverity.Information;\r\n    default:\r\n      return DiagnosticSeverity.Warning;\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Range helpers\r\n// ============================================================================\r\n\r\n/** Claim location is 1-based line/column; LSP is 0-based. */\r\nfunction claimLocationToRange(claim: { location: { line: number; column: number; length: number } }): Range {\r\n  const { line, column, length } = claim.location;\r\n  return {\r\n    start: { line: line - 1, character: Math.max(0, column - 1) },\r\n    end: { line: line - 1, character: Math.max(0, column - 1 + length) },\r\n  };\r\n}\r\n\r\n/** Line-only violation (e.g. ISL Studio): claimId is \"line-<num>\". */\r\nfunction lineOnlyRange(document: TextDocument, claimId: string): Range {\r\n  const match = /^line-(\\d+)$/.exec(claimId);\r\n  const line = match ? parseInt(match[1], 10) : 1;\r\n  const lineIndex = Math.max(0, line - 1);\r\n  const text = document.getText().split('\\n')[lineIndex];\r\n  const endChar = text !== undefined ? text.length : 0;\r\n  return {\r\n    start: { line: lineIndex, character: 0 },\r\n    end: { line: lineIndex, character: endChar },\r\n  };\r\n}\r\n\r\n// ============================================================================\r\n// Scanner diagnostics provider\r\n// ============================================================================\r\n\r\nexport interface ScannerDiagnosticsOptions {\r\n  projectRoot: string;\r\n  enabled: boolean;\r\n  /** Host scanner (truthpack/reality state)  ghost-route, ghost-env, etc. */\r\n  hostScanner: boolean;\r\n  /** Reality-Gap scanner (code vs truthpack)  same engine, exposed as separate source for filtering */\r\n  realityGapScanner: boolean;\r\n}\r\n\r\nconst DEFAULT_OPTIONS: ScannerDiagnosticsOptions = {\r\n  projectRoot: process.cwd(),\r\n  enabled: true,\r\n  hostScanner: true,\r\n  realityGapScanner: true,\r\n};\r\n\r\nexport class ScannerDiagnosticsProvider {\r\n  private options: ScannerDiagnosticsOptions;\r\n  private firewallInstance: ReturnType<typeof createIntegratedFirewall>;\r\n\r\n  constructor(options: Partial<ScannerDiagnosticsOptions> = {}) {\r\n    this.options = { ...DEFAULT_OPTIONS, ...options };\r\n    this.firewallInstance = createIntegratedFirewall({\r\n      projectRoot: this.options.projectRoot,\r\n      mode: 'observe',\r\n    });\r\n  }\r\n\r\n  configure(options: Partial<ScannerDiagnosticsOptions>): void {\r\n    this.options = { ...this.options, ...options };\r\n    this.firewallInstance = createIntegratedFirewall({\r\n      projectRoot: this.options.projectRoot,\r\n      mode: 'observe',\r\n    });\r\n  }\r\n\r\n  /** Whether this document should be scanned (file type). */\r\n  isSupported(document: TextDocument): boolean {\r\n    const path = uriToFilePath(document.uri);\r\n    const ext = path.includes('.') ? path.slice(path.lastIndexOf('.')) : '';\r\n    return SUPPORTED_EXTENSIONS.has(ext.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * Run Host + Reality-Gap scanners and return LSP diagnostics.\r\n   * Suppressions and safelists are applied inside the firewall.\r\n   */\r\n  async provideDiagnostics(document: TextDocument): Promise<Diagnostic[]> {\r\n    if (!this.options.enabled || !this.isSupported(document)) {\r\n      return [];\r\n    }\r\n\r\n    const filePath = uriToFilePath(document.uri);\r\n    const projectRoot = this.options.projectRoot || filePath.split(/[/\\\\]/).slice(0, -1).join('/');\r\n\r\n    this.firewallInstance.setMode('observe');\r\n    const result: IntegratedGateResult = await this.firewallInstance.evaluate({\r\n      filePath,\r\n      content: document.getText(),\r\n    });\r\n\r\n    return this.mapResultToDiagnostics(document, result);\r\n  }\r\n\r\n  /**\r\n   * Map firewall verdicts to LSP diagnostics.\r\n   * Severity, code, and message match CLI output.\r\n   */\r\n  private mapResultToDiagnostics(document: TextDocument, result: IntegratedGateResult): Diagnostic[] {\r\n    const diagnostics: Diagnostic[] = [];\r\n    const claimById = new Map(result.claims.map(c => [c.id, c]));\r\n\r\n    for (const v of result.violations) {\r\n      const range = this.rangeForViolation(document, v, claimById);\r\n      const severity = v.severity\r\n        ? severityToLSP(v.severity)\r\n        : tierToLSPSeverity(v.tier);\r\n\r\n      const source = isHostViolation(v.policyId) ? SOURCE_HOST : SOURCE_REALITY_GAP;\r\n\r\n      diagnostics.push({\r\n        range,\r\n        message: v.message,\r\n        severity,\r\n        code: v.policyId,\r\n        source,\r\n        data: {\r\n          suggestion: v.suggestion,\r\n          tier: v.tier,\r\n          quickFixes: v.quickFixes,\r\n        },\r\n      });\r\n    }\r\n\r\n    return diagnostics;\r\n  }\r\n\r\n  private rangeForViolation(\r\n    document: TextDocument,\r\n    v: PolicyViolation,\r\n    claimById: Map<string, { location: { line: number; column: number; length: number } }>\r\n  ): Range {\r\n    const claim = claimById.get(v.claimId);\r\n    if (claim?.location) {\r\n      return claimLocationToRange(claim);\r\n    }\r\n    return lineOnlyRange(document, v.claimId);\r\n  }\r\n}\r\n\r\n/** Ghost-* rules come from truthpack validation = Host scanner; everything else = Reality-Gap (ISL Studio). */\r\nfunction isHostViolation(policyId: string): boolean {\r\n  return (\r\n    policyId === 'ghost-route' ||\r\n    policyId === 'ghost-env' ||\r\n    policyId === 'ghost-import' ||\r\n    policyId === 'ghost-file'\r\n  );\r\n}\r\n\r\nfunction uriToFilePath(uri: string): string {\r\n  if (uri.startsWith('file://')) {\r\n    return uri.slice(7).replace(/%2f/gi, '/').replace(/%5c/gi, '\\\\');\r\n  }\r\n  return uri;\r\n}\r\n\r\nexport { SOURCE_HOST, SOURCE_REALITY_GAP };\r\n","// ============================================================================\n// ISL Language Server\n// ============================================================================\n\nimport {\n  createConnection,\n  TextDocuments,\n  ProposedFeatures,\n  InitializeParams,\n  InitializeResult,\n  TextDocumentSyncKind,\n  CompletionItem as VSCompletionItem,\n  CompletionItemKind,\n  Hover,\n  Definition,\n  DocumentSymbol,\n  SymbolKind,\n  SemanticTokensBuilder,\n  Connection,\n  TextDocumentPositionParams,\n  DocumentSymbolParams,\n  SemanticTokensParams,\n  TextDocumentChangeEvent,\n  CodeActionParams,\n  CodeAction,\n  CodeActionKind,\n  DocumentFormattingParams,\n  TextEdit,\n  Diagnostic,\n} from 'vscode-languageserver/node.js';\n\nimport { TextDocument } from 'vscode-languageserver-textdocument';\nimport { ISLDocumentManager } from './documents';\nimport { ISLCompletionProvider } from './features/completion';\nimport { ISLHoverProvider } from './features/hover';\nimport { ISLDiagnosticsProvider } from './features/diagnostics';\nimport { ISLDefinitionProvider } from './features/definition';\nimport { ISLSymbolProvider } from './features/symbols';\nimport { ISLSemanticTokensProvider, TOKEN_TYPES, TOKEN_MODIFIERS } from './features/semantic-tokens';\nimport { ISLCodeActionProvider } from './features/actions';\nimport { ISLFormattingProvider } from './features/formatting';\nimport { ScannerDiagnosticsProvider, SOURCE_HOST, SOURCE_REALITY_GAP } from './features/scanner-diagnostics';\nimport { DiagnosticSeverity } from '@isl-lang/lsp-core';\n\nexport class ISLServer {\n  private connection: Connection;\n  private documents: TextDocuments<TextDocument>;\n  private documentManager: ISLDocumentManager;\n  private completionProvider: ISLCompletionProvider;\n  private hoverProvider: ISLHoverProvider;\n  private diagnosticsProvider: ISLDiagnosticsProvider;\n  private definitionProvider: ISLDefinitionProvider;\n  private symbolProvider: ISLSymbolProvider;\n  private semanticTokensProvider: ISLSemanticTokensProvider;\n  private codeActionProvider: ISLCodeActionProvider;\n  private formattingProvider: ISLFormattingProvider;\n  private scannerDiagnosticsProvider: ScannerDiagnosticsProvider;\n  private diagnosticTimers = new Map<string, NodeJS.Timeout>();\n  private lastScannerDiagnostics = new Map<string, Diagnostic[]>();\n  private scannerVersions = new Map<string, number>();\n\n  constructor() {\n    this.connection = createConnection(ProposedFeatures.all);\n    this.documents = new TextDocuments(TextDocument);\n    this.documentManager = new ISLDocumentManager();\n    this.completionProvider = new ISLCompletionProvider(this.documentManager);\n    this.hoverProvider = new ISLHoverProvider(this.documentManager);\n    this.diagnosticsProvider = new ISLDiagnosticsProvider(this.documentManager);\n    this.definitionProvider = new ISLDefinitionProvider(this.documentManager);\n    this.symbolProvider = new ISLSymbolProvider(this.documentManager);\n    this.semanticTokensProvider = new ISLSemanticTokensProvider(this.documentManager);\n    this.codeActionProvider = new ISLCodeActionProvider(this.documentManager);\n    this.formattingProvider = new ISLFormattingProvider();\n    this.scannerDiagnosticsProvider = new ScannerDiagnosticsProvider();\n\n    this.setupHandlers();\n  }\n\n  private setupHandlers(): void {\n    // Initialize\n    this.connection.onInitialize((params: InitializeParams): InitializeResult => {\n      return {\n        capabilities: {\n          textDocumentSync: TextDocumentSyncKind.Incremental,\n          completionProvider: {\n            triggerCharacters: ['.', ':', '@', '{', '<'],\n            resolveProvider: true,\n          },\n          hoverProvider: true,\n          definitionProvider: true,\n          documentSymbolProvider: true,\n          documentFormattingProvider: true,\n          codeActionProvider: {\n            codeActionKinds: [\n              CodeActionKind.QuickFix,\n              CodeActionKind.Refactor,\n              CodeActionKind.Source,\n            ],\n          },\n          semanticTokensProvider: {\n            legend: {\n              tokenTypes: TOKEN_TYPES,\n              tokenModifiers: TOKEN_MODIFIERS,\n            },\n            full: true,\n          },\n          workspace: {\n            workspaceFolders: {\n              supported: true,\n            },\n          },\n        },\n      };\n    });\n\n    // Document open - parse immediately\n    this.documents.onDidOpen((event) => {\n      this.documentManager.updateDocument(event.document, true);\n      this.validateDocument(event.document);\n    });\n\n    // Document change - debounced parse\n    this.documents.onDidChangeContent((change: TextDocumentChangeEvent<TextDocument>) => {\n      this.documentManager.updateDocument(change.document, false);\n      this.scheduleValidation(change.document);\n    });\n\n    // Document save - parse immediately and validate\n    this.documents.onDidSave((event) => {\n      const doc = this.documents.get(event.document.uri);\n      if (doc) {\n        this.documentManager.updateDocument(doc, true);\n        this.validateDocument(doc);\n      }\n    });\n\n    // Document close\n    this.documents.onDidClose((event) => {\n      this.documentManager.removeDocument(event.document.uri);\n      this.clearDiagnostics(event.document.uri);\n    });\n\n    // Completion\n    this.connection.onCompletion((params: TextDocumentPositionParams): VSCompletionItem[] => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return [];\n\n      const items = this.completionProvider.provideCompletions(document, params.position);\n      return items.map((item, index) => ({\n        label: item.label,\n        kind: this.mapCompletionKind(item.kind),\n        detail: item.detail,\n        documentation: item.documentation,\n        insertText: item.insertText,\n        insertTextFormat: item.insertTextFormat === 'snippet' ? 2 : 1,\n        sortText: item.sortText,\n        filterText: item.filterText,\n        preselect: item.preselect,\n        deprecated: item.deprecated,\n        data: index,\n      }));\n    });\n\n    // Hover\n    this.connection.onHover((params: TextDocumentPositionParams): Hover | null => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return null;\n\n      // Check for scanner diagnostic hover first\n      const scannerHover = this.getScannerHover(params.textDocument.uri, params.position);\n      if (scannerHover) return scannerHover;\n\n      const hover = this.hoverProvider.provideHover(document, params.position);\n      if (!hover) return null;\n\n      return {\n        contents: {\n          kind: 'markdown',\n          value: hover.contents,\n        },\n        range: hover.range,\n      };\n    });\n\n    // Go to definition\n    this.connection.onDefinition((params: TextDocumentPositionParams): Definition | null => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return null;\n\n      return this.definitionProvider.provideDefinition(document, params.position);\n    });\n\n    // Document symbols\n    this.connection.onDocumentSymbol((params: DocumentSymbolParams): DocumentSymbol[] => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return [];\n\n      const symbols = this.symbolProvider.provideSymbols(document);\n      return symbols.map((sym) => this.mapSymbol(sym));\n    });\n\n    // Code actions\n    this.connection.onCodeAction((params: CodeActionParams): CodeAction[] => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return [];\n\n      const actions = this.codeActionProvider.provideCodeActions(document, params.range, params.context);\n\n      // Append scanner-specific code actions\n      for (const diag of params.context.diagnostics) {\n        if (diag.source !== SOURCE_HOST && diag.source !== SOURCE_REALITY_GAP) continue;\n\n        const data = diag.data as { suggestion?: string; tier?: string; quickFixes?: Array<{ title: string; edit: string }> } | undefined;\n\n        // Suppress-line action: insert a comment above the offending line\n        const suppressComment = diag.source === SOURCE_HOST\n          ? `// shipgate-ignore`\n          : `// islstudio-ignore ${diag.code}`;\n\n        actions.push({\n          title: `Suppress ${diag.code} for this line`,\n          kind: CodeActionKind.QuickFix,\n          diagnostics: [diag],\n          edit: {\n            changes: {\n              [document.uri]: [\n                TextEdit.insert(\n                  { line: diag.range.start.line, character: 0 },\n                  suppressComment + '\\n'\n                ),\n              ],\n            },\n          },\n        });\n\n        // Surface quickFixes from scanner data if present\n        if (data?.quickFixes) {\n          for (const fix of data.quickFixes) {\n            actions.push({\n              title: fix.title,\n              kind: CodeActionKind.QuickFix,\n              diagnostics: [diag],\n              edit: {\n                changes: {\n                  [document.uri]: [\n                    TextEdit.replace(diag.range, fix.edit),\n                  ],\n                },\n              },\n            });\n          }\n        }\n      }\n\n      return actions;\n    });\n\n    // Document formatting\n    this.connection.onDocumentFormatting((params: DocumentFormattingParams): TextEdit[] => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return [];\n\n      return this.formattingProvider.format(document, params.options);\n    });\n\n    // Semantic tokens\n    this.connection.languages.semanticTokens.on((params: SemanticTokensParams) => {\n      const document = this.documents.get(params.textDocument.uri);\n      if (!document) return { data: [] };\n\n      const tokens = this.semanticTokensProvider.provideTokens(document);\n      const builder = new SemanticTokensBuilder();\n\n      for (const token of tokens) {\n        builder.push(\n          token.line,\n          token.startChar,\n          token.length,\n          TOKEN_TYPES.indexOf(token.tokenType),\n          this.encodeModifiers(token.tokenModifiers)\n        );\n      }\n\n      return builder.build();\n    });\n\n    // Custom requests\n    this.connection.onRequest('isl/validate', (params: { uri: string }) => {\n      const document = this.documents.get(params.uri);\n      if (!document) {\n        return { valid: false, errors: ['Document not found'] };\n      }\n\n      // Force immediate parse\n      this.documentManager.updateDocument(document, true);\n      const diagnostics = this.documentManager.getDiagnostics(params.uri);\n      const errors = diagnostics\n        .filter(d => d.severity === DiagnosticSeverity.Error)\n        .map(d => d.message);\n\n      return { valid: errors.length === 0, errors };\n    });\n\n    // Listen\n    this.documents.listen(this.connection);\n  }\n\n  private scheduleValidation(document: TextDocument): void {\n    const uri = document.uri;\n\n    // Clear existing timer\n    const existing = this.diagnosticTimers.get(uri);\n    if (existing) {\n      clearTimeout(existing);\n    }\n\n    // Schedule new validation after debounce\n    const timer = setTimeout(() => {\n      this.diagnosticTimers.delete(uri);\n      const doc = this.documents.get(uri);\n      if (doc) {\n        this.validateDocument(doc);\n      }\n    }, 150); // 150ms debounce\n\n    this.diagnosticTimers.set(uri, timer);\n  }\n\n  private validateDocument(document: TextDocument): void {\n    // Ensure document is parsed\n    this.documentManager.updateDocument(document, true);\n\n    // Get diagnostics from document manager (parser + semantic)\n    const islDiagnostics = this.documentManager.getDiagnostics(document.uri);\n\n    const parserDiagnostics = islDiagnostics.map((d) => ({\n      range: ISLDocumentManager.toRange(d.location),\n      message: d.message,\n      severity: d.severity as 1 | 2 | 3 | 4,\n      code: d.code,\n      source: d.source,\n      relatedInformation: d.relatedInfo?.map(r => ({\n        location: {\n          uri: document.uri,\n          range: ISLDocumentManager.toRange(r.location),\n        },\n        message: r.message,\n      })),\n    }));\n\n    // Send parser diagnostics immediately for fast feedback\n    this.connection.sendDiagnostics({\n      uri: document.uri,\n      diagnostics: parserDiagnostics,\n    });\n\n    // Run scanner diagnostics asynchronously, then merge and re-send\n    this.runScannerDiagnostics(document, parserDiagnostics);\n  }\n\n  /**\n   * Run Host + Reality-Gap scanners async and merge with parser diagnostics.\n   * Suppressions and safelists are applied inside the firewall.\n   */\n  private async runScannerDiagnostics(\n    document: TextDocument,\n    parserDiagnostics: Diagnostic[]\n  ): Promise<void> {\n    try {\n      if (!this.scannerDiagnosticsProvider.isSupported(document)) {\n        // Clear any stale scanner diagnostics for non-supported files\n        this.lastScannerDiagnostics.delete(document.uri);\n        return;\n      }\n\n      // Capture version before async work to detect stale results\n      const versionAtStart = document.version;\n      this.scannerVersions.set(document.uri, versionAtStart);\n\n      const scannerDiags = await this.scannerDiagnosticsProvider.provideDiagnostics(document);\n\n      // Discard results if a newer validation has started since\n      if ((this.scannerVersions.get(document.uri) ?? 0) > versionAtStart) {\n        return;\n      }\n\n      this.lastScannerDiagnostics.set(document.uri, scannerDiags);\n\n      // Merge parser + scanner, deduplicate by code:line:char\n      const merged = this.deduplicateDiagnostics([...parserDiagnostics, ...scannerDiags]);\n\n      // Re-send with merged results\n      this.connection.sendDiagnostics({\n        uri: document.uri,\n        diagnostics: merged,\n      });\n    } catch (err) {\n      // Scanner failure should not break the LSP  log and continue\n      console.error('[scanner-diagnostics] Error:', err);\n    }\n  }\n\n  /**\n   * Deduplicate diagnostics by code + start position.\n   * Prefers entries with richer data (e.g. scanner entries with suggestions).\n   */\n  private deduplicateDiagnostics(diagnostics: Diagnostic[]): Diagnostic[] {\n    const byKey = new Map<string, Diagnostic>();\n    for (const d of diagnostics) {\n      const key = `${d.code}:${d.range.start.line}:${d.range.start.character}`;\n      const existing = byKey.get(key);\n      if (!existing) {\n        byKey.set(key, d);\n      } else if (d.data && !existing.data) {\n        byKey.set(key, d);\n      }\n    }\n    return Array.from(byKey.values());\n  }\n\n  private clearDiagnostics(uri: string): void {\n    this.lastScannerDiagnostics.delete(uri);\n    this.scannerVersions.delete(uri);\n    this.connection.sendDiagnostics({ uri, diagnostics: [] });\n  }\n\n  /**\n   * Return hover info for scanner diagnostics at the given position.\n   * Shows tier, source, and suggestion if available.\n   */\n  private getScannerHover(uri: string, position: { line: number; character: number }): Hover | null {\n    const scannerDiags = this.lastScannerDiagnostics.get(uri);\n    if (!scannerDiags || scannerDiags.length === 0) return null;\n\n    // Find scanner diagnostics whose range contains the position\n    const matching = scannerDiags.filter(d => {\n      const r = d.range;\n      if (position.line < r.start.line || position.line > r.end.line) return false;\n      if (position.line === r.start.line && position.character < r.start.character) return false;\n      if (position.line === r.end.line && position.character > r.end.character) return false;\n      return true;\n    });\n\n    if (matching.length === 0) return null;\n\n    const parts: string[] = [];\n    for (const d of matching) {\n      const data = d.data as { suggestion?: string; tier?: string; quickFixes?: unknown[] } | undefined;\n      const tierLabel = data?.tier === 'hard_block' ? ' Hard Block'\n        : data?.tier === 'soft_block' ? ' Soft Block'\n        : ' Warning';\n      const sourceLabel = d.source === SOURCE_HOST ? 'Host Scanner' : 'Reality-Gap Scanner';\n\n      let md = `**${sourceLabel}**  ${tierLabel}\\n\\n`;\n      md += `**\\`${d.code}\\`**: ${d.message}\\n`;\n      if (data?.suggestion) {\n        md += `\\n **Suggestion:** ${data.suggestion}\\n`;\n      }\n      parts.push(md);\n    }\n\n    return {\n      contents: {\n        kind: 'markdown',\n        value: parts.join('\\n---\\n'),\n      },\n      range: matching[0]!.range,\n    };\n  }\n\n  private mapCompletionKind(kind: string): CompletionItemKind {\n    switch (kind) {\n      case 'keyword': return CompletionItemKind.Keyword;\n      case 'type': return CompletionItemKind.TypeParameter;\n      case 'entity': return CompletionItemKind.Class;\n      case 'behavior': return CompletionItemKind.Function;\n      case 'field': return CompletionItemKind.Field;\n      case 'snippet': return CompletionItemKind.Snippet;\n      case 'function': return CompletionItemKind.Function;\n      case 'variable': return CompletionItemKind.Variable;\n      case 'enum': return CompletionItemKind.Enum;\n      case 'property': return CompletionItemKind.Property;\n      default: return CompletionItemKind.Text;\n    }\n  }\n\n  private mapSymbol(sym: { name: string; kind: string; range: { start: { line: number; character: number }; end: { line: number; character: number } }; selectionRange: { start: { line: number; character: number }; end: { line: number; character: number } }; detail?: string; children?: unknown[] }): DocumentSymbol {\n    return {\n      name: sym.name,\n      kind: this.mapSymbolKind(sym.kind),\n      range: sym.range,\n      selectionRange: sym.selectionRange,\n      detail: sym.detail,\n      children: sym.children?.map((c) => this.mapSymbol(c as typeof sym)),\n    };\n  }\n\n  private mapSymbolKind(kind: string): SymbolKind {\n    switch (kind) {\n      case 'domain': return SymbolKind.Namespace;\n      case 'entity': return SymbolKind.Class;\n      case 'behavior': return SymbolKind.Function;\n      case 'type': return SymbolKind.TypeParameter;\n      case 'enum': return SymbolKind.Enum;\n      case 'invariant': return SymbolKind.Interface;\n      case 'policy': return SymbolKind.Interface;\n      case 'view': return SymbolKind.Struct;\n      case 'field': return SymbolKind.Field;\n      case 'input': return SymbolKind.Variable;\n      case 'output': return SymbolKind.Variable;\n      case 'error': return SymbolKind.EnumMember;\n      case 'lifecycle-state': return SymbolKind.EnumMember;\n      case 'scenario': return SymbolKind.Event;\n      case 'chaos': return SymbolKind.Event;\n      case 'variant': return SymbolKind.EnumMember;\n      default: return SymbolKind.Variable;\n    }\n  }\n\n  private encodeModifiers(modifiers: string[]): number {\n    let result = 0;\n    for (const mod of modifiers) {\n      const index = TOKEN_MODIFIERS.indexOf(mod as typeof TOKEN_MODIFIERS[number]);\n      if (index >= 0) {\n        result |= (1 << index);\n      }\n    }\n    return result;\n  }\n\n  start(): void {\n    this.connection.listen();\n  }\n}\n"]}