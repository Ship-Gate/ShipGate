# Getting Started

Get from zero to a SHIP/NO_SHIP verdict in 5 minutes.

## Install

```bash
npm install -g shipgate
```

Requires Node.js 18+. Verify with `shipgate --version`.

## Initialize a project

```bash
cd your-project
shipgate init
```

This creates:

```
.shipgate.yml              # Config: CI behavior, thresholds, ignore patterns
.shipgate/specs/.gitkeep   # Your ISL specifications go here
.shipgate/evidence/        # Evidence bundles from verification runs
.github/workflows/shipgate.yml  # CI workflow (if GitHub detected)
```

Pass `--yes` to skip prompts and use defaults.

## Write your first ISL spec

Create `.shipgate/specs/auth.isl`:

```isl
domain Auth {
  entity User {
    id: UUID @generated
    email: Email @unique
    passwordHash: String
    status: UserStatus = PENDING
    createdAt: Timestamp @generated
  }

  enum UserStatus { PENDING, ACTIVE, SUSPENDED }

  behavior RegisterUser {
    input {
      email: Email
      password: String
    }

    output {
      user: User
    }

    errors {
      DUPLICATE_EMAIL: "Email already registered"
      WEAK_PASSWORD: "Password does not meet requirements"
    }

    preconditions {
      input.email.isValid()
      input.password.length >= 8
    }

    postconditions {
      result.user.status == PENDING
      result.user.email == input.email
    }
  }
}
```

Or skip writing ISL by hand — describe what you want:

```bash
shipgate vibe "user registration with email verification and JWT auth"
```

## Verify your implementation

```bash
shipgate verify src/
```

Output:

```
━━━ Verification Result ━━━

  Verdict:  SHIP
  Score:    87/100
  Files:    6 checked

  ✓ src/routes/auth.ts        PASS (92%)
  ✓ src/services/user.ts      PASS (85%)
  ✓ src/middleware/auth.ts     PASS (88%)
  ✗ src/routes/admin.ts       FAIL (62%)
    - AUTH_MISSING: Endpoint accessible without authentication
    - GHOST_ROUTE: /api/v1/admin/stats not in ISL API spec
```

## Gate a merge

```bash
shipgate gate .shipgate/specs/auth.isl --impl src/ --ci
```

- Exit 0 = **SHIP** (safe to merge)
- Exit 1 = **NO_SHIP** (violations found, merge blocked)

The `--ci` flag suppresses spinners and outputs machine-readable results.

## Scan an existing project

Already have a codebase without ISL specs? Scan it:

```bash
shipgate scan .
```

This walks your source files, generates ISL specs via AI, runs Truthpack extraction, and produces a coverage report.

```bash
shipgate scan . --min-coverage 80
```

Fail the scan if spec coverage is below 80%.

## Add to CI

The workflow generated by `shipgate init` handles everything. Or add manually:

```yaml
# .github/workflows/shipgate.yml
name: ShipGate
on:
  pull_request:
    branches: [main]

jobs:
  gate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20 }
      - run: npm ci
      - run: npx shipgate verify . --ci --format github
      - run: npx shipgate gate .shipgate/specs/ --impl src/ --ci
```

## Next steps

- [ISL Reference](./isl-reference.md) — Learn the full ISL syntax
- [CLI Reference](./cli-reference.md) — Every command and flag
- [Vibe Pipeline](./vibe-pipeline.md) — NL → ISL → verified code in one command
- [Policy Rules](./policy-rules.md) — All 27 rules explained
- [MCP Setup](./mcp-setup.md) — Real-time AI suggestion filtering in Cursor
