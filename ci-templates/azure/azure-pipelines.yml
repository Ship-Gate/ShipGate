# Shipgate ISL Verify â€” Azure DevOps Pipeline
#
# Usage: Copy this into your azure-pipelines.yml

trigger:
  - main

pr:
  - main

pool:
  vmImage: 'ubuntu-latest'

steps:
  - script: |
      npm install -g shipgate
      shipgate verify src/ --ci --format junit > $(Build.ArtifactStagingDirectory)/shipgate.xml
    displayName: 'Shipgate ISL Verify'
    continueOnError: true

  - task: PublishTestResults@2
    inputs:
      testResultsFormat: 'JUnit'
      testResultsFiles: '$(Build.ArtifactStagingDirectory)/shipgate.xml'
      testRunTitle: 'Shipgate ISL Verify'
    condition: always()
    displayName: 'Publish Test Results'
