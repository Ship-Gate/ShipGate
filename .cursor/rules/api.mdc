---
description: API route patterns (610 verified routes)
globs: ["**/api/**/*.ts", "**/routes/**/*.ts"]
alwaysApply: false
priority: 80
---

# API Conventions

## Verified Routes (610 total)
- `GET x-forwarded-for` → demos\e2e-login-demo\src\demo.ts:479
- `GET x-forwarded-for` → demos\e2e-login-demo\src\demo.ts:526
- `GET /health` → demos\flagship-auth-payments\src\server.ts:51
- `POST /auth/oauth/login` → demos\flagship-auth-payments\src\server.ts:59
- `POST /auth/token/refresh` → demos\flagship-auth-payments\src\server.ts:75
- `POST /auth/logout` → demos\flagship-auth-payments\src\server.ts:82
- `GET /auth/session/validate` → demos\flagship-auth-payments\src\server.ts:90
- `POST /payments/customers` → demos\flagship-auth-payments\src\server.ts:102
- `POST /payments/charges` → demos\flagship-auth-payments\src\server.ts:109
- `POST /payments/refunds` → demos\flagship-auth-payments\src\server.ts:126

... and 600 more in .vibecheck/truthpack/routes.json

## Pattern Requirements
- Use consistent HTTP methods (GET for read, POST for create, etc.)
- Always validate request body with schemas
- Return consistent response shapes
- Handle errors with proper status codes

## Response Format
```typescript
// Success
{ success: true, data: T }

// Error
{ success: false, error: { code: string, message: string } }
```

---
<!-- guardrail:auto-generated -->
*Verified by Guardrail ✓*